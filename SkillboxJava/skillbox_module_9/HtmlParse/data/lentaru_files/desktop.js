(window.webpackJsonp=window.webpackJsonp||[]).push([[3],[,,,,,,,,,,,,function(e,t,i){"use strict";e.exports.Button=i(162),e.exports.Input=i(21),e.exports.Checkbox=i(163),e.exports.Select=i(164),e.exports.Date=i(165),e.exports.DateNative=i(168),e.exports.Captcha=i(169)},,,,,,,,,function(e,t,i){"use strict";var n=i(9),s=i(0),o=i(4).validate;e.exports=s.View.extend({name:null,properties:[],debounce:null,livelabel:!1,validate:!1,preferView:!1,changeEvents:["input","paste","change"],tagName:"input",className:"form-control",constructor:function(e){this.properties=this.properties.concat(["name","changeEvents","debounce","livelabel","validate","preferView","rules"]),this.fillProperties(e),this._changeEvents=this.changeEvents.join(" "),s.View.prototype.constructor.apply(this,arguments)},initialize:function(){if(this.preferView){var e=this.getValue();e&&this.model.set(this.name,e)}else{var t=this.model.get(this.name);t&&this.setValue(t)}},setValue:function(e){this.$el.val(e),this.livelabel&&this.onElementChangePlaceholder()},getValue:function(){return this.$el.val()||null},resetValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.$el.val(e||""),this.model.set(this.name,e,{silent:!0}),this.livelabel&&this.onElementChangePlaceholder()},fillProperties:function(e){var t=this;e&&this.properties.forEach((function(i){e[i]&&(t[i]=e[i])}))},onElementChange:function(){this.model.set(this.name,this.getValue())},onModelAttributeChange:function(e,t){t!==this.getValue()&&this.setValue(t)},delegateEvents:function(){if(!this._onElementChangeBound){var e=this.onElementChange.bind(this);this._onElementChangeBound=this.debounce?n.debounce(e,this.debounce):e}return this.$el.on(this._changeEvents,this._onElementChangeBound),this.listenTo(this.model,"change:".concat(this.name),this.onModelAttributeChange),this.delegateFocus(),this.livelabel&&this.delegateLivelabel(),this.validate&&this.delegateValidation(),s.View.prototype.delegateEvents.apply(this,arguments)},undelegateEvents:function(){return this.$el&&this.$el.off(this._changeEvents,this._onElementChangeBound),this.stopListening(this.model,"change:".concat(this.name),this.onModelAttributeChange),this.undelegateFocus(),this.livelabel&&this.undelegateLivelabel(),this.validate&&this.undelegateValidation(),s.View.prototype.undelegateEvents.apply(this,arguments)},delegateFocus:function(){this._onFocusBound=this._onFocusBound||this.onFocus.bind(this),this._onBlurBound=this._onBlurBound||this.onBlur.bind(this),this.$el.on("focus",this._onFocusBound),this.$el.on("focusout",this._onBlurBound)},undelegateFocus:function(){this.$el&&(this.$el.off("focus",this._onFocusBound),this.$el.off("focusout",this._onBlurBound))},focus:function(){this.$el.focus()},blur:function(){this.$el.blur()},onFocus:function(){this.$el.parent().attr("data-focus",!0)},onBlur:function(){this.$el.parent().removeAttr("data-focus")},delegateLivelabel:function(){this._onElementChangePlaceholderBound=this._onElementChangePlaceholderBound||this.onElementChangePlaceholder.bind(this),this.$el.on(this._changeEvents,this._onElementChangePlaceholderBound)},undelegateLivelabel:function(){this.$el&&this.$el.off(this._changeEvents,this._onElementChangePlaceholderBound)},onElementChangePlaceholder:function(){this.getValue()?(this.$el.attr("data-livelabel",!0),this.$el.parent().attr("data-livelabel",this.$el.attr("placeholder"))):(this.$el.removeAttr("data-livelabel"),this.$el.parent().removeAttr("data-livelabel"))},delegateValidation:function(){this._resetErrorBound=this._resetErrorBound||this.resetError.bind(this),this._onModelValidateBound=this._onModelValidateBound||this.onModelValidate.bind(this),this.$el.on(this._changeEvents,this._resetErrorBound),this.listenTo(this.model,"validation:message",this._onModelValidateBound)},undelegateValidation:function(){this.$el&&this.$el.off(this._changeEvents,this._resetErrorBound),this.stopListening(this.model,"validation:message",this._onModelValidateBound)},onModelValidate:function(e){e&&e[this.name]?this.setError(e[this.name][0]):(this.resetError(),this.resetWarning())},setError:function(e){this.$el.attr("data-error",!0),this.$el.parent().attr("data-error",e)},resetError:function(){this.$el.removeAttr("data-error"),this.$el.parent().removeAttr("data-error")},setWarning:function(e){this.$el.attr("data-warning",!0),this.$el.parent().attr("data-warning",e)},resetWarning:function(){this.$el.removeAttr("data-warning"),this.$el.parent().removeAttr("data-warning")},isValid:function(){if(!this.rules)return!0;if(this.resetError(),this.resetWarning(),this.resultValidate=o(this.model.get(this.name),this.rules),this.resultValidate){var e=this.resultValidate.errors[0],t=this.resultValidate.warnings[0];e&&(this.setError(e.msg),this.resultValidate.errors[e.constraint]=!0),t&&(this.setWarning(t.msg),this.resultValidate.warnings[t.constraint]=!0),this.validate=!1}return!this.resultValidate},cancelValidationRule:function(e){this.rules[e]=!1}})},,function(e,t,i){"use strict";var n=i(7),s=i(306),o=i(39),a=i(38);e.exports=n.ItemView.extend({className:"b-timeline-comment__box",template:s,modelEvents:{change:"render"},onRender:function(){this.$el.find(".js-zoom[data-url]").each((function(e,t){return o({$el:$(t)})})),this.$el.find(".js-inline-gallery").each((function(e,t){return a({el:$(t)})})),this.$el.find(".js-gallery").each((function(e,t){return new Gallery(t)}))}})},function(e,t,i){"use strict";var n=i(9),s=i(0),o=i(12),a=i(4).parseQueryString,r=i(3);e.exports=s.View.extend({type:null,events:{submit:"onSubmit","click .js-bind-mail":"onBindMail"},initialize:function(e){this.type=e.type,this.model=new s.Model,this.$messageForRamblerMail=this.$el.find(".js-message-rambler-mail"),this.classNameVisible=this.$messageForRamblerMail.data("class-visible"),this.tooltip=r.tooltip,this.email=new o.Input({el:this.$el.find('input[name="email"]'),name:"email",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{required:!0,notrambler:{msg:"\u0410\u043a\u043a\u0430\u0443\u043d\u0442 c \u044d\u0442\u0438\u043c \u0430\u0434\u0440\u0435\u0441\u043e\u043c \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d"},email:!0}}),this.password=new o.Input({el:this.$el.find('input[name="password"]'),name:"password",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{required:!0}}),this.submit=new o.Button({el:this.$el.find('[type="submit"]'),events:{click:n.bind(this.onSubmit,this)}});var t=this.$el.find(".js-captcha");this.captcha=new o.Captcha({el:t,image:{el:t.find("img")},input:{el:t.find("input"),name:"captcha",validate:!0}}),this.on("submit:success",this.onSubmitSuccess),this.on("submit:error",this.onSubmitError)},wait:function(){this._waiting||(this._waiting=!0,this.submit.wait())},listen:function(){this.submit.listen(),this._waiting=!1},onSubmit:function(e){if(e.preventDefault(),e.stopPropagation(),!this._waiting){this.wait();var t=this.model.toJSON(),i=this.captcha.model.get("id"),s=this.captcha.model.get("captcha");i&&(t=n.merge(t,{captcha:{method:this.captcha.model.get("method"),order_id:i,captcha_value:s&&s.toUpperCase()}})),this.trigger("submit",t)}},onSubmitComplete:function(){this.email.resetError(),this.password.resetError(),this.captcha.hide()},onSubmitSuccess:function(){this.onSubmitComplete(),this.listen()},onSubmitError:function(e){var t=this;switch(this.onSubmitComplete(),e.status){case 400:this.password.resetValue(),this.password.focus();var i=e.responseJSON.errors;if(i.captcha){var n=i.wrong_captcha,s=i.captcha;this.captcha.model.set({id:s.order_id,image:"data:image/png;base64,".concat(s.base64),method:n.method,alphabet:s.alphabet}),this.captcha.render().show().setError(n.message),this.listen()}else(i.email||i.password)&&setTimeout((function(){t.model.trigger("validation:message",i),i.email&&t.showMessageForInputPass()}),0);this.listen();break;case 423:this.captcha.input.resetValue(),this.password.resetValue(),this.password.focus();var o=e.responseJSON.errors.rate_limit,a=e.responseJSON.errors.captcha;1===o.passable_by_captcha?(this.captcha.model.set({id:a.order_id,image:"data:image/png;base64,".concat(a.base64),method:o.method,alphabet:a.alphabet}),this.captcha.render().show(),this.password.setError("\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c"),this.listen()):(this.showMessageForRateLimitsError(),setTimeout(this.listen.bind(this),1e3*o.wait_at_least));break;default:this.listen()}},showMessageForRateLimitsError:function(){r.notification.set("error","\u041f\u0440\u0435\u0432\u044b\u0448\u0435\u043d\u043e \u043e\u0433\u0440\u0430\u043d\u0438\u0447\u0435\u043d\u0438\u0435 \u043d\u0430 \u043a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u043e\u0432 \u043a \u0441\u0430\u0439\u0442\u0443. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u0434\u043e\u0436\u0434\u0438\u0442\u0435!")},showMessageForInputPass:function(){this.$messageForRamblerMail.length?this.$messageForRamblerMail.addClass(this.classNameVisible):(this.$el.append(this.tooltip.renderWithData({type:"authWithMail",email:this.model.get("email")}).$el),this.tooltip.show())},hideMessageForInputPass:function(){this.$messageForRamblerMail.removeClass(this.classNameVisible)},getPreloadData:function(){return{email:a().email,password:""}},checkPreloadMail:function(){var e=a();return!(!e||!e.email)},onBindMail:function(e){e.preventDefault();var t=this.model.get("email");location.href=t?"".concat(e.target.href,"?email=").concat(t):e.target.href},validate:function(){var e=this.email.isValid(),t=this.password.isValid(),i=this.captcha.isValid();return e&&t&&i}})},,,,,function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a){i=i+'\n<div class="js-favorite-tooltip-close b-favorite-tooltip-close">\n  <svg class="svg-icons__ui-cross">\n    <use xlink:href="#ui-cross"></use>\n  </svg>\n</div>\n<div class="b-favorite-tooltip-title">'+(null==(t=e)?"":t)+'</div><a class="js-favorite-tooltip-btn b-button--red b-favorite-tooltip-link"'+n.attr("href",a,!0,!0)+n.attr("target",s,!0,!0)+">"+n.escape(null==(t=o)?"":t)+"</a>"}.call(this,"messageBody"in s?s.messageBody:"undefined"!==typeof messageBody?messageBody:void 0,"target"in s?s.target:"undefined"!==typeof target?target:void 0,"titleForButton"in s?s.titleForButton:"undefined"!==typeof titleForButton?titleForButton:void 0,"urlForButton"in s?s.urlForButton:"undefined"!==typeof urlForButton?urlForButton:void 0),i}},,,,,,,,,function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=i(39);i(48)();var a={speed:200,preload:!0},r=function(){function e(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=Object.assign(a,i),this.$el=s(t),this.wrap=this.$el.find(".wrap"),this.text=this.$el.find(".b-label__text"),this.credits=this.$el.find(".b-label__credits"),this.caption=this.$el.find(".b-label__caption"),this.info=this.$el.find(".info"),this.current=this.$el.data("current")?this.$el.data("current"):0,this.data=this.$el.data("box"),this.settings.preload&&this.preloadSiblings(0),this.count=this.$el.find(".count span"),this.img=this.$el.find("img"),this.zoom=this.$el.find(".zoom"),this.linkGallery=this.$el.data("link-gallery"),this.galleryLength=this.linkGallery?4:this.data.length,this.toggleLabels(),this.linkGallery?(this.$el.on("click.gallery",".control",this.navigationLinkGallery.bind(this)),this.stateNavigation()):(this.toggleZoomControl(),this.$el.on("click.gallery",".control",this.navigationNormalGallery.bind(this)))}var t,i,r;return t=e,(i=[{key:"navigationNormalGallery",value:function(e){e.stopPropagation(),s(e.currentTarget).hasClass("control_next")?this.current+1<=this.galleryLength-1?this.current++:this.current=0:this.current-1>=0?this.current--:this.current=this.galleryLength-1,this.setNewItem()}},{key:"navigationLinkGallery",value:function(e){e.stopPropagation(),s(e.currentTarget).hasClass("control_next")?this.current+1<=this.galleryLength-1&&(this.current++,this.setNewItem(),this.current===this.galleryLength-1&&this.showLinkToGalleryPage(!0)):this.current-1>=0&&(this.current--,this.setNewItem(),this.viewLinkToGallery&&this.showLinkToGalleryPage(!1)),this.stateNavigation()}},{key:"stateNavigation",value:function(){this.current===this.galleryLength-1?(this.$el.addClass("_end"),this.$el.removeClass("_begin")):0===this.current?(this.$el.addClass("_begin"),this.$el.removeClass("_end")):(this.$el.removeClass("_begin"),this.$el.removeClass("_end"))}},{key:"showLinkToGalleryPage",value:function(e){this.$link=this.$el.find(".js-link-to-gallery-page"),this.viewLinkToGallery=e,e?this.$link.addClass("_visible"):this.$link.removeClass("_visible")}},{key:"toggleZoomControl",value:function(){var e=this.data[this.current];!e.original_width||e.original_width===e.preview_width&&e.original_height===e.preview_height?this.$el.addClass("b-inline-gallery-box_no-zoom"):(this.$el.removeClass("b-inline-gallery-box_no-zoom"),o({$el:this.zoom,data:this.data,current:this.current}))}},{key:"setNewItem",value:function(){var e=this,t=this.data[this.current];this.count.text(this.current+1),this.img.transition({opacity:0},this.settings.speed,(function(){e.img.attr("src",t.preview_url),e.img.css({width:t.preview_width>620?620:t.preview_width,height:t.preview_width>620?t.preview_height-t.preview_height/100*(t.preview_width/6.2-100):t.preview_height,maxWidth:t.preview_width>620?620:t.preview_width}),e.img.transition({opacity:1})})),this.zoom.data("zoom")&&this.zoom.data("zoom").destroy(),this.text.html(t.alt),this.credits.html(t.credits),this.caption.html(t.caption),this.toggleLabels(),this.zoom.data({url:t.original_url,alt:t.alt}),this.linkGallery||this.toggleZoomControl(),this.settings.preload&&this.preloadSiblings(this.current)}},{key:"preloadSiblings",value:function(e){if(this.data.length<4)for(var t=this.data,i=0,n=t.length;i<n;i++)(new Image).src=t[i].preview_url;else for(var s,o=this.data.length,a=0,r=(s=0===e?[o-1,0,1]:e===o-1?[o-2,o-1,0]:[e-1,e,e+1]).length;a<r;a++)(new Image).src=this.data[s[a]].preview_url;this.data[e].original_url&&((new Image).src=this.data[e].original_url)}},{key:"toggleLabels",value:function(){[this.text,this.credits,this.caption].forEach((function(e){var t=e.html();t&&t.trim().length>1?e.show():e.hide()}))}}])&&n(t.prototype,i),r&&n(t,r),e}();e.exports=function(e){if(e&&e.el)new r(e.el,e.settings);else{var t=s(".js-inline-gallery");if(!t.length)return;t.each((function(e,t){new r(t)}))}}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1);i(48)();var o={speed:600,backdropOpacity:.7,backdropSpeed:200,preload:!0},a=function(){function e(t){var i=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=Object.assign(o,r),this.$el=s(t),this.$el.on("click.zoom",(function(){i.show()})),this.$el.data("zoom",this),this.settings.preload)&&((new Image).src=this.$el.data("url"));this.data=n,this.current=a}var t,i,a;return t=e,(i=[{key:"makeGallery",value:function(){var e=this;s(document).on("keyup.zoom",(function(t){switch(t.keyCode){case 39:e.showNext();break;case 37:e.showPrev()}})),this.$frame.prepend('<div class="b-control-arrow b-control-arrow_md b-control-arrow_left control control_prev"><svg class="b-control-arrow__icon control-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-arrow-default_up"></use></svg></div><div class="b-control-arrow b-control-arrow_md b-control-arrow_right control control_next"><svg class="b-control-arrow__icon control-icon"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-arrow-default_up"></use></svg></div>'),this.controls=this.$frame.find(".control"),this.controls.eq(0).on("click.zoom",(function(){e.showPrev()})),this.controls.eq(1).on("click.zoom",(function(){e.showNext()}))}},{key:"show",value:function(){var e=this;this.backdrop=s('<div class="b-backdrop"/>').appendTo("body"),this.backdrop.on("click.zoom",(function(){e.hide()})),this.backdrop.transition({opacity:this.settings.backdropOpacity},this.settings.backdropSpeed,(function(){e.url=e.$el.data("url"),e.$frame=s('<div class="b-zoom"><svg class="icons-zoom_close"><use xlink:href="#ui-zoom_close"></use></svg></div>'),e.$frame.find(".icons-zoom_close").on("click",(function(){e.hide()})),e.setAlt(),s(window).on("resize.zoom",(function(){e.reposition()})),s(document).on("keyup.zoom",(function(t){27===t.keyCode&&(t.preventDefault(),e.hide())})),e.image=new Image,e.image.onload=function(){e.width=e.image.width,e.height=e.image.height,e.$frame.prepend(e.image),e.reposition(),e.$frame.css({visibility:"visible",opacity:0}).transition({opacity:1},e.settings.speed)},e.image.src=e.url,e.data.length>1&&e.makeGallery(),s("body").append(e.$frame)}))}},{key:"hide",value:function(){var e=this;s(window).off(".zoom"),s(document).off(".zoom"),this.controls&&this.controls.off(".zoom"),this.backdrop.off(".zoom"),this.$frame.transition({opacity:0},this.settings.speed/2).promise().done((function(){e.$frame.remove(),e.backdrop.transition({opacity:0},e.settings.backdropSpeed,(function(){s(this).remove()}))}))}},{key:"destroy",value:function(){s(window).off(".zoom"),s(document).off(".zoom"),this.controls&&this.controls.off(".zoom"),this.$el.off(".zoom")}},{key:"reposition",value:function(){var e,t=this.width,i=this.height,n=100*this.width/s(window).width();n>80&&(t=80*this.width/n,i=80*this.height/n),(e=100*i/s(window).height())>80&&(t=80*t/e,i=80*i/e),s(this.image).css({width:t,height:i}),this.$frame.css({width:t,left:(s(window).width()-t)/2-10,top:(s(window).height()-this.$frame.height())/2-10})}},{key:"setAlt",value:function(){this.data[this.current]&&null!==this.data[this.current].caption&&this.$frame.append('<div class="alt">'+this.data[this.current].caption+"</div>")}},{key:"setImage",value:function(){var e=this;this.$frame.transition({opacity:0},200,(function(){e.$frame.css({"max-width":"none",width:"auto"}),e.image=new Image,e.image.src=e.data[e.current].original_url,e.$frame.find(".alt").remove(),e.setAlt(),e.image.onload=function(){e.width=e.image.width,e.height=e.image.height,e.$frame.find("img").replaceWith(e.image),e.reposition(),e.$frame.transition({opacity:1})}}))}},{key:"showNext",value:function(){this.current+1<=this.data.length-1?this.current++:this.current=0,this.setImage()}},{key:"showPrev",value:function(){this.current-1>=0?this.current--:this.current=this.data.length-1,this.setImage()}}])&&n(t.prototype,i),a&&n(t,a),e}();e.exports=function(e){if(e&&e.$el)new a(e.$el,e.data,e.current,e.settings);else{var t=s(".js-zoom");if(!t.length)return;t.each((function(e,t){new a(t)}))}}},,,,,,,,,,,,,,function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o){if(i+="\n\x3c!-- fetch first component and alt--\x3e",s&&s.length&&s[0]&&s[0].versions){i+="\n\x3c!-- get first picture object--\x3e";var a,r=s[0];switch(i+="\n\x3c!-- get first picture alt--\x3e",!0){case!!r.caption:a=r.caption;break;case!!r.alt:a=r.alt}i=i+"\n\x3c!-- draw first picture--\x3e\n<aside"+(n.attr("class",n.classes(["b-box","b-inline-gallery-box","js-inline-gallery","b-inline-gallery-box_no-zoom",1===s.length?"b-inline-gallery-box_single":""],[!1,!1,!1,!1,!0]),!1,!0)+n.attr("data-box",e.stringify(o),!0,!0))+'>\n  <div class="wrap">',s.length>1&&(i+='\n    <div class="b-control-arrow b-control-arrow_md b-control-arrow_left control control_prev">\n      <svg class="b-control-arrow__icon control-icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-arrow-default_up"></use>\n      </svg>\n    </div>\n    <div class="b-control-arrow b-control-arrow_md b-control-arrow_right control control_next">\n      <svg class="b-control-arrow__icon control-icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-arrow-default_up"></use>\n      </svg>\n    </div>'),r.versions&&(i=i+'\n    <div class="picture zoom"'+n.attr("data-url",r.versions.original.full_url,!0,!0)+n.attr("data-alt",a,!0,!0)+"><img"+(n.attr("src",r.versions.pic.full_url,!0,!0)+n.attr("alt",a,!0,!0)+n.attr("title",a,!0,!0))+'>\n      <svg class="picture__icons-zoom">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-icons-zoom"></use>\n      </svg>\n    </div>'),i=i+'\n  </div>\n  <div class="info">\n    <div class="b-label">\n      <div class="b-label__caption">'+(null==(t=r.caption)?"":t)+'</div>\n      <div class="b-label__credits">'+(null==(t=r.credits)?"":t)+'</div>\n      <div class="b-label__text">'+(null==(t=r.alt)?"":t)+"</div>\n    </div>",s.length>1&&(i=i+'\n    <div class="count"><span>'+n.escape(null==(t=1)?"":t)+"</span>"+n.escape(null==(t="/"+s.length)?"":t)+"\n    </div>"),i+="\n  </div>\n</aside>"}}.call(this,"JSON"in s?s.JSON:"undefined"!==typeof JSON?JSON:void 0,"components"in s?s.components:"undefined"!==typeof components?components:void 0,"componentsData"in s?s.componentsData:"undefined"!==typeof componentsData?componentsData:void 0),i}},function(e,t,i){"use strict";var n=i(7);e.exports=n.ItemView.extend({template:null,initialize:function(e){this.collection=e.collection||null}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(23),s=i(91),o={external_video:i(92),gallery:i(53),gif_gallery:i(93),quote:i(94),snippet:i(95),social:i(91),text:i(96),video:i(97)};e.exports=n.extend({template:s,compileContent:function(e){var t=this.model.get("service");return"undefined"===typeof o[t]&&this.model.collection.module.error('Unable to get template for social comment content with service "'.concat(t,'".')),o[type](e)},serializeData:function(){var e=this.model.toJSON();return e.content=this.compileContent(e),e}})},function(e,t,i){i(2);e.exports=function(e){var t,i="",n=e||{};return function(e){i=i+'\n<div class="b-box">'+(null==(t=e)?"":t)+"</div>"}.call(this,"content"in n?n.content:"undefined"!==typeof content?content:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o){i=(i=i+'\n<div class="b-box b-video-box">\n  <div class="b-video-box__player">'+(null==(t=e)?"":t)+"</div>")+'\n  <div class="b-video-box__info">\n    <div class="b-video-box__caption">'+n.escape(null==(t=o)?"":t)+"</div>","undefined"!==typeof s&&(i=i+'\n    <div class="b-video-box__credits">'+n.escape(null==(t=s)?"":t)+"</div>"),i+="\n  </div>\n</div>"}.call(this,"content"in s?s.content:"undefined"!==typeof content?content:void 0,"credits"in s?s.credits:"undefined"!==typeof credits?credits:void 0,"description"in s?s.description:"undefined"!==typeof description?description:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o){if(i+="\n\x3c!-- fetch first component and alt--\x3e",s&&s.length&&s[0]&&s[0].gif){i+="\n\x3c!-- get first picture object--\x3e";var a,r=s[0];switch(i+="\n\x3c!-- get first picture alt--\x3e",!0){case!!r.caption:a=r.caption;break;case!!r.alt:a=r.alt}i=i+"\n\x3c!-- draw first picture--\x3e\n<aside"+(n.attr("class",n.classes(["b-box","b-inline-gallery-box","b-inline-gallery-box_gif","js-inline-gallery","b-inline-gallery-box_no-zoom",1===s.length?"b-inline-gallery-box_single":""],[!1,!1,!1,!1,!1,!0]),!1,!0)+n.attr("data-box",e.stringify(o),!0,!0))+'>\n  <div class="wrap">',s.length>1&&(i+='\n    <div class="b-control-arrow b-control-arrow_md b-control-arrow_left control control_prev">\n      <svg class="b-control-arrow__icon control-icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-arrow-default_up"></use>\n      </svg>\n    </div>\n    <div class="b-control-arrow b-control-arrow_md b-control-arrow_right control control_next">\n      <svg class="b-control-arrow__icon control-icon">\n        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-arrow-default_up"></use>\n      </svg>\n    </div>'),i=i+'\n    <div class="picture zoom"'+n.attr("data-url",r.gif.full_url,!0,!0)+n.attr("data-alt",a,!0,!0)+"><img"+(n.attr("src",r.gif.full_url,!0,!0)+n.attr("alt",a,!0,!0)+n.attr("title",a,!0,!0))+'></div>\n  </div>\n  <div class="info">\n    <div class="b-label">\n      <div class="b-label__caption">'+(null==(t=r.caption)?"":t)+'</div>\n      <div class="b-label__credits">'+(null==(t=r.credits)?"":t)+'</div>\n      <div class="b-label__text">'+(null==(t=r.alt)?"":t)+"</div>\n    </div>",s.length>1&&(i=i+'\n    <div class="count"><span>'+n.escape(null==(t=1)?"":t)+"</span>"+n.escape(null==(t="/"+s.length)?"":t)+"\n    </div>"),i+="\n  </div>\n</aside>"}}.call(this,"JSON"in s?s.JSON:"undefined"!==typeof JSON?JSON:void 0,"components"in s?s.components:"undefined"!==typeof components?components:void 0,"componentsData"in s?s.componentsData:"undefined"!==typeof componentsData?componentsData:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a){var r;switch(a){case"facebook":r="fb";break;case"livejournal":r="lj";break;case"twitter":r="tw";break;case"vkontakte":r="vk";break;default:r=null}o&&e&&(i=i+'\n<aside class="b-box b-quote-box">\n  <div class="b-quote-box__text">'+(null==(t=o)?"":t)+'</div>\n  <div class="b-quote-box__author">',s?(i=i+"<a"+n.attr("href",s,!0,!0)+">",r&&(i+='<i class="b-quote-box__social-icon">\n        <div class="b-socials__item _#{mod}">\n          <svg class="b-socials__icon _#{mod}">\n            <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-social-#{mod}"></use>\n          </svg>\n        </div></i>'),i=i+n.escape(null==(t=e)?"":t)+"</a>"):(r&&(i+='<i class="b-quote-box__social-icon">\n      <div class="b-socials__item _#{mod}">\n        <svg class="b-socials__icon _#{mod}">\n          <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-social-#{mod}"></use>\n        </svg>\n      </div></i>'),i+=n.escape(null==(t=e)?"":t)),i+="\n  </div>\n</aside>")}.call(this,"author"in s?s.author:"undefined"!==typeof author?author:void 0,"link"in s?s.link:"undefined"!==typeof link?link:void 0,"markdown_body"in s?s.markdown_body:"undefined"!==typeof markdown_body?markdown_body:void 0,"social_net"in s?s.social_net:"undefined"!==typeof social_net?social_net:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s){"undefined"!==typeof s&&s.length&&(i+="\n\x3c!-- render component--\x3e",e=s[0],i=i+(null==(t=e.html)?"":t)+"\n\x3c!-- render snippet styles--\x3e","undefined"!==typeof e.css&&(i=i+"\n<style>"+n.escape(null==(t=e.css)?"":t)+"</style>"),i+="\n\x3c!-- render snippet scripts--\x3e","undefined"!==typeof e.js&&(i=i+'\n<script type="text/javascript">'+n.escape(null==(t=e.js)?"":t)+"<\/script>"))}.call(this,"component"in s?s.component:"undefined"!==typeof component?component:void 0,"components"in s?s.components:"undefined"!==typeof components?components:void 0),i}},function(e,t,i){i(2);e.exports=function(e){var t,i="",n=e||{};return function(e){e&&(i=i+'\n<aside class="b-box b-text-box">\n  <div class="b-text-box__wrap">'+(null==(t=e)?"":t)+"</div>\n</aside>")}.call(this,"markdown_body"in n?n.markdown_body:"undefined"!==typeof markdown_body?markdown_body:void 0),i}},function(e,t,i){i(2);e.exports=function(e){var t,i="",n=e||{};return function(e){e&&(i=i+'\n<div class="b-box b-video-box">\n  <div class="b-video-box__player">'+(null==(t=e)?"":t)+"</div>\n</div>")}.call(this,"raw_html"in n?n.raw_html:"undefined"!==typeof raw_html?raw_html:void 0),i}},function(e,t,i){"use strict";var n=i(23),s=i(53),o=i(39),a=i(38);e.exports=n.extend({template:s,onRender:function(){this.$el.find(".js-zoom[data-url]").each((function(e,t){return o({$el:$(t)})})),this.$el.find(".js-inline-gallery").each((function(e,t){return a({el:$(t)})})),this.$el.find(".js-gallery").each((function(e,t){return new Gallery(t)}))},serializeData:function(){var e=this,t=this.model.toJSON();return t.componentsData=[],_.each(t.components,(function(i){_.each(i.versions,(function(t){t.full_url||(t.full_url=e.model.comment.collection.module.getCloudUrl(t.rel_url))})),t.componentsData.push({original_url:i.versions.original.full_url,preview_url:i.versions.pic.full_url,preview_width:i.versions.pic.width,preview_height:i.versions.pic.height,original_width:i.versions.original.width,original_height:i.versions.original.height,alt:i.alt,caption:i.caption,credits:i.credits})})),t}})},function(e,t,i){"use strict";var n=i(0),s=i(24),o=i(3),a=i(4).parseQueryString;e.exports=n.View.extend({el:"#js-auth__signin",initialize:function(e){var t=this;this.page=e.page||"dashboard",o.user.check().then((function(){return t.goToDashboard()})),this.form=new s({type:"signin",el:this.$el.find("#js-auth__signin-form")}),this.form.email.cancelValidationRule("notrambler"),this.listenTo(this.form,"submit",this.onSubmit),this.form.checkPreloadMail()&&(this.form.model.set(this.form.getPreloadData()),this.form.password.$el.focus()),this.queryString=a()},onSubmit:function(e){var t=this;if(this.form.validate()){var i=this.queryString&&this.queryString.uri;o.theid.run("user","signin",e).then((function(e){t.form.trigger("submit:success"),o.user.profile.set(e),o.user.profile.saveToStorage(),i?o.user.sync().then((function(){return o.theid.run("favourites","exists",o.user.getRsidx(),i)})).then((function(e){return!e&&o.theid.run("favourites","create",o.user.getRsidx(),i)})).then((function(){return t.goToDashboard()})).catch((function(){return t.goToDashboard()})):t.goToDashboard()})).catch((function(e){t.form.trigger("submit:error",e)}))}else this.form.listen()},goToDashboard:function(){document.location.pathname="/my/".concat(this.page,"/")}})},function(e,t,i){"use strict";var n=i(0),s=i(24),o=i(3);e.exports=n.View.extend({el:"#js-auth__signup",initialize:function(){o.user.check().then((function(){window.location="/my/dashboard/"})),this.form=new s({type:"signup",el:this.$el.find("#js-auth__signup-form")}),this.listenTo(this.form,"submit",this.onSubmit),this.form.checkPreloadMail()&&(this.form.model.set(this.form.getPreloadData()),this.form.password.$el.focus())},onSubmit:function(e){var t=this;if(!this.form.validate())return this.form.email.resultValidate&&this.form.email.resultValidate.errors.notrambler?this.form.showMessageForInputPass():this.form.hideMessageForInputPass(),void this.form.listen();e.first_name=e.first_name||" ",e.last_name=e.last_name||" ",o.theid.run("user","signup",e).then((function(){t.form.trigger("submit:success"),document.location.pathname="/auth/check_email"})).catch((function(e){t.form.trigger("submit:error",e)}))}})},function(e,t,i){"use strict";var n=i(9),s=i(0),o=i(12),a=i(3);e.exports=s.View.extend({el:document.getElementById("js-auth__reset"),request_key:null,request_value:null,request_url:function(){return"/id/passwords/".concat(this.request_key,"/").concat(this.request_value)},complete_url:"/auth/password_saved",events:{submit:"onSubmit"},initialize:function(e){this.request_key=e.request_key,this.request_value=e.request_value,this.model=new s.Model,this.password=new o.Input({el:this.$el.find('input[name="password"]'),name:"password",model:this.model,preferView:!0,livelabel:!0,validate:!0}),this.passwordConfirmation=new o.Input({el:this.$el.find('input[name="password_confirmation"]'),name:"password_confirmation",model:this.model,preferView:!0,livelabel:!0,validate:!0}),new o.Button({el:this.$el.find('[type="submit"]'),events:{click:n.bind(this.onSubmit,this)}})},onSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation(),a.theid.run("password","reset",this.request_key,this.request_value,this.model.toJSON()).then((function(){document.location.pathname="/auth/password_saved"})).catch((function(e){e.responseJSON&&t.model.trigger("validation:message",e.responseJSON.errors)}))}})},function(e,t,i){"use strict";var n=i(0),s=i(1),o=i(333),a=i(335),r=i(3),l=i(4).getDevice(),c=l.isIos,u=l.isChrome,h=l.isSafari,d=l.isFirefox,m={granted:i(338),denied:i(339),default:i(340)},p=i(341),f=i(342);(u||h||d)&&!c&&s(".js-notifications-link").css("display","inline-block"),e.exports=n.View.extend({el:"#js-notifications",initialize:function(e){this.model=new p({type:e.type}),"desktop"===this.model.get("type")&&(f=f.sort((function(e,t){return e.order>t.order?1:-1}))),this.pushwoosh=r.pushwoosh,this.listenTo(this.model,"change",this.render),this.start=!this.model.get("isGranted"),this.render()},render:function(){var e=this.model.toJSON();this.$el.html(m[e.permission](e)),this.onRender()},onRender:function(){this.$containers={LentaBreakingNews:this.$el.find(".js-container-lenta-breaking-news"),LentaSectionsImportant:this.$el.find(".js-container-lenta-sections-important")};var e=this.model.toJSON(),t=e.isDefault,i=e.isGranted,n=e.isDenied;t&&this.onDefault(),i&&this.onGranted(),n&&this.onDenied()},onDenied:function(){var e=this;return this.pushwoosh.checkPermission().then((function(t){"denied"===t?e.onDenied():e.model.set({permission:t})}))},onDefault:function(){this.$el.find(".js-enable").on("click",this.subscribe.bind(this))},onGranted:function(){var e=this;this.pushwoosh.init(this.start).then((function(e){var t=e.result,i=t.LentaBreakingNews||[],n=t.LentaSectionsImportant||[];return i.concat(n)})).then(this.setSubscribe.bind(this)).then((function(t){new o(t).forEach((function(t){var i=new a({model:t,type:e.model.get("type")});e.$containers[t.get("tag")].append(i.$el)}))}))},subscribe:function(){var e=this;this.pushwoosh.checkPermission().then((function(t){return e.model.set({permission:t})}))},setSubscribe:function(e){return f.map((function(t){return-1!==e.indexOf(t.value)&&(t.active=!0),t}))}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(3),s=i(4).getDevice(),o=s.isChrome,a=s.isSafari,r=s.isFirefox,l=s.isIos,c="test_front"===n.settings.env,u=i(4).getCookie;i(157);i.p;var h={filename:i.p+"sprites/desktop.append.sprite.c28ede1e02ac6b59c52f87217215cfb5.svg"};i(77)(h);var d=!(o||a||r)||l||"hide"===u("custom-push-notifications");n.configure({events:{onInfographicMessageReceive:{stage:"ready",eventList:"message",eventTarget:window,handler:i(158)},onLonggridScroll:{stage:"ready",eventList:"scroll",eventTarget:document,data:{nodeSelector:".item",filterSelector:".item__rubric_logo-vtb24"},condition:function(){return"main"===window.Lenta.kind},handler:i(159)},onVideoScrollOut:{stage:"ready",eventList:"scroll",eventTarget:document,condition:function(){return document.querySelector(".js-video-box__player")},handler:i(160)},onCalendarClick:{stage:"ready",eventList:"click",eventTarget:".js-calendar",handler:i(161)},onMoreClick:{stage:"ready",eventList:"click",eventTarget:".js-more <= body",handler:i(170)},onListToggleClick:{stage:"ready",eventList:"click",eventTarget:".toggle .button",handler:i(171)},onNoHover:{stage:"ready",eventList:"scroll",eventTarget:"document",condition:function(){return document.body.classList},handler:i(172)},onVersionClick:{stage:"ready",eventList:"click",eventTarget:"#footer .b-footer__mobile a",condition:function(){return-1!==document.cookie.indexOf("is_mobile=1")},handler:i(173)},onAuthProviderClick:{stage:"ready",eventList:"click",eventTarget:".js-oauth-provider <= body",handler:i(174)},onPageLoadFadeDance:{stage:"load",handler:i(175)},onLoadSMI2:{custom:!0,eventTarget:"modules => advert",eventList:"advert:script_load",data:{siteId:40361,count:"site"},handler:i(176)},onBettingTabsClick:{stage:"ready",eventList:"click",eventTarget:".js-betting-tabs-head",handler:i(177)}},components:{user:{stage:"ready",constructor:i(78),enabled:!0,alias:!0},subscriptionMeme:{stage:"ready",constructor:i(180),enabled:!0},theid:{stage:"ready",constructor:i(79),enabled:!0,alias:!0},notification:{stage:"ready",constructor:i(199),enabled:!0,alias:!0},timedate:{stage:"ready",constructor:i(202),enabled:!0},mainmenu:{stage:"ready",constructor:i(203),enabled:!0},goodnews:{stage:"ready",constructor:i(204),enabled:!0},bettingSlider:{stage:"ready",constructor:i(205)},bettingRefresh:{stage:"ready",constructor:i(206)},currency:{stage:"ready",constructor:i(207)},headline:{stage:"ready",constructor:i(211)},gallery:{stage:"ready",constructor:i(212)},inlinegallery:{stage:"ready",constructor:i(38)},stickycolumn:{enabled:!c,stage:"ready",constructor:i(214)},checkInfographicPage:{stage:"ready",constructor:i(215)},tagsmenu:{stage:"ready",constructor:i(216)},themeinfo:{stage:"ready",constructor:i(217),enabled:!0},ramblerid:{constructor:i(219),enabled:!0},authorsfilter:{constructor:i(220)},relatedcarousel:{constructor:i(221)},specprojects:{constructor:i(222)},topiczoom:{constructor:i(39)},subscriptions:{constructor:i(223)},renderError:{constructor:i(225)},counters:{constructor:i(226)},linkhover:{constructor:i(228),enabled:!0},scrolltop:{constructor:i(229),enabled:!0},pushwoosh:{constructor:i(230),enabled:!0,alias:!0,stage:"ready"},erratum:{constructor:i(232)},editortools:{constructor:i(235)},tooltip:{constructor:i(236),enabled:!0,alias:!0},ramblerCommentsWidget:{constructor:i(241)},ramblerCommentsCounter:{constructor:i(242)},customPushNotifications:{constructor:i(243),version:"desktop",enabled:!d&&void 0},briefMenu:{constructor:i(256)},sharing:{stage:"ready",constructor:i(80)},eagleplayer:{stage:"ready",selector:".js-eagleplatform-video",eagleOrigin:window._settings.components.eagleplayer.origin,constructor:i(257)},tvVideo:{stage:"ready",constructor:i(258)},vtbClickTracking:{stage:"ready",constructor:i(259)},sportCoefs:{stage:"ready",constructor:i(260)},announce:{stage:"ready",constructor:i(261)}},modules:{fade:{stage:"ready",constructor:i(262),enabled:!0},search:{stage:"ready",constructor:i(264)},timeline:{stage:"ready",constructor:i(279)},user:{constructor:i(329),enabled:!0},regwall:{constructor:i(354),enabled:!0,type:"desktop"},dashboard:{constructor:i(360)},advert:{stage:"ready",constructor:i(103),enabled:!c&&n.settings.advertisable,type:"desktop",megaboard:{enabled:!0,shown:!1,advParams:{puid40:1}}}}}),n.bootStage("ready"),window.addEventListener("load",n.bootStage.bind(n,"load"))},,,,function(e,t,i){},function(e,t,i){"use strict";e.exports=function(e){if("string"===typeof e.originalEvent.data&&0===e.originalEvent.data.indexOf("inf-")){var t=document.getElementsByTagName("iframe"),i=_.find(t,(function(t){return(t.contentWindow||t.contentDocument)===e.originalEvent.source}));if(i){var n=e.originalEvent.data.split(":"),s=n[0],o=n[1];switch(s){case"inf-resize":i.style.height="".concat(o,"px");break;case"inf-fullscreen":"true"===o?i.className+=" ig-fullscreen":i.className=i.className.replace("ig-fullscreen","").trim()}}}}},function(e,t,i){"use strict";var n,s=i(4).isScrolledIntoView;e.exports=function(e){(n=n||Array.prototype.slice.call(document.querySelectorAll(e.data.nodeSelector)).filter((function(t){return t.querySelector(e.data.filterSelector)}))).forEach((function(e,t){s(e)&&(window.yaCounter27714477&&window.yaCounter27714477.reachGoal("vtbview"),n.splice(t,1))}))}},function(e,t,i){"use strict";var n=i(3),s=i(4).resizeFix,o={videoSelector:"js-eagleplatform-video",playerBox:"js-video-box__player",stickyContainer:"js-video-box__container",closeBtn:"js-video-box__close",boxWidth:400,stickOffset:-100},a=Array.prototype.slice.call(document.getElementsByClassName(o.videoSelector),""),r=[];function l(){var e=a.shift();c(),e.parentNode.replaceChild(e.cloneNode(!1),e)}function c(){var e=u(r.pop(),o.stickyContainer),t=u(e,o.playerBox);t.classList.remove("_is-sticked"),t.style.height="",e.style.width="",e.style.height="",s()}function u(e,t){if("function"===typeof e.closest)return e.closest(".".concat(t));for(var i=e;i;){if(i.classList.contains(t))return i;i=i.parentElement}return null}n.settings.components.eagleplayer&&n.settings.components.eagleplayer.enabled&&Object.assign(o,{multiplayerTemplates:n.settings.components.eagleplayer.templates.multiplayer,relatedVideosHeight:n.settings.components.eagleplayer.relatedVideosHeight}),e.exports=function(){var e=a[0];if(e){var t=u(e,o.playerBox),i=t.getBoundingClientRect();if(0===r.length){if(i.top<o.stickOffset){var n=t.getElementsByClassName(o.closeBtn)[0];!function(e){var t=u(e,o.playerBox),i=u(e,o.stickyContainer),n=o.multiplayerTemplates.indexOf(parseInt(e.dataset.template,10))<0?e.height:e.height-o.relatedVideosHeight,a=e.width/n;i.style.width="".concat(o.boxWidth,"px"),i.style.height="".concat(o.boxWidth/a,"px"),t.style.height="".concat(e.height,"px"),t.classList.add("_is-sticked"),s()}(e),r.push(e),n.addEventListener("click",l)}}else i.top>o.stickOffset&&c()}}},function(e,t,i){"use strict";var n=i(0),s=i(12),o=function(){var e=this;return this.model=new n.Model,this.view=new s.Date.Calendar({model:this.model,name:"archive_date",maxDate:new Date,minDate:new Date("January 01, 2006"),format:"YYYY/MM/DD/",showCloseBtn:!0}),this.view.render(),this.model.on("change:archive_date",(function(t){var i;i=t.get("archive_date"),document.location.pathname="/".concat(i),e.view.close()}),this),this};o.prototype.show=function(){var e=this,t=$('<svg class="b-form__date-close"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-close"></use></svg>').on("click",(function(){e.view.close()})),i=this.view.show().$el;i.append(t),$(".js-calendar__container").html(i)};var a=!1;e.exports=function(e){a?a.show():a=(new o).show(),e.preventDefault()}},function(e,t,i){"use strict";var n=i(0);e.exports=n.View.extend({tagName:"button",className:"b-button",initialize:function(e){e.text&&this.setContent(e.text)},setContent:function(e){this.$el.html(e)},getContent:function(){return this.$el.html()},render:function(){return this.delegateEvents(),this},disable:function(){return this.$el.attr("disabled",!0).css("pointer-events","none"),this},enable:function(){return this.$el.removeAttr("disabled").css("pointer-events","auto"),this},enabled:function(){return this.el.disabled},wait:function(){this.disable(),this._content=this.getContent(),this.setContent('<span class="e-spinner '.concat(this.className,'__spinner"></span>'))},listen:function(){this.setContent(this._content),delete this._content,this.enable()}})},function(e,t,i){"use strict";var n=i(1),s=i(21);e.exports=s.extend({properties:["text","align"],changeEvents:["change"],align:"left",className:"checkbox",attributes:{type:"checkbox"},initialize:function(){this.render(),s.prototype.initialize.apply(this,arguments)},render:function(){return this.$input||(this.$input=this.$el,this.input=this.el,this.$el=this.$input.closest("label"),this.$el.length||(this.$el=n("<label>".concat(this.text||"","</label>")),this.$input.after(this.$el),"left"===this.align?this.$el.prepend(this.$input):this.$el.append(this.$input)),this.el=this.$el[0],this.$input.removeClass(this.className),this.$el.addClass(this.className)),this},setValue:function(e){this.$input[0].checked=!!e},getValue:function(){return this.$input[0].checked}})},function(e,t,i){"use strict";var n=i(1),s=i(21);e.exports=s.extend({properties:["options","placeholder"],changeEvents:["change"],tagName:"select",initialize:function(){this.refreshEmptyAttribute()},render:function(){var e=this;if(this.options){if(this.$el.empty(),this.placeholder){var t=n("<option>").val("").text(this.placeholder);this.$el.append(t)}Object.keys(this.options).forEach((function(t){var i=n("<option>").val(t).text(e.options[t]);e.$el.append(i)})),this.setValue(this.model.get(this.name)||"")}return this},setValue:function(e){s.prototype.setValue.call(this,e),this.refreshEmptyAttribute()},onElementChange:function(){s.prototype.onElementChange.apply(this,arguments),this.refreshEmptyAttribute()},refreshEmptyAttribute:function(){this.getValue()?this.$el.removeAttr("data-empty"):this.$el.attr("data-empty",!0)}})},function(e,t,i){"use strict";var n=i(1),s=i(0),o=i(21),a=i(166),r={format:"DD.MM.YYYY",firstDay:1,i18n:{months:["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041e\u043a\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"],weekdays:["\u0412\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u041f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0412\u0442\u043e\u0440\u043d\u0438\u043a","\u0421\u0440\u0435\u0434\u0430","\u0427\u0435\u0442\u0432\u0435\u0440\u0433","\u041f\u044f\u0442\u043d\u0438\u0446\u0430","\u0421\u0443\u0431\u0431\u043e\u0442\u0430"],nextMonth:"\u041c\u0435\u0441\u044f\u0446 \u0432\u043f\u0435\u0440\u0435\u0434",previousMonth:"\u041c\u0435\u0441\u044f\u0446 \u043d\u0430\u0437\u0430\u0434",showDaysInNextAndPreviousMonths:!0,showCloseBtn:!1,position:"left",weekdaysShort:["\u0412\u0441","\u041f\u043d","\u0412\u0442","\u0421\u0440","\u0427\u0442","\u041f\u0442","\u0421\u0431"]}},l=o.extend({}),c=s.View.extend({className:"b-form__date-calendar-container",initialize:function(e){var t=this,i=n.extend(!0,r,e);this.name=i.name||"date",this.model=i.model||new s.Model,this.setDate=i.model.get(this.name),i.container=this.el;i.onSelect=function(e){!function(e,i,n){t.model.set(e,t.getMoment(i).format(n))}(t.name,e,r.format)};this.calendar=new a(i)},render:function(){return this},show:function(){return this.delegateClickOverEvent(),this.$el.html(this.calendar.el),this},close:function(){return this.undelegateClickOverEvent(),this.$el.empty(),this},getMoment:function(e){return this.calendar.getMoment(e)},delegateClickOverEvent:function(){var e=this;this._onBodyClickBinded||(this._onBodyClickBinded=this.onBodyClick.bind(this)),setTimeout((function(){n("body").on("click",e._onBodyClickBinded)}),0)},undelegateClickOverEvent:function(){n("body").off("click",this._onBodyClickBinded)},onBodyClick:function(e){n(e.target).closest(".".concat(this.className)).length||this.close()}});e.exports=s.View.extend({className:"b-form__date",initialize:function(e){var t=this,i=this.className,o={name:e.name||"field_name",model:e.model||new s.Model};this.containers={};var a,r=function(e){t.containers["$".concat(e)]=n("<div>",{class:"".concat(i,"-").concat(e)}),t.$el.append(t.containers["$".concat(e)])};return a=function(){t.containers&&t.containers.$input&&(t.containers.$input.append(new l(n.extend(o,e.input)).render().$el),e.calendar.field=t.containers.$input.find("input")[0]),t.containers&&t.containers.$calendar&&t.containers.$calendar.append(new c(n.extend(o,e.calendar)).render().$el)},e&&e.input&&r("input"),r("calendar"),a(),this}}),e.exports.Calendar=c,i(167)},,function(e,t,i){},function(e,t,i){"use strict";var n=i(1),s=i(16),o=i(21);e.exports=o.extend({properties:["format","hiddenFormat"],format:"DD.MM.YYYY",hiddenFormat:"YYYY-MM-DD",hiddenStyle:{opacity:0,position:"absolute",left:0,top:0,border:0,outline:0,padding:0,margin:0,width:"100%",height:"100%","font-size":"16px"},initialize:function(){o.prototype.initialize.apply(this,arguments);var e,t=this.model.get(this.name);if(t){var i=s(t,this.format,!0);i.isValid()?(e=t,this.hiddenValue=i.format(this.hiddenFormat)):(i=s(t,this.hiddenFormat,!0)).isValid()&&(e=i.format(this.format),this.hiddenValue=t)}this.setValue(e),this.createHiddenField(),this.$hidden.on("change",this.onHiddenElementChange.bind(this))},createHiddenField:function(){var e={type:"date"};return this.range&&(e.min=s(this.range[0]).format(this.hiddenFormat),e.max=s(this.range[1]).format(this.hiddenFormat)),this.hiddenStyle.width=this.$el.css("width"),this.$hidden=n("<input/>",e).css(this.hiddenStyle).val(this.hiddenValue),this.$el.after(this.$hidden),this},onHiddenElementChange:function(){var e=this.$hidden.val()||s().format(this.hiddenFormat),t=s(e,this.hiddenFormat).format(this.format);this.model.set(this.name,t)},onModelAttributeChange:function(e,t){!this.$hidden&&this.createHiddenField(),o.prototype.onModelAttributeChange.apply(this,arguments);var i=s(t,this.format).format(this.hiddenFormat);i!==this.$hidden.val()&&this.$hidden.val(i)}})},function(e,t,i){"use strict";var n=i(0),s=i(21),o=i(3),a=n.View.extend({className:"b-input__container_captcha__image",events:{click:"onClick"},template:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return'<img src="'.concat(e?e.image:"",'" class="').concat(this.className,'"/>')},initialize:function(){this.$el&&"IMG"===this.$el.tagName||this.setElement(this.template())},render:function(e){return this.setElement(this.template(e)),this},onClick:function(){this.model.trigger("captcha:refresh")}});e.exports=n.View.extend({tagName:"div",model:null,image:null,input:null,initialize:function(e){this.model=e.input.model=e.image.model=e.model||new n.Model,this.image=new a(e.image),this.input=new s(e.input),this.listenTo(this.model,"captcha:refresh",this.refresh.bind(this))},render:function(){var e=this.model.toJSON();return this.image.$el.remove(),this.$el.append(this.image.render(e).$el),this.$el.append(this.input.$el),this.input.resetError(),this.input.rules={constraint:e.alphabet,required:!0},this},show:function(){return this.$el.show(),this},hide:function(){this.$el.hide(),this.reset()},isValid:function(){return this.input.isValid()},reset:function(){this.input.rules=null,this.model.clear()},setError:function(e){e&&this.input.setError(e)},refresh:function(){var e=this;return o.theid.run("service","captcha").then((function(t){var i=t.captcha;e.model.set({id:i.order_id,image:"data:image/png;base64,".concat(i.base64),alphabet:i.alphabet}),e.render().show()}))}})},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=window.Lenta.kind&&window.Lenta.kind.replace("m/",""),o=!1,a={paginationShift:0,urlTemplate:"?more={page}"},r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=a,Object.assign(this.settings,t.data),this.page=0,this.$container=$("#more"),this.infiniteScroll=-1!==["parts","tags_library","content_tags"].indexOf(s)}var t,i,o;return t=e,(i=[{key:"add",value:function(e){var t=this;this.page=this.infiniteScroll?this.page+1:1;var i=this.buildRequestUrl();-1!==["parts","tags_library","tags","content_tags"].indexOf(s)&&$.get(i,(function(i){if(t.settings.advParams){var n=(new DOMParser).parseFromString(i,"text/html").body.childNodes;t.addWithBanners(n,t.settings.advParams,t.settings.elementsPerPage),n.length<t.settings.elementsPerPage&&$(e.currentTarget).parent().remove()}else t.$container.append(i),$(e.currentTarget).parent().remove()}))}},{key:"buildRequestUrl",value:function(){if("timestamp"===this.settings.paginationMethod)return this.$container.children().last().data().moreUrl;var e=this.page+this.settings.paginationShift,t=this.settings.urlTemplate.replace(/\{page\}/,e);return"".concat(document.location.pathname).concat(t)}},{key:"addWithBanners",value:function(e,t,i){var n=this,s=this.page*i;Array.prototype.forEach.call(e,(function(e,i){t.pers&&Object.keys(t.pers).forEach((function(e){if((s+i)%e===0){t.pers[e].index||(t.pers[e].index=1);var o,a="".concat(t.pers[e].type).concat(t.pers[e].index),r=!!(t.pers[e].max&&t.pers[e].index>t.pers[e].max)&&"".concat(t.pers[e].type).concat(t.pers[e].max);n.$container.append('<div id="'.concat(a,'"></div>')),(o=t.pers[e].sameCall?window._settings.modules.advert.banners[t.pers[e].method][t.pers[e].type]:r?window._settings.modules.advert.banners[t.pers[e].method][r]:window._settings.modules.advert.banners[t.pers[e].method][a])[0]=a,window.Adf&&window.Adf.banner[t.pers[e].method].apply(window.Adf.banner,o),t.pers[e].index++}})),t.poss&&Object.keys(t.poss).forEach((function(e){if(s+i===parseInt(e,10)){n.$container.append('<div id="'.concat(t.poss[e].type,'"></div>'));var o=window._settings.modules.advert.banners[t.poss[e].method][t.poss[e].type];window.Adf&&window.Adf.banner[t.poss[e].method].apply(window.Adf.banner,o)}})),n.$container.append(e.cloneNode(!0))}))}}])&&n(t.prototype,i),o&&n(t,o),e}();e.exports=function(e){o||(o=new r(e)),o.add(e),e.preventDefault()}},function(e,t,i){"use strict";var n=i(1);e.exports=function(e){n(e.currentTarget).closest(".toggle").toggleClass("toggle_mode_show").find(".button__icon").toggleClass("button__icon_theme_down button__icon_theme_up"),e.preventDefault()}},function(e,t,i){"use strict";var n=null;e.exports=function(){null!==n&&clearTimeout(n),document.body.classList.contains("no-hover")||document.body.classList.add("no-hover"),n=setTimeout((function(){document.body.classList.remove("no-hover")}),300)}},function(e,t,i){"use strict";var n=i(1);e.exports=function(e){e.preventDefault();var t=n(this),i="_blank"===t.attr("target")||e.ctrlKey||e.metaKey||2===e.which,s=t.attr("href");i?window.open(s,"_blank"):(n.cookie("view_version","m",{expires:14,domain:"lenta.ru",path:"/"}),document.location.href=s)}},function(e,t,i){"use strict";var n=i(3),s=i(4),o=s.parseQueryString,a={defaults:{width:750,height:450},livejournal:{width:750,height:650}};function r(){document.location.href="/my/dashboard/"}e.exports=function(){var e=o(),t=this.getAttribute("data-provider"),i=window.location.host.search(/^lenta.ru$/i),l=window.location.host.search(/^m.lenta.ru$/i),c="https://id.rambler.ru/oauth-20/?action=login&provider=".concat(t,"&popup=true&iframeOrigin=").concat(window.location.origin);i>-1?c+="&type=self&rname=lenta":l>-1&&(c+="&type=mobile&rname=lenta"),s.openWindow({url:c,properties:a[t]||a.defaults,closeTrigger:!0,onAfterClose:function(){n.user.fetch().then((function(e){return n.theid.run("user","oauth",e)})).then((function(e){return n.user.profile.set(e)})).then((function(){return e&&e.uri?n.theid.run("favourites","exists",n.user.getRsidx(),e.uri).then((function(t){return!t&&n.theid.run("favourites","create",n.user.getRsidx(),e.uri)})):null})).then(r).catch(r)}})}},function(e,t,i){"use strict";var n=i(3),s=i(4).getCookie;e.exports=function(){if(window.location.hash.indexOf("action-fade")>-1||"/search"===window.location.pathname){var e=document.querySelector(".js-goodnews"),t=n.settings.is_mobile,i="1"===s("VARIANT")?"goodnewsEnabled":"goodnewsDisabled";t?n.modules.fade.animate(!0,(function(){var e=n.tooltip.renderWithData({type:i});document.body.appendChild(e.el),e.show()})):(n.modules.fade.animate(!0),"goodnewsEnabled"===i&&e.classList.add("_is-expanded"),setTimeout((function(){e.classList.remove("_is-expanded")}),5e3)),window.history.pushState("",document.title,window.location.pathname+window.location.search)}}},function(e,t,i){"use strict";var n=new(0,i(4).ScriptLoader);e.exports=function(e){window.ttsmi2_data={siteid:e.siteId,count:e.count},n.loadAsync("//target.smi2.net/client/target.js")}},function(e,t,i){"use strict";var n=".js-betting-tabs-head",s=".js-betting-tabs-content";e.exports=function(){if(!this.classList.contains("_is-active")&&!this.classList.contains("_is-disabled")){var e=this.getAttribute("label-for"),t=document.querySelector("".concat(n,"._is-active")),i=document.querySelector("".concat(s,"._is-active"));t&&t.classList.remove("_is-active"),i&&i.classList.remove("_is-active"),this.classList.add("_is-active"),document.getElementById(e).classList.add("_is-active")}}},,,function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(3),o=i(4).request,a=i(181),r=i(4).createCookie,l=i(4).getCookie;e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),window._settings.components.subscription.address&&(this.isMobile=s.settings.is_mobile||!1,this.isTopic="topics"===window._settings.kind||"m/topics"===window._settings.kind,this.showFormForMobileTopic=this.showFormForMobileTopic.bind(this),this.showFormOnMouseLeave=this.showFormOnMouseLeave.bind(this),this.showForm=this.showForm.bind(this),this.areWeShowingTheFormForDesktop()&&this.renderForm(),this.areWeShowingMobileFormOnList()&&this.renderForm()&&this.showForm(),this.areWeShowingMobileFormOnTopic()&&this.renderForm())}var t,i,c;return t=e,(i=[{key:"areWeShowingTheFormForDesktop",value:function(){return!this.isMobile&&this.areWeShowingTheForm()}},{key:"areWeShowingMobileFormOnTopic",value:function(){return this.isMobile&&this.isTopic&&this.areWeShowingTheForm()}},{key:"areWeShowingMobileFormOnList",value:function(){return this.isMobile&&!this.isTopic&&this.areWeShowingTheForm()}},{key:"areWeShowingTheForm",value:function(){return-1!==document.referrer.indexOf("lenta")&&!l("alreadySubscribedCookie")&&!l("dontDisturbCookie")}},{key:"showFormOnMouseLeave",value:function(e){e.clientY<100&&(document.removeEventListener("mouseout",this.showFormOnMouseLeave),this.showForm())}},{key:"showForm",value:function(){this.subscribePopup.classList.remove("_hidden"),document.querySelector("body").style.overflow="hidden"}},{key:"renderForm",value:function(){document.body.insertAdjacentHTML("beforeend",a()),this.subscribePopup=document.querySelector(".js-subscription"),this.messageSpan=this.subscribePopup.querySelector(".js-error"),this.sharings=this.subscribePopup.querySelector(".js-sharings"),this.email=this.subscribePopup.querySelector(".js-email"),this.closeCross=this.subscribePopup.querySelector(".js-close-window"),this.submit=this.subscribePopup.querySelector(".js-submit"),this.subscriptionForm=this.subscribePopup.querySelector(".js-subscription-form"),this.subscriptionFormSuccess=this.subscribePopup.querySelector(".js-subscription-form-success"),this.addListeners()}},{key:"showFormForMobileTopic",value:function(){this.checkVisible(document.querySelector(".js-sharings"))&&(window.removeEventListener("scroll",this.showFormForMobileTopic),this.showForm())}},{key:"addListeners",value:function(){var e=this;this.areWeShowingTheFormForDesktop()&&document.addEventListener("mouseout",this.showFormOnMouseLeave),this.areWeShowingMobileFormOnTopic()&&window.addEventListener("scroll",this.showFormForMobileTopic),this.closeCross.addEventListener("click",(function(){e.subscribePopup.classList.add("_hidden"),document.querySelector("body").style.overflow=null,r("dontDisturbCookie",1,30)})),this.submit.addEventListener("click",(function(){e.isEmail(e.email.value)?e.subscribe(e.email.value):e.printMessage("\u0412\u0432\u0435\u0434\u0435\u043d \u043d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 email")}))}},{key:"isEmail",value:function(e){return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)}},{key:"printMessage",value:function(e){this.messageSpan.innerHTML=e,this.email.classList.add("_red")}},{key:"removeMessage",value:function(){this.messageSpan.innerHTML="",this.email.classList.remove("_red")}},{key:"checkVisible",value:function(e){var t=e.getBoundingClientRect(),i=Math.max(document.documentElement.clientHeight,window.innerHeight);return!(t.bottom<0||t.top-i>=0)}},{key:"subscribe",value:function(e){var t=this,i={notify_client:!0,append_tags:!1,list_key:"daily_news",email:e,ip:null},n=[o({url:window._settings.components.subscription.address,method:"POST",body:new Blob([JSON.stringify(Object.assign(i,{list_key:"daily_news"}))])}),o({url:window._settings.components.subscription.address,method:"POST",body:new Blob([JSON.stringify(Object.assign(i,{list_key:"weekly_digest"}))])})];Promise.all(n).then((function(){t.removeMessage(),t.subscriptionForm.classList.add("_hidden"),t.subscriptionFormSuccess.classList.remove("_hidden"),r("alreadySubscribedCookie",1,1825)})).catch((function(){t.printMessage("\u0423\u043f\u0441, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f \u043f\u043e\u0437\u0436\u0435")}))}}])&&n(t.prototype,i),c&&n(t,c),e}()},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="subscribe-popup js-subscription _hidden">\n  <div class="subscribe-popup__container">\n    <div class="subscribe-popup__close-window js-close-window">\n      <svg class="subscribe-popup__close-cross">\n        <use xlink:href="#ui-cross"></use>\n      </svg>\n    </div>\n    <div class="subscribe-popup__success-title js-subscription-form-success _hidden">\u041f\u043e\u0434\u043f\u0438\u0441\u043a\u0430 \u043e\u0444\u043e\u0440\u043c\u043b\u0435\u043d\u0430, \u043f\u0440\u043e\u0432\u0435\u0440\u044c\u0442\u0435 \u043f\u043e\u0447\u0442\u0443!</div>\n    <div class="subscribe-popup__form js-subscription-form">\n      <div class="subscribe-popup__title">\u041f\u043e\u0434\u043f\u0438\u0448\u0438\u0442\u0435\u0441\u044c \u043d\u0430&nbsp;\u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0443 \u0441\u0442\u0430\u0442\u0435\u0439!</div>\n      <div class="subscribe-popup__subtitle-container">\n        <div class="subscribe-popup__text">\n          \u041d\u0438\u0447\u0435\u0433\u043e \u043b\u0438\u0448\u043d\u0435\u0433\u043e, \u0442\u043e\u043b\u044c\u043a\u043e&nbsp;\u0432\u0430\u0436\u043d\u043e\u0435 \u0438 \u0438\u043d\u0442\u0435\u0440\u0435\u0441\u043d\u043e\u0435\n          \u0437\u0430&nbsp;\u0441\u0443\u0442\u043a\u0438 \u0438 \u0437\u0430 \u043d\u0435\u0434\u0435\u043b\u044e. \u042d\u0442\u043e&nbsp;\u0443\u0434\u043e\u0431\u043d\u043e, \u043f\u043e\u0432\u0435\u0440\u044c\u0442\u0435.\n        </div>\n      </div>\n      <div class="subscribe-popup__email-container">\n        <div class="subscribe-popup__email">\n          <input class="subscribe-popup__email-input js-email" type="email" placeholder="E-mail"><br><span class="subscribe-popup__error-text js-error"></span>\n        </div>\n        <button class="subscribe-popup__submit js-submit">\u041f\u043e\u0434\u043f\u0438\u0441\u0430\u0442\u044c\u0441\u044f</button>\n      </div>\n      <div class="subscribe-popup__footer">\u041f\u0435\u0440\u0435\u0434\u0430\u0432\u0430\u044f \u0434\u0430\u043d\u043d\u044b\u0435, \u0432\u044b \u0441\u043e\u0433\u043b\u0430\u0448\u0430\u0435\u0442\u0435\u0441\u044c \u0441&nbsp;<a class="subscribe-popup__link" href="/lenta.pdf" target="blank">\u041f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438 \u041a\u043e\u043d\u0444\u0438\u0434\u0435\u043d\u0446\u0438\u0430\u043b\u044c\u043d\u043e\u0441\u0442\u0438</a></div>\n    </div>\n  </div>\n</div>'}},function(e,t){},,,,,,,,,,,,,,,,,function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=i(200);i(201),e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,(i=[{key:"render",value:function(){this.$el=s(o({type:this.type,content:this.content})).appendTo("body")}},{key:"remove",value:function(){this.$el&&this.$el.remove()}},{key:"show",value:function(){this.visible=!0,this.$el.attr("data-visible","true")}},{key:"hide",value:function(){this.$el.attr("data-visible",null),this.visible=!1}},{key:"set",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;this._hide=this._hide||this.hide.bind(this),this._show=this._show||this.show.bind(this),this.visible||(this.type===e&&this.content===t||(this.type=e,this.content=t,this.remove(),this.render()),setTimeout(this._show,100)),this._timeout&&clearTimeout(this._timeout),this._timeout=setTimeout(this._hide,i)}}])&&n(t.prototype,i),a&&n(t,a),e}()},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s){i=i+"\n<div"+n.attr("class",n.classes(["b-notification",s?"b-notification_"+s:""],[!1,!0]),!1,!0)+">"+(null==(t=e)?"":t)+"</div>"}.call(this,"content"in s?s.content:"undefined"!==typeof content?content:void 0,"type"in s?s.type:"undefined"!==typeof type?type:void 0),i}},function(e,t,i){},function(e,t,i){"use strict";var n=i(1),s={selector:"#date-time"},o="\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" "),a=function(e){var t=e.toString();return 1===t.length&&(t="0"+t),t};e.exports=function(e){var t=Object.assign(s,e),i=new Date,r=[i.getDate(),o[i.getMonth()]+",",a(i.getHours())+":"+a(i.getMinutes())].join(" ");n(t.selector).text(r)}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setActiveItem(),this.setToggleHandler()}var t,i,o;return t=e,(i=[{key:"setActiveItem",value:function(){if(Lenta){var e=null;"/"===document.location.pathname?e="/":Lenta.bloc_slug?e=["rubrics",Lenta.bloc_slug]:Lenta.part_slug&&(e=["parts",Lenta.part_slug]),null!==e&&(e.length>1&&(e="/"+e.join("/")+"/"),s("#sidebar-menu").find("a[href='"+e+"']").parent().addClass("active"))}}},{key:"setToggleHandler",value:function(){var e=s("body"),t=s(".js-sidebar__toggle");t.on("click",(function(){e.toggleClass(t.data("class-toggled-body"))}))}}])&&n(t.prototype,i),o&&n(t,o),e}();e.exports=function(){return new o}},function(e,t,i){"use strict";var n=i(4).createCookie,s=i(4).getCookie,o=i(3);e.exports=function(){var e=document.querySelector(".js-goodnews"),t=document.querySelector(".js-goodnews-tumbler"),i=function(){window.location.hash=o.modules.fade.hash,window.location.reload()};e&&t&&(e.classList.remove("_is-hidden"),"1"===s("VARIANT")&&(e.classList.add("_turned-on"),t.checked=!0),t.addEventListener("change",(function(){e.style.pointerEvents="none",e.classList.remove("_is-expanded"),e.classList.toggle("_turned-on"),t.checked?n("VARIANT",1,1825):n("VARIANT",0,1825),window.yaCounter27714477&&window.yaCounter27714477.reachGoal(t.checked?"toggle_ON":"toggle_OFF"),o.modules.fade.animate(!1,i)})))}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s={board:".js-board",boardWrap:".js-board-wrap",game:".js-board-item",prevBtn:".js-board-prev",nextBtn:".js-board-next",visibleCardsCount:3};e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.board=document.querySelector(s.board),this.boardWrap=this.board.querySelector(s.boardWrap),this.games=Array.prototype.slice.call(this.board.querySelectorAll(s.game));var t=parseInt(window.getComputedStyle(this.boardWrap).marginLeft,10)+parseInt(window.getComputedStyle(this.boardWrap).marginRight,10);this.maxTranslate=this.board.getBoundingClientRect().width-this.boardWrap.getBoundingClientRect().width-t,this.gameCardWidth=this.boardWrap.getBoundingClientRect().width/this.games.length,this.scrollPosition=0,this.prevBtn=this.board.querySelector(s.prevBtn),this.nextBtn=this.board.querySelector(s.nextBtn),this.prev=this.prev.bind(this),this.next=this.next.bind(this),this.boardWrap.style.transform="translateX(0)",this.maxTranslate<0&&this.nextBtn.classList.remove("_is-hidden"),this.nextBtn.addEventListener("click",this.next),this.prevBtn.addEventListener("click",this.prev)}var t,i,o;return t=e,(i=[{key:"prev",value:function(){this.nextBtn.classList.remove("_is-hidden"),this.scrollPosition+=1,this.boardWrap.style.transform="translateX(".concat(this.gameCardWidth*this.scrollPosition,"px)"),this.scrollPosition>=0&&this.prevBtn.classList.add("_is-hidden")}},{key:"next",value:function(){this.prevBtn.classList.remove("_is-hidden"),this.scrollPosition-=1;var e=Math.max(this.gameCardWidth*this.scrollPosition,this.maxTranslate);this.boardWrap.style.transform="translateX(".concat(e,"px)"),s.visibleCardsCount-this.scrollPosition>=this.games.length&&this.nextBtn.classList.add("_is-hidden")}}])&&n(t.prototype,i),o&&n(t,o),e}()},function(e,t,i){"use strict";e.exports=function(){setTimeout((function(){document.location.reload(!0)}),6e4)}},function(e,t,i){"use strict";var n=i(1),s=i(208);e.exports=function(e){if("largeWidget"===e.type){var t=new s("large",".js-currency-widget");t.graph.init(),t.getData("partial",(function(e){t.data=e,t.parseLocation(),t.setCurrentRates(".js-currency-widget"),t.bindIntervalsFilter(".js-currency-filter-item"),t.bindCurrencyChange(".js-currency-switcher"),t.graph.drawData(t.filterData("week")),t.togglePreloader("off")}))}else if("smallWidget"===e.type){var i=new s("small",".js-currency-smallwidget");i.graph.init(),i.getData("partial",(function(e){i.data=e,i.bindCurrencyChange(".js-currency-main-select"),n(".js-currency-main").on("mouseleave",(function(){i.$el.removeClass("visible")})),i.graph.setXAxisTimeFormat("%b"),i.graph.drawData(i.filterData("3month")),i.togglePreloader("off")}))}}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=i(209),a=function(){function e(t,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$el=s(i),this.fullDataLoaded=!1,"small"===t?(this.graph=new o({selector:i+" .b-currency-rate-graph_small",dateFormat:"%Y-%m-%d",sizeX:296,sizeY:77,margins:{top:15,right:35,bottom:10,left:20},ticks:{bottom:3,left:2,orientY:"right",orientX:"bottom"},axes:{x:"bottom",y:"right",offsetX:-25,offsetY:0},grid:!0,tip:!1,duration:300}),this.getIsVisible=function(){return this.$el.hasClass("visible")},this.bindCurrencyChange=function(e){var t=this,i=s(".js-currency-smallwidget-link",this.$el),n=s(e);i.add(n).click((function(e){ga("send","event","currency_widget","opt_in",s(e).data("currency"))})),s(e).on("mouseenter",(function(e){var n=s(e.currentTarget).data("currency"),o=t.data.slice(-2),a=(o[1][n]-o[0][n]).toFixed(4);t.getIsVisible()||ga("send","event","currency_widget","uncover",{nonInteraction:!0}),t.$el.find(".js-currency-smallwidget-name").text("usd"===n?"\u041a\u0443\u0440\u0441 \u0414\u043e\u043b\u043b\u0430\u0440\u0430 \u0421\u0428\u0410":"\u041a\u0443\u0440\u0441 \u0415\u0432\u0440\u043e"),t.$el.find(".js-currency-smallwidget-rate").html(t.setComma(o[1][n])),t.$el.find(".js-currency-smallwidget-state").removeClass("rate-fall rate-rise").addClass(a>0?"rate-rise":"rate-fall"),t.$el.find(".js-currency-smallwidget-diff").html(t.setComma(a)+" ("+(a<0?"-":"+")+(100*Math.abs(a)/o[0][n]).toFixed(2)+"%)"),t.graph.setCurrency(n),t.currency=n,t.$el.removeClass("smallwidget_usd smallwidget_eur"),t.$el.addClass("visible smallwidget_"+n),i.attr("href","parts/currency/"+n),i.data("currency",n)}))}):"large"===t&&(this.graph=new o({selector:i+" .b-currency-rate-graph_large",dateFormat:"%Y-%m-%d",sizeX:620,sizeY:365,margins:{top:110,right:25,bottom:55,left:65},ticks:{bottom:4,left:5,orientY:"left",orientX:"bottom"},axes:{x:"bottom",y:"left",offsetX:0,offsetY:0},grid:!0,tip:!0,duration:500}),this.setCurrentRates=function(e){var t=this.data.slice(-2),i=(t[1].usd-t[0].usd).toFixed(4),n=(t[1].eur-t[0].eur).toFixed(4),o=s(e);o.find(".js-currency-today-rate-usd").html(this.setComma(t[1].usd)),o.find(".js-currency-today-rate-eur").html(this.setComma(t[1].eur)),i>0?o.find(".js-currency-today-usd").addClass("rate-rise"):o.find(".js-currency-today-usd").addClass("rate-fall"),n>0?o.find(".js-currency-today-eur").addClass("rate-rise"):o.find(".js-currency-today-eur").addClass("rate-fall"),o.find(".js-currency-today-diff-usd").html(this.setComma(i)),o.find(".js-currency-today-diff-eur").html(this.setComma(n))},this.bindIntervalsFilter=function(e){var t=this;this.$el.find(e).on("click",(function(e){var i=s(e.currentTarget);i.siblings().removeClass("active"),i.addClass("active"),t.graph.drawData(t.filterData(i.data("interval")))}))},this.bindCurrencyChange=function(e){var t=this;this.$el.find(e).on("click",(function(e){var i=s(e.currentTarget),n=i.data("currency");window.history.replaceState({},document.title,document.location.href.replace(/\w+$/,n)),i.siblings().removeClass("active"),i.addClass("active"),t.graph.setCurrency(n),t.currency=n}))})}var t,i,a;return t=e,(i=[{key:"setComma",value:function(e){return e.toString().replace(".",",")}},{key:"getData",value:function(e,t){s.getJSON("/parts/currency/"+e+".json",t)}},{key:"parseLocation",value:function(){var e="";e=window.location.pathname.match(/usd/)?"usd":"eur",this.graph.setCurrency(e),this.$el.find(".js-currency-switcher[data-currency="+e+"]").addClass("active"),this.currency=e}},{key:"filterData",value:function(e){var t,i=this,n=0,o=[],a=!1,r=!1;function l(e){return o=n>0?e.slice(-n):e,r&&o.filter((function(e,t){return t%r!==0})),o}switch(e){case"week":n=7,this.graph.setXAxisTimeFormat("%e %b"),this.graph.setTipTimeFormat("%a, %e %b");break;case"month":n=31,this.graph.setXAxisTimeFormat("%e %b"),this.graph.setTipTimeFormat("%a, %e %b");break;case"3month":n=93,this.graph.setXAxisTimeFormat("%e %b"),this.graph.setTipTimeFormat("%a, %e %b");break;case"6month":n=186,this.graph.setXAxisTimeFormat("%e %b"),this.graph.setTipTimeFormat("%a, %e %b"),a=!0;break;case"year":n=365,this.graph.setXAxisTimeFormat("%b"),this.graph.setTipTimeFormat("%a, %e %b"),a=!0;break;case"3year":n=1095,this.graph.setXAxisTimeFormat("%Y"),this.graph.setTipTimeFormat("%a, %e %b"),a=!0,r=10;break;case"all":a=!0,this.graph.setXAxisTimeFormat("%Y"),this.graph.setTipTimeFormat("%e %b, %Y"),r=4;break;default:"number"===typeof e&&(n=e)}return a&&!this.fullDataLoaded?(t=new s.Deferred,this.togglePreloader("on"),this.getData("full",(function(e){i.data=e,i.fullDataLoaded=!0,i.togglePreloader("off"),t.resolve(l(e))})),t.promise()):l(this.data)}},{key:"getSignedValue",value:function(e,t){return(e<0?"-":"+")+(Number.isInteger(t)?Math.abs(e).toFixed(t):Math.abs(e))}},{key:"togglePreloader",value:function(e){"on"===e?this.$el.find(".js-currency-widget-wrap").addClass("preloader"):"off"===e&&this.$el.find(".js-currency-widget-wrap").removeClass("preloader")}}])&&n(t.prototype,i),a&&n(t,a),e}();e.exports=function(e,t){return new a(e,t)}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function s(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var o=i(1),a=i(210),r=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.params=t,this.duration=t.duration||300,this.localeRU=a.locale({decimal:",",thousands:"\xa0",grouping:[3],currency:[""," \u0440\u0443\u0431."],dateTime:"%A, %e %B %Y \u0433. %X",date:"%d.%m.%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["\u0432\u043e\u0441\u043a\u0440\u0435\u0441\u0435\u043d\u044c\u0435","\u043f\u043e\u043d\u0435\u0434\u0435\u043b\u044c\u043d\u0438\u043a","\u0432\u0442\u043e\u0440\u043d\u0438\u043a","\u0441\u0440\u0435\u0434\u0430","\u0447\u0435\u0442\u0432\u0435\u0440\u0433","\u043f\u044f\u0442\u043d\u0438\u0446\u0430","\u0441\u0443\u0431\u0431\u043e\u0442\u0430"],shortDays:["\u0432\u0441","\u043f\u043d","\u0432\u0442","\u0441\u0440","\u0447\u0442","\u043f\u0442","\u0441\u0431"],months:["\u044f\u043d\u0432\u0430\u0440\u044f","\u0444\u0435\u0432\u0440\u0430\u043b\u044f","\u043c\u0430\u0440\u0442\u0430","\u0430\u043f\u0440\u0435\u043b\u044f","\u043c\u0430\u044f","\u0438\u044e\u043d\u044f","\u0438\u044e\u043b\u044f","\u0430\u0432\u0433\u0443\u0441\u0442\u0430","\u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f","\u043e\u043a\u0442\u044f\u0431\u0440\u044f","\u043d\u043e\u044f\u0431\u0440\u044f","\u0434\u0435\u043a\u0430\u0431\u0440\u044f"],shortMonths:["\u042f\u043d\u0432","\u0424\u0435\u0432","\u041c\u0430\u0440","\u0410\u043f\u0440","\u041c\u0430\u0439","\u0418\u044e\u043d","\u0418\u044e\u043b","\u0410\u0432\u0433","\u0421\u0435\u043d\u0442","\u041e\u043a\u0442","\u041d\u043e\u044f","\u0414\u0435\u043a"]})}return s(e,null,[{key:"isPromise",value:function(e){var t=String((new o.Deferred).then),i=String(e.then);return"function"===typeof e.then&&t===i}}]),s(e,[{key:"dataComparator",value:function(e,t){return e.date.getTime()-t.date.getTime()}},{key:"init",value:function(){var e=this;this.initDone||(this.graph={},this.currency="usd",this.graph.width=this.params.sizeX-this.params.margins.left-this.params.margins.right,this.graph.height=this.params.sizeY-this.params.margins.top-this.params.margins.bottom,this.graph.parseDate=a.time.format(this.params.dateFormat).parse,this.graph.x=a.time.scale().range([0,this.graph.width]),this.graph.y=a.scale.linear().range([this.graph.height,0]),this.setTipTimeFormat("%a, %e %b"),this.graph.xAxisTimeFormat="%e %b",this.params.axes&&(this.graph.xAxis=a.svg.axis().scale(this.graph.x).orient(this.params.ticks.orientX),this.params.ticks&&this.graph.xAxis.ticks(this.params.ticks.bottom).tickSize(21,0,0).tickFormat(this.localeRU.timeFormat(this.graph.xAxisTimeFormat)),this.graph.yAxis=a.svg.axis().scale(this.graph.y).orient(this.params.ticks.orientY),this.params.ticks&&this.graph.yAxis.ticks(this.params.ticks.left),this.params.grid&&(this.graph.gridAxis=a.svg.axis().scale(this.graph.y).orient("left").ticks(this.params.ticks.left).tickFormat("").tickSize(-this.graph.width,0,0))),this.graph.bisector=a.bisector((function(e){return e.date})).left,this.graph.valueline=a.svg.line().x((function(t){return e.graph.x(t.date)})).y((function(t){return e.graph.y(t.value)})),this.graph.svg=a.select(this.params.selector).append("svg").attr("width",this.graph.width+this.params.margins.left+this.params.margins.right).attr("height",this.graph.height+this.params.margins.top+this.params.margins.bottom).append("g").attr("transform","translate("+this.params.margins.left+","+this.params.margins.top+")"),this.params.tip&&(a.select(this.params.selector).append("div").attr("class","tip").style("opacity",0),this.graph.tip=a.select(this.params.selector).select(".tip").html('<div class="baloon"><div class="baloon-value"></div><div class="baloon-date"></div></div>')),this.initDone=!0)}},{key:"setXAxisTimeFormat",value:function(e){this.graph.xAxisTimeFormat=e,this.params.ticks&&this.graph.xAxis.tickFormat(this.localeRU.timeFormat(this.graph.xAxisTimeFormat))}},{key:"drawData",value:function(t){var i,n,s,r,l=this,c=function(e){if(l.dataIn=e,l.graph.svg.selectAll(".grid, .axis, .line, .graph-overlay").remove(),i=e.map((function(e){return{date:l.graph.parseDate(e.date),value:Number(e[l.currency]).toFixed(4)}})),l.graph.x.domain(a.extent(i,(function(e){return e.date}))),n=a.extent(i,(function(e){return e.value})),l.graph.y.domain(n),l.params.axes){switch(l.params.axes.x){case"top":s=l.params.axes.offsetX;break;case"bottom":s=l.graph.height+l.params.axes.offsetX;break;default:s=l.graph.height}switch(l.graph.svg.append("g").attr("class","x axis").attr("transform","translate(0,"+s+")").call(l.graph.xAxis),l.params.axes.y){case"left":r=l.params.axes.offsetY;break;case"right":r=l.graph.width+l.params.axes.offsetY;break;default:r=0}l.graph.svg.append("g").attr("class","y axis").attr("transform","translate("+r+",0)").call(l.graph.yAxis)}l.params.grid&&l.graph.svg.append("g").attr("class","grid").style("stroke-dasharray","4, 3").call(l.graph.gridAxis),l.graph.svg.append("path").attr("class","line").attr("d",l.graph.valueline(i)),l.data=i,l.dataSorted=i.sort(l.dataComparator),l.graph.svg.append("rect").attr("class","graph-overlay").attr("width",l.graph.width).attr("height",l.graph.height),l.params.tip&&l.bindTip()};e.isPromise(t)?o.when(t).then(c):c(t)}},{key:"changeData",value:function(t){var i=this;if(this.data){var n=function(e){var t,n=a.select(i.params.selector).transition();i.data=e.map((function(e){return{date:i.graph.parseDate(e.date),value:Number(e[i.currency]).toFixed(4)}})),i.dataIn=e,i.dataSorted=i.data.sort(i.dataComparator),i.graph.x.domain(a.extent(i.data,(function(e){return e.date}))),t=[(t=a.extent(i.data,(function(e){return e.value})))[0]-5,t[1]+5],i.graph.y.domain(t),i.params.ticks&&(n.select(".x.axis").duration(i.duration).call(i.graph.xAxis),n.select(".y.axis").duration(i.duration).call(i.graph.yAxis)),i.params.grid&&n.select(".grid").duration(i.duration).call(i.graph.gridAxis),n.select(".line").duration(i.duration).attr("d",i.graph.valueline(i.data))};e.isPromise(t)?o.when(t).then(n):n(t)}else this.drawData(t)}},{key:"setTipTimeFormat",value:function(e){this.graph.tipTimeFormat=this.localeRU.timeFormat(e)}},{key:"bindTip",value:function(){var e=this,t=this.graph.tip;a.select(this.params.selector).select(".graph-overlay").on("mousemove",(function(){var i,n=a.mouse(e.graph.svg.node())[0],s=e.graph.x.invert(n),o=e.graph.bisector(e.dataSorted,s),r=e.dataSorted[o-1],l=e.dataSorted[o];i=r?l?s.time-r.date.time>l.date.time-s?l:r:0:l,t.select(".baloon-date").html(e.graph.tipTimeFormat(i.date)),t.select(".baloon-value").html(i.value),t.style("opacity",1).style("left",n+e.params.margins.left+"px")})).on("mouseout",(function(){t.transition().duration(300).style("opacity",0)}))}},{key:"setCurrency",value:function(e){return("usd"===e||"eur"===e)&&(e!==this.currency&&(this.currency=e,this.dataIn&&this.changeData(this.dataIn)),!0)}}]),e}();e.exports=function(e){return new r(e)}},,function(e,t,i){"use strict";var n=i(1);e.exports=function(){var e=n("#headline-panel");e.length&&null===n.cookie("headline")&&(e.show(),n("#headline-toggler").on("click",(function(){e.slideToggle(),n.cookie("headline",!0,{expires:1})})))}},function(e,t,i){"use strict";var n=i(1),s=i(213);e.exports=function(){n(".js-gallery").each((function(e,t){new s({el:t})}))}},function(e,t,i){"use strict";var n=i(0),s=i(1),o=i(9);e.exports=n.View.extend({options:{speed:200,moveSpeed:400,preload:!0,currentPage:0,reversed:!1},events:{"click .control, .control-placeholder":"onMove","click .control_mini":"onMoveSection","click .item":"onSetPicture"},initialize:function(e){var t=this;if(o.merge(this.options,e),this.$items=this.$el.find(".item"),this.$items.length){if(this.$next=this.$el.find(".control_next"),this.$prev=this.$el.find(".control_prev"),this.$frame=this.$el.find(".photo"),this.$viewport=this.$el.find(".items"),this.$image=this.$el.find(".image"),this.$premial=this.$image.parents("._premium"),this.$caption=this.$el.find(".description .caption"),this.$credits=this.$el.find(".description .credits"),this.$text=this.$el.find("#text"),this.length=this.$items.length,this.numberOfPages=Math.ceil(this.length/8),this.$vertical=!1,1===this.length&&this.$el.addClass("b-topic_gallery_single"),1===this.$items.length&&1===this.$premial.length){var i=this.$items.eq(0).data("image");i.height>=i.width&&(this.$vertical=!0,this.$premial.addClass("_vertical"))}var n=null;if(document.location.hash){var a=parseInt(document.location.hash.substr(1),10);a>=0&&a<this.length&&(n=a)}this.setPicture(n,!0),s(document).on("keyup",(function(e){switch(e.keyCode){case 39:t.$next.transition({opacity:1},t.moveSpeed,(function(){t.$next.transition({opacity:0})})),t.moveNext();break;case 37:t.$prev.transition({opacity:1},t.moveSpeed,(function(){t.$prev.transition({opacity:0})})),t.movePrev()}}))}},onMove:function(e){e.stopPropagation();var t=s(e.target);t.closest(".control-placeholder_left").length?this.movePrev():t.closest(".control-placeholder_right").length&&this.moveNext()},onMoveSection:function(e){var t=s(e.target).closest(".control_mini").data("action"),i={current:this.options.currentPage,first:0,last:Math.ceil(this.length/8)-1,get prev(){var e=this.current-1,t=Math.max(e,this.first);return this.current===this.first?this.last:t},get next(){var e=this.current+1,t=Math.min(e,this.last);return this.current===this.last?this.first:t}};this.setPage(i[t])},onSetPicture:function(e){var t=s(e.target).data("index");this.setPicture(t)},setPicture:function(e){var t=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.options.preload&&this.preloadSiblings(e),this.current!==e){var n=this.$items.eq(e),s=n.data("image"),o=i?0:this.options.speed;if(this.$items.eq(this.current).removeClass("active"),n.addClass("active"),this.$image.transition({opacity:0},o,(function(){t.$image[0].onload=function(){t.$image.transition({opacity:1},o)},t.$image.attr("src",s.url),t.$image.width(s.width),t.$image.height(s.height),t.$vertical||t.$image.css("margin-top",(t.$frame.height()-s.height)/2),s.alt?(t.$text.show().html(s.alt),t.$image.attr("title",s.photo_title)):(t.$text.hide(),t.$image.removeAttr("title")),s.credits?t.$credits.show().html(s.credits):t.$credits.hide(),s.caption?(t.$caption.show().html(s.caption),t.$image.attr("alt",s.caption)):(t.$caption.hide(),t.$image.attr("alt",""))})),this.current=e,null!==e&&(document.location.hash=e),this.updateCount(),this.options.reversed){var a=8*this.numberOfPages-this.length;this.setPage(Math.floor((this.current+a)/8),i)}else this.setPage(Math.floor(this.current/8),i)}},preloadSiblings:function(e){var t=this;this.length<4?this.$items.each((function(e,t){(new Image).src=s(t).data("image").url})):(e===this.length-1||0===e?[-1,0,1]:[e-1,e,e+1]).forEach((function(e){(new Image).src=t.$items.eq(e-1).data("image").url}))},setPage:function(e){var t,i,n,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],o=e,a=0;t=s?0:this.moveSpeed,i=this.$items.eq(0).width()+15,o===this.numberOfPages&&(this.options.currentPage===this.numberOfPages?o=0:0===this.options.currentPage&&(o=this.numberOfPages-1)),n=o*(8*i),this.numberOfPages>1&&(this.numberOfPages===o+1?(a=i*(8*this.numberOfPages-this.length),this.options.reversed=!0):0===o&&(this.options.reversed=!1)),this.options.reversed&&(a=this.options.reversed&&i*(8*this.numberOfPages-this.length)),this.$viewport.transition({left:-1*n+a},t),this.options.currentPage=o},updateCount:function(){this.$el.find(".count .current").text(this.current+1)},moveNext:function(){var e=this.current+1>this.length-1?0:this.current+1;this.setPicture(e)},movePrev:function(){var e=this.current-1<0?this.length-1:this.current-1;this.setPicture(e)}})},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s={topColumn:".js-top-column",topColumnContainer:".js-top-column-container",lowerColumn:".js-lower-column",lowerColumnContainer:".js-lower-column-container",content:".js-topic__content",sidebar:".js-topic__sidebars",waitForBannersToEmerge:3e3,desiredBannerShowTimeInSeconds:3,marginTopBanner:0,marginBottomBanner:0,minimumTopValueToBecomeFixed:10};e.exports=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=s,Object.assign(this.settings,t.settings),this.sidebar=document.querySelector(this.settings.sidebar),this.contentBlock=document.querySelector(this.settings.content),this.sidebar&&this.contentBlock&&!this.isInforgaphic()&&(this.topColumn=this.sidebar.querySelector(this.settings.topColumn),this.topColumnContainer=this.sidebar.querySelector(this.settings.topColumnContainer),this.lowerColumn=this.sidebar.querySelector(this.settings.lowerColumn),this.lowerColumnContainer=this.sidebar.querySelector(this.settings.lowerColumnContainer),this.topColumn&&(this.topColumn.sticky=!0,this.topColumn.style.position="relative"),this.lowerColumn&&(this.lowerColumn.sticky=!0,this.lowerColumn.style.position="relative"),this.addHandlers=this.addHandlers.bind(this),this.fixedBanner=this.fixedBanner.bind(this),this.getChoord=this.getChoord.bind(this),this.registerBegunCallback=this.registerBegunCallback.bind(this),this.isInforgaphic=this.isInforgaphic.bind(this),this.bannersCanBeSticky=this.bannersCanBeSticky.bind(this),setTimeout((function(){i.bannersCanBeSticky()&&(i.initializeBanners(),i.addHandlers(),i.getRidOfExtraMargins(),i.registerBegunCallback())}),this.settings.waitForBannersToEmerge))}var t,i,o;return t=e,(i=[{key:"isInforgaphic",value:function(){return this.contentBlock.querySelector(".b-topic_pic_780")||this.contentBlock.querySelector(".b-topic_pic_940")}},{key:"initializeBanners",value:function(){this.lowerColumn?this.fixedBanner(this.lowerColumn,this.lowerColumnContainer):this.topColumn&&this.fixedBanner(this.topColumn,this.topColumnContainer)}},{key:"getRidOfExtraMargins",value:function(){this.lowerColumn&&this.lowerColumnContainer&&this.getRidOfMarginCollapse(this.lowerColumnContainer)}},{key:"getRidOfMarginCollapse",value:function(e){var t=e.previousElementSibling;t&&(t.style.paddingTop="1px",t.style.paddingBottom="1px")}},{key:"addHandlers",value:function(){var e=this;document.addEventListener("scroll",(function(){e.bannersCanBeSticky()&&(e.topColumn&&e.fixedBanner(e.topColumn,e.topColumnContainer),e.lowerColumn&&e.fixedBanner(e.lowerColumn,e.lowerColumnContainer))}))}},{key:"fixedBanner",value:function(e,t){var i=this.getChoord(e).top+e.offsetHeight-this.settings.marginBottomBanner+this.settings.marginTopBanner>this.contentBlock.offsetHeight+this.getChoord(this.contentBlock).top;(this.elementShouldBeGluedToTheBottom(e)||i)&&this.toTheBottom(e,t),this.isFixed(e)||this.areWeHeadingBack(e)?this.makeElementFixed(e):this.didWeReachStartingPosition(e,t)&&this.makeElementRelative(e)}},{key:"registerBegunCallback",value:function(){var e=this;this.topColumn&&this.topColumnContainer&&window.Begun&&window.Begun.Autocontext.Callbacks.register({inView:{ban_240x400:function(t){t.sessionInViewTime>e.settings.desiredBannerShowTimeInSeconds&&(e.topColumn.sticky=!1,e.makeElementAbsoluteRelativeToParent(e.topColumn,e.topColumnContainer),window.Begun.Autocontext.Callbacks.unregister("inView","ban_240x400"))}}})}},{key:"getChoord",value:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}},{key:"isFixed",value:function(e){return this.isElementInViewport(e)&&e.sticky&&this.elementShouldBecomeSticky(e)}},{key:"bannersCanBeSticky",value:function(){return this.contentBlock.offsetHeight>=this.sidebar.offsetHeight}},{key:"makeElementFixed",value:function(e){e.style.width="300px",e.style.position="fixed",e.style.top="".concat(this.settings.marginTopBanner,"px")}},{key:"makeElementAbsoluteRelativeToParent",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(t.style.position="relative",e.style.position="absolute",window.pageYOffset>this.getChoord(t).top){var n=window.pageYOffset-this.getChoord(t).top-i;e.style.top="".concat(n,"px")}}},{key:"toTheBottom",value:function(e,t){t.style.position="relative",e.style.position="absolute";var i=this.getChoord(this.contentBlock).top+this.contentBlock.offsetHeight,n=this.getChoord(this.topColumn).top+this.topColumn.offsetHeight,s=this.lowerColumn&&this.lowerColumn.offsetHeight||0,o=i-n;if(this.lowerColumn&&e===this.lowerColumn&&(o-=s),o<0&&this.topColumn&&"fixed"===this.topColumn.style.position)this.makeElementAbsoluteRelativeToParent(this.topColumn,this.topColumnContainer),this.makeElementAbsoluteRelativeToParent(this.lowerColumn,this.lowerColumnContainer,this.settings.marginBottomBanner);else if(o<0&&this.topColumn){var a=parseInt(this.topColumn.style.top,10)+o-this.settings.marginBottomBanner;this.topColumn.style.top="".concat(a,"px")}else e.style.top="".concat(o-this.settings.marginBottomBanner,"px")}},{key:"isElementInViewport",value:function(e){var t=e.getBoundingClientRect(),i=t.top,n=t.bottom;return i<window.innerHeight&&n>=0}},{key:"elementShouldBecomeSticky",value:function(e){var t=window.pageYOffset+this.settings.marginTopBanner>this.getChoord(e).top&&window.pageYOffset<this.getChoord(e).top+e.offsetHeight,i="relative"===e.style.position;return t&&i}},{key:"elementShouldBeGluedToTheBottom",value:function(e){return window.pageYOffset+this.settings.marginTopBanner>this.getChoord(e).top+e.offsetHeight&&"relative"===e.style.position&&e.sticky}},{key:"didWeReachStartingPosition",value:function(e,t){return this.getChoord(e).top<this.getChoord(t).top}},{key:"areWeHeadingBack",value:function(e){var t=parseInt(e.style.top,10);return window.pageYOffset+this.settings.marginTopBanner<this.getChoord(e).top&&"absolute"===e.style.position&&t>this.settings.minimumTopValueToBecomeFixed}},{key:"makeElementRelative",value:function(e){e.style.position="relative",e.style.top="0px"}}])&&n(t.prototype,i),o&&n(t,o),e}()},function(e,t,i){"use strict";e.exports=function(){var e=document.querySelector(".js-topic");e&&((e.querySelector(".b-topic_pic_780")||e.querySelector(".b-topic_pic_940"))&&e.classList.add("is-infographic"))}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,(i=[{key:"initialize",value:function(e){this.currentWidth=0,this.hasMore=!1,this.$el=e,this.maxWidth=this.$el.find(".items").width()-150,this.items=this.$el.find(".item"),this.itemsLength=this.items.length,this.moreBtnHtml=s('<div class="more-items"><a href="javascript:void(0)" class="more-more"><span>\u0415\u0449\u0435</span><svg class="icons-tag-menu"><use xlink:href="#ui-tag-menu_toggled"></use></svg></a></div>'),this.processTaglist(),this.addMoreBtn()}},{key:"processTaglist",value:function(){var e=this;this.items.each((function(t,i){var n=s(i),o=n.width()+parseInt(n.css("marginRight"),10);e.currentWidth+o<e.maxWidth?(e.currentWidth+=o,n.css("display","inline-block")):e.itemsLength===t+1&&o<150&&!e.hasMore?n.css("display","inline-block"):(e.hasMore=!0,e.moreBtnHtml.append(i))}))}},{key:"addMoreBtn",value:function(){if(this.hasMore){this.$el.find(".items").append('<a href="javascript:void(0)" class="more dark">\u0415\u0449\u0435<svg class="icons-tag-menu"><use xlink:href="#ui-tag-menu"></use></svg></a>');var e=this.$el.find(".more");e.append(this.moreBtnHtml),e.hover((function(){e.find("svg").css("fill","#cc3333")}),(function(){e.find("svg").css("fill","")}))}}}])&&n(t.prototype,i),o&&n(t,o),e}();e.exports=function(){var e=new o,t=s(".js-tags");t.length&&e.initialize(t)}},function(e,t,i){"use strict";var n=i(1),s=i(218);e.exports=function(){n(".theme__info").length&&new s({el:".theme__info"})}},function(e,t,i){"use strict";function n(e){return(n="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var s=i(1),o=i(0);e.exports=o.View.extend({initialize:function(){this.pathName=document.location.pathname,this.themeId=this.$el.data("id"),this.themeUpdateTime=this.$el.data("updatetime"),this.addThemeToLocalStorage(),this.checkThemeNameplate()},addThemeToLocalStorage:function(){var e=JSON.parse(localStorage.getItem("lentaThemes"))||{},t=this.getProperty(e,String(this.themeId));this.hasLocalStorage()&&0===this.pathName.indexOf("/themes/")&&(!t||t<this.themeUpdateTime)&&(e[this.themeId]=this.themeUpdateTime,localStorage.setItem("lentaThemes",JSON.stringify(e)))},checkThemeNameplate:function(){var e=this;if(this.hasLocalStorage()){this.$themes=this.$el.has(".nameplate:hidden");var t=JSON.parse(localStorage.getItem("lentaThemes"))||{};this.$themes.each((function(i,n){var o=s(n),a=o.data("id"),r=o.data("updatetime"),l=e.getProperty(t,String(a));(!l||l<r)&&o.find(".nameplate").removeClass("nameplate_hidden_yes")}))}},hasLocalStorage:function(){var e="modernizr";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(t){return!1}},getProperty:function(e,t){return t.split(".").reduce((function(e,t){return e&&"object"===n(e)?e[t]:null}),e)}})},function(e,t,i){"use strict";var n=i(4),s=i(3);e.exports=function(){var e=this;(new n.ScriptLoader).getPromise("https://id.rambler.ru/rambler-id-helper/auth_events.js").then((function(){e.helper=window.ramblerIdHelper,e.helper.registerOnPossibleLoginCallback(s.user.fetch.bind(s.user)),e.helper.registerOnPossibleLogoutCallback(s.user.fetch.bind(s.user))}))}},function(e,t,i){"use strict";var n=i(1);e.exports=function(){var e,t,i=n(".js-topics-filter");i.length&&(e=i.find("[name=rubric]")).length&&(t=document.location.href,i.on("change",(function(i){var s,o=n(i.target),a=function(){t=t.replace(s,(function(e,t){return t+o.val()}))};switch(o.attr("name")){case"author":s=/(\/parts\/authors\/)([\w\W]+)/i,a();break;case"rubric":""===e.val()?t=t.slice(0,t.indexOf("?")):(s=/(bloc_slug=)(\w+)/i).test(t)?a():("/"!==t.slice(-1)&&"?"!==t.slice(-1)||(t=t.slice(0,-1)),t+="?bloc_slug="+e.val())}document.location=t})))}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e);var i=s(t),n=i.find(".js-carousel-wrap"),o=i.find(".js-carousel-item");this.$list=i.find(".js-carousel-list"),this.hideClass="_is-hidden",this.step=o.outerWidth(),this.shift=this.$list.length&&this.$list.position().left,this.maxSlidesToScroll=(this.$list.outerWidth()-n.width())/this.step,this.maxSlidesToScroll=Math.ceil(this.maxSlidesToScroll),this.slidesToScroll=0,this.$controlArrowLeft=i.find(".js-carousel-control-left").addClass(this.hideClass),this.$controlArrowRight=i.find(".js-carousel-control-right").addClass(this.maxSlidesToScroll<=0?this.hideClass:""),this.moveList(),this.setHandlers()}var t,i,o;return t=e,(i=[{key:"moveList",value:function(){this.$list.css({left:this.shift})}},{key:"setHandlers",value:function(){var e=this;this.$controlArrowLeft.on("click",(function(){e.slidesToScroll<=e.maxSlidesToScroll&&e.slidesToScroll>0&&(e.slidesToScroll--,e.$controlArrowRight.removeClass(e.hideClass),e.shift+=e.step,e.moveList()),0===e.slidesToScroll&&e.$controlArrowLeft.addClass(e.hideClass)})),this.$controlArrowRight.on("click",(function(){e.slidesToScroll<e.maxSlidesToScroll&&(e.$controlArrowLeft.removeClass(e.hideClass),e.slidesToScroll++,e.shift-=e.step,e.moveList()),e.slidesToScroll===e.maxSlidesToScroll&&e.$controlArrowRight.addClass(e.hideClass)}))}}])&&n(t.prototype,i),o&&n(t,o),e}();e.exports=function(){var e=s(".js-carousel"),t=[];e.length&&e.each((function(e,i){t.push(new o(i))}))}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,o;return t=e,(i=[{key:"initialize",value:function(e,t){return this.$menu=s(e)||null,this.element=t,this.$toggleElems=s(".b-specproject-item"),this.$menu&&this.element&&this.$toggleElems.length?(this.$menuItems=this.$menu.find(t),this):(this.disabled=!0,this)}},{key:"handle",value:function(){var e=this;this.disabled||(this.$menu.on("click",this.element,(function(t){e.toggleByHash(t.target.getAttribute("href"))})),this.toggleByHash())}},{key:"setActive",value:function(e){e.hasClass("active")||(this.$menuItems.removeClass("active"),e.addClass("active"))}},{key:"toggleByHash",value:function(e){var t=e||document.location.hash;if(t)switch(this.setActive(this.$menuItems.filter("[href="+t+"]")),this.$toggleElems.show(),t.slice(1)){case"non_commercial":this.$toggleElems.filter('[data-commercial="true"]').hide();break;case"commercial":this.$toggleElems.filter('[data-commercial="false"]').hide()}}}])&&n(t.prototype,i),o&&n(t,o),e}();e.exports=function(){(new o).initialize(".b-tags-list",".item").handle()}},function(e,t,i){"use strict";var n=i(224);e.exports=function(){new n({el:".form-subscriptions"})}},function(e,t,i){"use strict";var n=i(1),s=i(0);e.exports=s.View.extend({errorMessage:{email:"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0443\u043a\u0430\u0436\u0438\u0442\u0435 \u0432\u0430\u0448 Email.",type:"\u0412\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u0432\u0438\u0434 \u0440\u0430\u0441\u0441\u044b\u043b\u043a\u0438.",agreement:"\u041f\u0440\u0438\u043c\u0438\u0442\u0435 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c\u0441\u043a\u043e\u0435 \u0441\u043e\u0433\u043b\u0430\u0448\u0435\u043d\u0438\u0435."},events:{"click .form-subscriptions__toggle":"onClick",change:"onValidate","click .form-subscriptions__submit":"onSubmit"},initialize:function(){this.$formFieldUserAgreement=this.$el.find(".form-subscriptions__field_type_user-agreement"),this.$formContentUserAgreement=this.$formFieldUserAgreement.siblings(".form-subscriptions__toggle-content"),this.$inputTypeEmail=this.$el.find(".input_type_email"),this.$inputError=this.$el.find(".input-error"),this.$fieldDaily=this.$el.find(".form-subscriptions__field_type_daily"),this.$fieldWeekly=this.$el.find(".form-subscriptions__field_type_weekly"),this.$fieldUserAgreement=this.$el.find(".form-subscriptions__field_type_user-agreement")},validateInputEmail:function(){var e=this.$inputTypeEmail.find(".input__controller").val();return/^(([^<>()[\]\\.,;:\s@\"]+(\.[^<>()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/.test(e)?(this.$inputError.hide(),this.$inputTypeEmail.removeClass("input_with_error"),!0):(this.showErrorMessage(this.errorMessage.email),this.$inputTypeEmail.addClass("input_with_error"),!1)},validateTypeSubs:function(){var e=this.$fieldDaily.find(".checkbox"),t=this.$fieldWeekly.find(".checkbox"),i=this.isCheckedCheckbox(e)||this.isCheckedCheckbox(t),n=e.find(".checkbox__box").add(t.find(".checkbox__box"));return i?(this.$inputError.hide(),n.removeClass("checkbox__box_theme_error"),!0):(this.showErrorMessage(this.errorMessage.type),n.addClass("checkbox__box_theme_error"),!1)},validateUserAgreement:function(){var e=this.$fieldUserAgreement.find(".checkbox"),t=e.find(".checkbox__box");return this.isCheckedCheckbox(e)?(this.$inputError.hide(),t.removeClass("checkbox__box_theme_error"),!0):(this.showErrorMessage(this.errorMessage.agreement),t.addClass("checkbox__box_theme_error"),!1)},validateFormSubscriptions:function(){var e=this.$el.is("#new_subscription");return this.validateInputEmail()&&(!e||this.validateTypeSubs()&&this.validateUserAgreement())},showErrorMessage:function(e){this.$inputError.show().text(e)},isCheckedCheckbox:function(e){return e.find(".checkbox__control").is(":checked")},onClick:function(e){var t=n(e.target),i=t.find(".button__icon");t.toggleClass("form-subscriptions__toggle_mode_show"),i.toggleClass("button__icon_theme_down button__icon_theme_up"),this.$formContentUserAgreement.toggle()},onValidate:function(){this.validateFormSubscriptions()},onSubmit:function(){return this.validateFormSubscriptions()}})},function(e,t,i){"use strict";e.exports=function(){var e=$(".js-error");if(e.length){var t=$(window),i=$(document),n=$(".js-footer"),s=$('<div style="visibility:hidden; width: 1px; height: 1px;"></div>"');e.before(s),e.refreshHeight=function(){var t=s.position().top,o=i.outerHeight()-n.outerHeight();e.height(o-t)},e.refreshHeight(),t.resize(e.refreshHeight),e.addClass(e.data("class-visible"))}}},function(e,t,i){"use strict";var n=i(227);e.exports=function(e){new n(e)}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=i(3);e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.slug_tns=t.slug_tns,this.bloc_slug=t.bloc_slug,this.part_slug=t.part_slug,this.tns(),this.liveInternet()}var t,i,a;return t=e,(i=[{key:"tns",value:function(){var e=document.location.pathname,t="lenta_other";"/"===e?t=this.slug_tns.main:this.slug_tns[this.bloc_slug]?t=this.slug_tns[this.bloc_slug]:this.slug_tns[this.part_slug]&&(t=this.slug_tns[this.part_slug]),function(e,i,n){(e[n]=e[n]||[]).push((function(){try{new TNS.TnsCounter({account:"rambler_ru",tmsec:t})}catch(e){o.trace(e.toString(),"warning")}}));var s=i.createElement("script");s.type="text/javascript",s.async=!0,s.src=("https:"===i.location.protocol?"https:":"http:")+"//www.tns-counter.ru/tcounter.js";var a=i.getElementsByTagName("script")[0];a.parentNode.insertBefore(s,a)}(window,document,"tnscounter_callback")}},{key:"liveInternet",value:function(){var e=document.getElementById("liveinternet-counter");if(null!==e){var t=document.createElement("a");t.href="//www.liveinternet.ru/click;Lenta",t.target="_blank";var i=document.createElement("img"),n=encodeURIComponent(document.referrer),o="undefined"===typeof screen?"":";s",a=screen,r=n+o+a.width+"*"+a.height+"*"+(a.colorDepth?a.colorDepth:a.pixelDepth);i.src="//counter.yadro.ru/hit;Lenta?t11.4;r"+r+";u"+encodeURIComponent(document.URL)+";"+Math.random(),i.alt="",i.title="LiveInternet: \u043f\u043e\u043a\u0430\u0437\u0430\u043d\u043e \u0447\u0438\u0441\u043b\u043e \u043f\u0440\u043e\u0441\u043c\u043e\u0442\u0440\u043e\u0432 \u0437\u0430 24 \u0447\u0430\u0441\u0430, \u043f\u043e\u0441\u0435\u0442\u0438\u0442\u0435\u043b\u0435\u0439 \u0437\u0430 24 \u0447\u0430\u0441\u0430 \u0438 \u0437\u0430 \u0441\u0435\u0433\u043e\u0434\u043d\u044f",s(i).css({border:0,width:"88px",height:"31px"}),t.appendChild(i),e.appendChild(t)}}}])&&n(t.prototype,i),a&&n(t,a),e}()},function(e,t,i){"use strict";var n=i(1);e.exports=function(){n(".b-feature a.js-dh").hover((function(){var e=n(this),t=e.attr("href");e.closest("section").find('a[href="'+t+'"]').toggleClass("js-hover")}))}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1);i(48)();var o={threshold:10,animateSpeed:600},a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,i,a;return t=e,(i=[{key:"initialize",value:function(e,t){var i=this;this.settings=Object.assign(o,t),this.$elem=e,this.$document=s("html, body"),this.isAnimated=!1,s(window).on("scroll",(function(){var e=s(window).scrollTop();i.isAnimated||(e>i.settings.threshold?i.showButton():i.hideButton())})),this.$elem.on("click",(function(){i.$document.animate({scrollTop:0},i.settings.animateSpeed,i.hideButton)}))}},{key:"showButton",value:function(){var e=this;this.isVisible||(this.isAnimated=!0,this.$elem.stop(!0,!0).transition({top:0,opacity:1},this.settings.animateSpeed,(function(){e.isAnimated=!1})),this.isVisible=!0)}},{key:"hideButton",value:function(){var e=this;this.isVisible&&(this.is_animated=!0,this.$elem.stop(!0,!0).transition({top:-54,opacity:0},this.settings.animateSpeed,(function(){e.isAnimated=!1})),this.isVisible=!1)}}])&&n(t.prototype,i),a&&n(t,a),e}();e.exports=function(){var e=new a,t=s("#up");t.length&&e.initialize(t)}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(231).Pushwoosh,o=i(4).getDevice().isSafari,a=i(3).settings.env,r=window.Promise||i(35);e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.pushwoosh=new s,this.settings=t,this.tags={},this.pushwoosh.push(["init",{logLevel:this.settings.logLevel,applicationCode:this.settings.applicationCode,safariWebsitePushID:"web".concat("staging"===a?".development":"",".lenta.ru"),defaultNotificationTitle:"Lenta.ru",defaultNotificationImage:"https://lenta.ru/L.png",autoSubscribe:!1}])}var t,i,l;return t=e,(i=[{key:"init",value:function(e){var t=this;return new r((function(i){t.pushwoosh.api?t._checkSubscribeAndRun(e,i):t.pushwoosh.push((function(){return t._checkSubscribeAndRun(e,i)}))}))}},{key:"_checkSubscribeAndRun",value:function(e,t){var i=this;this.pushwoosh.isSubscribed().then((function(n){n?i.run(e).then(t):i.pushwoosh.subscribe().then((function(){return i.run(e)})).then(t)}))}},{key:"getTags",value:function(){var e=this;return new r((function(t){e.pushwoosh.api?e.pushwoosh.api.getTags().then(t):e.pushwoosh.push((function(e){e.getTags().then(t)}))}))}},{key:"setTag",value:function(e,t){var i=this;return new r((function(n){i.pushwoosh.api?i._set(i.pushwoosh.api,e,t,n):i.pushwoosh.push((function(s){i._set(s,e,t,n)}))}))}},{key:"removeTag",value:function(e,t){var i=this;return new r((function(n){i.pushwoosh.api?i._removeTag(i.pushwoosh.api,e,t,n):i.pushwoosh.push((function(s){i._removeTag(s,e,t,n)}))}))}},{key:"_set",value:function(e,t,i,n){this._get(e,t).then((function(s){-1===s[t].indexOf(i)&&s[t].push(i),e.setTags(s).then(n)}))}},{key:"_get",value:function(e,t){var i=this.tags;return new r((function(n){i[t]?n(i):e.getTags().then((function(e){i[t]=e.result[t]||[],n(i)}))}))}},{key:"_removeTag",value:function(e,t,i,n){this._get(e,t).then((function(s){var o=s[t]?s[t].indexOf(i):-1;-1!==o&&(s[t].splice(o,1),e.setTags(s).then(n))}))}},{key:"run",value:function(e){return e?this.setTag("LentaBreakingNews","breaking_news").then(this.getTags.bind(this)):this.getTags()}},{key:"triggerTag",value:function(e){var t=e.tag,i=e.value;return e.active?this.setTag(t,i):this.removeTag(t,i)}},{key:"checkPermission",value:function(){return o?this.safariRequestPermission():Notification.requestPermission()}},{key:"safariRequestPermission",value:function(){return new r((function(e){Notification.requestPermission((function(t){e(t)}))}))}}])&&n(t.prototype,i),l&&n(t,l),e}()},,function(e,t,i){"use strict";i(233);var n=i(234);e.exports=function(e){n({targetUrl:e.url})}},function(e,t,i){},,function(e,t,i){"use strict";var n=i(1);e.exports=function(e){var t=document.querySelector("#editor-panel");n.cookie("ed_user")&&t&&n.ajax({url:"/check_ed"}).done((function(){t.style.display="block",t.innerHTML='<a class="button button_pen" href="https://ed.lenta.ru'.concat(e.siteUrl,'">\n                                  <svg class="icons-pen">\n                                    <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-pen"></use>\n                                  </svg>\n                                </a>')}))}},function(e,t,i){"use strict";var n=i(7),s=i(239),o=i(1);i(76),e.exports=n.ItemView.extend({className:"b-favorite-tooltip b-favorite-tooltip_bottom",events:{"click .js-favorite-tooltip-close":"onClickClose","click .js-favorite-tooltip-btn":"onBtnClick"},attributes:{"data-class-visible":"b-favorite-tooltip_visible"},templateHelpers:function(){return this.options},renderWithData:function(e){return this.options=s[e.type],this.cookie=this.options.cookie,this.template=this.options.template,this.el.className=this.options.className||this.className,e.email&&(this.options.email=e.email),e.uri&&(this.options.urlForButton="".concat(this.options.urlForButton,"?uri=").concat(e.uri)),this.render()},show:function(e){return this.cookie&&o.cookie(this.cookie.name)?this:(e&&this.delegateOnClickOver(),this.$el.addClass(this.getClassVisible()),this)},hide:function(){if(this.cookie){var e=new Date;e.setTime(e.getTime()+this.cookie.expires),o.cookie(this.cookie.name,this.cookie.value,{expires:e,path:"/"})}return this.undelegateOnClickOver(),this.$el.removeClass(this.getClassVisible()),this},destroy:function(){return this.hide(),this.$el.remove(),this},getClassVisible:function(){return this.$el.data("class-visible")},onClickClose:function(e){e.preventDefault(),e.stopPropagation(),this.hide()},onBtnClick:function(){this.options.onBtnClick&&this.options.onBtnClick(this.el)},onClickOver:function(e){this.$el.is(e.target)||this.$el.has(e.target).length||this.hide()},delegateOnClickOver:function(){this._onClickOver=this._onClickOver||this.onClickOver.bind(this),o("body").on("click",this._onClickOver)},undelegateOnClickOver:function(){o("body").off("click",this._onClickOver)},onDestroy:function(){this.undelegateOnClickOver()}})},,,function(e,t,i){"use strict";e.exports={auth:{template:i(29),messageBody:"\u0421\u043e\u0445\u0440\u0430\u043d\u044f\u0439\u0442\u0435 \u043d\u043e\u0432\u043e\u0441\u0442\u0438 \u0438 \u0441\u0442\u0430\u0442\u044c\u0438,<br/>\u0447\u0442\u043e\u0431\u044b \u043f\u0440\u043e\u0447\u0438\u0442\u0430\u0442\u044c \u0438\u0445 \u043f\u043e\u0437\u0436\u0435",titleForButton:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f",urlForButton:"/auth/signin"},teach:{template:i(240),messageBody:"\u041d\u0430\u0436\u043c\u0438\u0442\u0435 \u043d\u0430 \u0438\u043a\u043e\u043d\u043a\u0443 \u0441 \u0437\u0430\u043a\u043b\u0430\u0434\u043a\u043e\u0439,<br/>\u0447\u0442\u043e\u0431\u044b \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0432 \xab\u041c\u043e\u044e \u041b\u0435\u043d\u0442\u0443\xbb",className:"b-favorite-tooltip b-favorite-tooltip_bottom b-favorite-tooltip_teach"},forgotten:{template:i(29),messageBody:"\u0414\u043b\u044f \u0432\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u043b\u0435\u043d\u0438\u044f \u043f\u0430\u0440\u043e\u043b\u044f \u043e\u0442<br/>\u0420\u0430\u043c\u0431\u043b\u0435\u0440/\u043f\u043e\u0447\u0442\u044b \u043d\u0435\u043e\u0431\u0445\u043e\u0434\u0438\u043c\u043e \u043f\u0435\u0440\u0435\u0439\u0442\u0438 \u043d\u0430 \u0441\u0430\u0439\u0442 Rambler&Co ID.",titleForButton:"\u041f\u0435\u0440\u0435\u0439\u0442\u0438",urlForButton:"//id.rambler.ru/recovery/#recover",target:"_blank"},goodnewsEnabled:{template:i(29),className:"b-favorite-tooltip b-favorite-tooltip_bottom b-favorite-tooltip_goodnews",messageBody:"<b>\u041b\u0435\u043d\u0442\u0430 \u0434\u043e\u0431\u0440\u0430 \u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0430.</b> \u042d\u0442\u043e \u0437\u043e\u043d\u0430 \u0441\u043c\u0435\u0445\u0430, \u043f\u043e\u0437\u0438\u0442\u0438\u0432\u0430 \u0438 \u0435\u0434\u0438\u043d\u043e\u0440\u043e\u0436\u0435\u043a.",titleForButton:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",onBtnClick:function(e){e.remove()}},goodnewsDisabled:{template:i(29),className:"b-favorite-tooltip b-favorite-tooltip_bottom b-favorite-tooltip_goodnews",messageBody:"<b>\u041b\u0435\u043d\u0442\u0430 \u0434\u043e\u0431\u0440\u0430 \u0434\u0435\u0430\u043a\u0442\u0438\u0432\u0438\u0440\u043e\u0432\u0430\u043d\u0430.</b> \u0414\u043e\u0431\u0440\u043e \u043f\u043e\u0436\u0430\u043b\u043e\u0432\u0430\u0442\u044c \u0432 \u0440\u0435\u0430\u043b\u044c\u043d\u044b\u0439 \u043c\u0438\u0440.",titleForButton:"\u041f\u043e\u043d\u044f\u0442\u043d\u043e",onBtnClick:function(e){e.remove()}},authWithMail:{template:i(29),messageBody:"\u0412\u044b \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b<br/>\u0432 Rambler&Co \u0441 \u044d\u0442\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439.",titleForButton:"\u0412\u043e\u0439\u0442\u0438",urlForButton:"/auth/signin",set email(e){this.urlForButton="/auth/signin?email=".concat(e)}}}},function(e,t,i){i(2);e.exports=function(e){var t,i="",n=e||{};return function(e){i=i+'\n<div class="js-favorite-tooltip-close b-favorite-tooltip-close">\n  <svg class="svg-icons__ui-cross">\n    <use xlink:href="#ui-cross"></use>\n  </svg>\n</div>\n<div class="b-favorite-tooltip-title">'+(null==(t=e)?"":t)+"</div>"}.call(this,"messageBody"in n?n.messageBody:"undefined"!==typeof messageBody?messageBody:void 0),i}},function(e,t,i){"use strict";var n=i(4).ScriptLoader,s=i(0);e.exports=s.View.extend({initialize:function(e){var t=this;this.xid=e.xid,this.commentSettings=JSON.parse(e.settings),Object.assign(this.commentSettings,{xid:this.xid}),this.src="".concat(window.location.protocol,"//comments.rambler.ru/widget/v3/sdk.js"),this.loader=new n,this.loader.getPromise(this.src).then((function(){window.RamblerComments.buildWidget("Comments",t.el,t.commentSettings)}))}})},function(e,t,i){"use strict";var n=i(1),s=i(0);e.exports=s.View.extend({initialize:function(e){var t=this;this.appId=e.appId,this.xid=e.xid,this.url="https://c.rambler.ru/api/app/".concat(this.appId,"/comments-count?xid=").concat(this.xid),n.get(this.url).done((function(e){var i=e.xids&&e.xids[t.xid]||0;i&&t.$el.html(" ".concat(i))}))}})},function(e,t,i){"use strict";var n=i(244);e.exports=function(e){return e.el=document.querySelector(e.el),new n(e)}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(3),o=s.settings,a=i(4).createCookie,r=i(4).getCookie,l={desktop:{start:i(245),wait:i(246),success:i(248)},mobile:{start:i(250),wait:i(251),success:i(253)}},c=i(255),u={main:"LentaBreakingNews",rubrics:"LentaSectionsImportant"};e.exports=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.state="start",this.types=["main","rubrics"],this.permission=Notification.permission,this.pushwoosh=s.pushwoosh,this.el=t.el,this.title=t.title.replace(/\s/g,"&nbsp;"),this.slug=t.slug,this.version=t.version,this.type=o.kind.replace("m/",""),this.type=-1!==this.types.indexOf(this.type)?this.type:"rubrics",this.tagKey=u[this.type],this.tagValue="main"===this.type?"breaking_news":"".concat(this.slug,"_breaking"),r("custom-push-notifications")||("default"===this.permission?this.render():"granted"===this.permission&&this.pushwoosh.init().then((function(e){var t=e.result[i.tagKey];t&&-1!==t.indexOf(i.tagValue)||i.render()})))}var t,i,h;return t=e,(i=[{key:"callPopup",value:function(){var e=s.modules.user;return e&&e.callPopup(this.version)}},{key:"render",value:function(){c[this.type][this.state].rubrics=this.title,this.el.innerHTML=l[this.version][this.state](c[this.type][this.state]),this.onRender()}},{key:"onRender",value:function(){this.buttonClose=this.el.querySelector(".js-close"),this.buttonEnable=this.el.querySelector(".js-enable"),this.buttonSign=this.el.querySelector(".js-sign"),this.buttonEnable&&this.buttonEnable.addEventListener("click",this.subscribe.bind(this)),this.buttonClose&&this.buttonClose.addEventListener("click",this.destroy.bind(this)),this.buttonSign&&this.buttonSign.addEventListener("click",this.sign.bind(this))}},{key:"destroy",value:function(){"start"===this.state&&a("custom-push-notifications","hide",30),this.el.remove()}},{key:"requestPermission",value:function(){var e=this;return this.pushwoosh.checkPermission().then((function(t){"granted"===t?(e.pushwoosh.init(),e.pushwoosh.setTag(e.tagKey,e.tagValue).then(e.showSuccess.bind(e))):"denied"===t&&e.destroy()}))}},{key:"changeState",value:function(e){this.state=e,this.render()}},{key:"subscribe",value:function(){"default"===this.permission&&this.changeState("wait"),this.requestPermission()}},{key:"showSuccess",value:function(){this.changeState("success")}},{key:"sign",value:function(){if(s.user.isLoggedIn())window.location="/my/notifications";else{var e=window.location.pathname;"desktop"===this.version?this.callPopup():window.location="/auth/signin?from=".concat(e,"&page=notifications")}}}])&&n(t.prototype,i),h&&n(t,h),e}()},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a){i=i+'\n<div class="b-custom-push">\n  <div'+n.attr("class",n.classes(["b-custom-push__logo",o?"b-custom-push__logo_rubric":""],[!1,!0]),!1,!0)+'>\n    <svg class="b-custom-push__letter">\n      <use xlink:href="#ui-red-letter"></use>\n    </svg>\n  </div>\n  <div'+n.attr("class",n.classes(["b-custom-push__message",o?"b-custom-push__message_rubric":""],[!1,!0]),!1,!0)+">"+(null==(t=s)?"":t),o&&(i=i+'<span class="b-custom-push__rubric-name">\xab'+(null==(t=a)?"":t)+"\xbb</span>"),i=i+"?\n  </div>\n  <div"+n.attr("class",n.classes(["b-custom-push__buttons",o?"b-custom-push__buttons_rubric":""],[!1,!0]),!1,!0)+'>\n    <div class="b-custom-push__button-enable js-enable">'+n.escape(null==(t=e)?"":t)+'</div>\n    <div class="b-custom-push__button-close js-close">\n      <svg class="b-custom-push__button-close-cross">\n        <use xlink:href="#ui-cross"></use>\n      </svg>\n    </div>\n  </div>\n</div>'}.call(this,"buttonTitle"in s?s.buttonTitle:"undefined"!==typeof buttonTitle?buttonTitle:void 0,"message"in s?s.message:"undefined"!==typeof message?message:void 0,"rubric"in s?s.rubric:"undefined"!==typeof rubric?rubric:void 0,"rubrics"in s?s.rubrics:"undefined"!==typeof rubrics?rubrics:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,s="",o=e||{};return function(e,o,a){s=s+'\n<div class="b-custom-push">\n  <div'+n.attr("class",n.classes(["b-custom-push__logo",o?"b-custom-push__logo_rubric":""],[!1,!0]),!1,!0)+'>\n    <svg class="b-custom-push__letter">\n      <use xlink:href="#ui-red-letter"></use>\n    </svg>\n  </div>\n  <div class="b-custom-push__message">'+(null==(t=e)?"":t),o&&(s=s+'<span class="b-custom-push__rubric-name">\xab'+(null==(t=a)?"":t)+"\xbb</span>"),s=s+'<img class="b-custom-push__emodji"'+n.attr("src",i(247),!0,!0)+">\n  </div>\n  <div"+n.attr("class",n.classes(["b-custom-push__buttons",o?"b-custom-push__buttons_rubric":""],[!1,!0]),!1,!0)+'>\n    <div class="b-custom-push__button-close js-close">\n      <svg class="b-custom-push__button-close-cross">\n        <use xlink:href="#ui-cross"></use>\n      </svg>\n    </div>\n  </div>\n</div>'}.call(this,"message"in o?o.message:"undefined"!==typeof message?message:void 0,"rubric"in o?o.rubric:"undefined"!==typeof rubric?rubric:void 0,"rubrics"in o?o.rubrics:"undefined"!==typeof rubrics?rubrics:void 0),s}},function(e,t,i){e.exports=i.p+"images/icons/emodji/point-up.ccc61188.png"},function(e,t,i){var n=i(2);e.exports=function(e){var t,s="",o=e||{};return function(e,o){s=s+'\n<div class="b-custom-push">\n  <div class="b-custom-push__message b-custom-push__message_success">'+(null==(t=e)?"":t)+'<img class="b-custom-push__emodji"'+n.attr("src",i(249),!0,!0)+'></div>\n  <div class="b-custom-push__buttons">\n    <div class="b-custom-push__button-sign js-sign">'+n.escape(null==(t=o)?"":t)+'</div>\n    <div class="b-custom-push__button-close js-close">\n      <svg class="b-custom-push__button-close-cross">\n        <use xlink:href="#ui-cross"></use>\n      </svg>\n    </div>\n  </div>\n</div>'}.call(this,"message"in o?o.message:"undefined"!==typeof message?message:void 0,"successButton"in o?o.successButton:"undefined"!==typeof successButton?successButton:void 0),s}},function(e,t,i){e.exports=i.p+"images/icons/emodji/thumbs-up-natural.2b589ca4.png"},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a){i=i+'\n<div class="b-custom-push">\n  <div class="b-custom-push__message">'+(null==(t=s)?"":t),o&&(i=i+'<span class="b-custom-push__rubric-name">\xab'+(null==(t=a)?"":t)+"\xbb</span>"),i=i+"?\n  </div>\n  <div"+n.attr("class",n.classes(["b-custom-push__button-enable","js-enable",o?"":"no-margin"],[!1,!1,!0]),!1,!0)+">"+n.escape(null==(t=e)?"":t)+'</div>\n  <div class="b-custom-push__button-close js-close">\n    <svg class="b-custom-push__button-close-cross">\n      <use xlink:href="#ui-cross"></use>\n    </svg>\n  </div>\n</div>'}.call(this,"buttonTitle"in s?s.buttonTitle:"undefined"!==typeof buttonTitle?buttonTitle:void 0,"message"in s?s.message:"undefined"!==typeof message?message:void 0,"rubric"in s?s.rubric:"undefined"!==typeof rubric?rubric:void 0,"rubrics"in s?s.rubrics:"undefined"!==typeof rubrics?rubrics:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,s="",o=e||{};return function(e,o,a){s=s+'\n<div class="b-custom-push">\n  <div'+n.attr("class",n.classes(["b-custom-push__message",o?"":"no-margin"],[!1,!0]),!1,!0)+">"+(null==(t=e)?"":t),o&&(s=s+'<span class="b-custom-push__rubric-name">\xab'+(null==(t=a)?"":t)+"\xbb</span>"),s=s+'<img class="b-custom-push__emodji"'+n.attr("src",i(252),!0,!0)+'>\n  </div>\n  <div class="b-custom-push__button-close js-close">\n    <svg class="b-custom-push__button-close-cross">\n      <use xlink:href="#ui-cross"></use>\n    </svg>\n  </div>\n</div>'}.call(this,"message"in o?o.message:"undefined"!==typeof message?message:void 0,"rubric"in o?o.rubric:"undefined"!==typeof rubric?rubric:void 0,"rubrics"in o?o.rubrics:"undefined"!==typeof rubrics?rubrics:void 0),s}},function(e,t,i){e.exports=i.p+"images/icons/emodji/point-down.3ed6601c.png"},function(e,t,i){var n=i(2);e.exports=function(e){var t,s="",o=e||{};return function(e,o,a,r){s=s+'\n<div class="b-custom-push">\n  <div class="b-custom-push__message b-custom-push__message_success">'+(null==(t=e)?"":t),o&&(s=s+'<span class="b-custom-push__rubric-name">\xab'+(null==(t=a)?"":t)+"\xbb</span>"),s=s+'<img class="b-custom-push__emodji"'+n.attr("src",i(254),!0,!0)+">\n  </div>\n  <div"+n.attr("class",n.classes(["b-custom-push__button-sign","js-sign",o?"":"no-margin"],[!1,!1,!0]),!1,!0)+">"+n.escape(null==(t=r)?"":t)+'</div>\n  <div class="b-custom-push__button-close js-close">\n    <svg class="b-custom-push__button-close-cross">\n      <use xlink:href="#ui-cross"></use>\n    </svg>\n  </div>\n</div>'}.call(this,"message"in o?o.message:"undefined"!==typeof message?message:void 0,"rubric"in o?o.rubric:"undefined"!==typeof rubric?rubric:void 0,"rubrics"in o?o.rubrics:"undefined"!==typeof rubrics?rubrics:void 0,"successButton"in o?o.successButton:"undefined"!==typeof successButton?successButton:void 0),s}},function(e,t,i){e.exports=i.p+"images/icons/emodji/thumbs-up-yellow.1f14b14d.png"},function(e,t,i){"use strict";e.exports={main:{start:{message:"\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u0441\u0430\u043c\u044b\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445",buttonTitle:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f"},wait:{message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439"},success:{message:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0441\u0430\u043c\u044b\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445",successButton:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\u043c\u0438"}},rubrics:{start:{message:"\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e\u0431\u043e \u0432\u0441\u0435\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445 \u0432&nbsp;\u0440\u0443\u0431\u0440\u0438\u043a\u0435 ",buttonTitle:"\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f",rubric:!0},wait:{message:"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u0438\u0435<br/>\u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u0439 \u0432&nbsp;\u0440\u0443\u0431\u0440\u0438\u043a\u0435 ",rubric:!0},success:{message:"\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u043f\u0438\u0441\u0430\u043b\u0438\u0441\u044c \u043d\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0432\u0430\u0436\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445 \u0432&nbsp;\u0440\u0443\u0431\u0440\u0438\u043a\u0435 ",successButton:"\u0423\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u0438\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\u043c\u0438",rubric:!0}}}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1),o=i(3),a={timeoutForPositions:2e3,visibleMenuItems:5,widthMenuItem:176,paddingCenterMenuPosition:60};e.exports=function(){function e(t){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.settings=a,Object.assign(this.settings,t.settings),this.topicBlock=document.querySelector(".js-topic"),this.contentBlock=this.topicBlock.querySelector(".js-topic__content"),this.menuBlock=this.topicBlock.querySelector(".js-brief-menu"),this.menuList=this.menuBlock.querySelector(".js-brief-menu-list"),this.menuItems=this.menuList.querySelectorAll(".js-brief-menu-item"),this.cards=this.contentBlock.querySelectorAll(".js-numeric-card"),this.activeMenuNumber=0,this.visibleMenuElement=0,this.blockMoveNavigation=!1,this.menuLength=this.menuItems.length,this.prevNavigation=this.menuBlock.querySelector(".js-brief-menu-prev"),this.nextNavigation=this.menuBlock.querySelector(".js-brief-menu-next"),this.menuBlock&&(this.topicBlock.style.paddingTop="".concat(this.menuBlock.offsetHeight,"px"),o.components.stickycolumn&&(o.components.stickycolumn.settings.marginTopBanner=this.menuBlock.offsetHeight+30),setTimeout((function(){i.fixedMenu(),i.scrollLinkHighlight(),window.addEventListener("scroll",i.fixedMenu.bind(i)),window.addEventListener("scroll",i.scrollLinkHighlight.bind(i))}),this.settings.timeoutForPositions),this.linkToAnchor(),this.menuLength>5&&(this.bindEventNavigationButton(),this.moveInNavigationMenu()))}var t,i,r;return t=e,(i=[{key:"fixedMenu",value:function(){if(window.pageYOffset>this.getChoord(this.topicBlock).top){var e=this.getChoord(this.contentBlock).top-this.getChoord(this.topicBlock).top+this.contentBlock.offsetHeight-this.menuBlock.offsetHeight;window.pageYOffset<this.getChoord(this.topicBlock).top+e?(this.menuBlock.classList.add("_sticky"),this.menuBlock.style.top="0px"):(this.menuBlock.classList.remove("_sticky"),this.menuBlock.style.top="".concat(e,"px"))}else this.menuBlock.classList.remove("_sticky"),this.menuBlock.style.top=""}},{key:"scrollLinkHighlight",value:function(){var e=this,t=this.findSinceInEndNodes(this.cards,(function(t){return e.getChoord(t).top-e.menuBlock.clientHeight-20<=window.pageYOffset}));this.activeMenuNumber!==t&&(this.activeMenuNumber=t,Array.prototype.forEach.call(this.menuItems,(function(e,i){i<=t?e.classList.add("_readOut"):e.classList.remove("_readOut"),i===t?e.classList.add("_active"):e.classList.remove("_active")})),!this.blockMoveNavigation&&this.menuLength>5&&(this.activeMenuNumber%this.settings.visibleMenuItems===0||this.activeMenuNumber<this.visibleMenuElement)&&(this.visibleMenuElement=this.activeMenuNumber,this.moveInNavigationMenu()))}},{key:"linkToAnchor",value:function(){var e=this;Array.prototype.forEach.call(this.menuItems,(function(t){t.addEventListener("click",(function(t){t.preventDefault();var i=t.target.getAttribute("href")||t.target.querySelector("a").getAttribute("href"),n=e.contentBlock.querySelector(i);e.blockMoveNavigation=!0,s("html, body").animate({scrollTop:e.getChoord(n).top-e.menuBlock.clientHeight-15},500,(function(){e.blockMoveNavigation=!1}))}))}))}},{key:"initSlideMenu",value:function(){this.menuList.style.width="".concat(this.length*this.itemWidth,"px"),this.menuBlock.addEventListener("click",this.moveMenu.bind(this))}},{key:"bindEventNavigationButton",value:function(){var e=this;this.prevNavigation.addEventListener("click",(function(){e.visibleMenuElement-=e.settings.visibleMenuItems,e.moveInNavigationMenu()})),this.nextNavigation.addEventListener("click",(function(){e.visibleMenuElement+=e.settings.visibleMenuItems,e.moveInNavigationMenu()}))}},{key:"moveInNavigationMenu",value:function(){this.visibleMenuElement<=0?(this.visibleMenuElement=0,this.menuList.style.transform="translateX(0)",this.nextNavigation.classList.remove("_hidden"),this.prevNavigation.classList.add("_hidden")):this.visibleMenuElement>=this.menuLength-this.settings.visibleMenuItems?(this.visibleMenuElement=this.menuLength-this.settings.visibleMenuItems,this.menuList.style.transform="translateX(-".concat(this.menuList.scrollWidth-this.menuBlock.clientWidth,"px)"),this.nextNavigation.classList.add("_hidden"),this.prevNavigation.classList.remove("_hidden")):(this.menuList.style.transform="translateX(-".concat(this.visibleMenuElement*this.settings.widthMenuItem-this.settings.paddingCenterMenuPosition,"px)"),this.nextNavigation.classList.remove("_hidden"),this.prevNavigation.classList.remove("_hidden"))}},{key:"getChoord",value:function(e){var t=e.getBoundingClientRect();return{top:t.top+window.pageYOffset,left:t.left+window.pageXOffset}}},{key:"findSinceInEndNodes",value:function(e,t){for(var i=e.length-1;i>=0;i--)if(t(e[i]))return i;return-1}}])&&n(t.prototype,i),r&&n(t,r),e}()},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(4).isScrolledIntoView;e.exports=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.videos=Array.prototype.slice.call(document.querySelectorAll(t.selector),""),this.counter=0,this.eagleOrigin=t.eagleOrigin,window.addEventListener("message",this.receiveMessage.bind(this))}var t,i,o;return t=e,(i=[{key:"receiveMessage",value:function(e){e.origin===this.eagleOrigin&&"ready"===e.data.event&&(this.counter+=1,this.counter===this.videos.length&&(this.playVideos(),window.addEventListener("scroll",this.playVideos.bind(this))))}},{key:"playVideos",value:function(){this.videos.forEach((function(e){if(e.dataset.hasOwnProperty("scrollplay")){var t=e.getAttribute("visible");s(e)?"false"===t&&(e.setAttribute("visible",!0),e.contentWindow.postMessage({visible:!0},"*")):"true"===t&&(e.setAttribute("visible",!1),e.contentWindow.postMessage({visible:!1},"*"))}}))}}])&&n(t.prototype,i),o&&n(t,o),e}()},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s={box:".js-tv-video",frame:".js-eagleplatform-video",closeBtn:".js-tv-video__close",topicContent:".js-topic__text"};e.exports=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.tvBox=document.querySelector(s.box),this.tvVideo=this.tvBox.querySelector(s.frame),this.tvCloseBtn=document.querySelector(s.closeBtn),this.topicContent=document.querySelector(s.topicContent),this.show=this.show.bind(this),this.tvVideo.addEventListener("load",(function(){window.addEventListener("scroll",t.show)}))}var t,i,o;return t=e,(i=[{key:"show",value:function(){this.topicContent.getBoundingClientRect().top<0&&(window.removeEventListener("scroll",this.show),this.tvCloseBtn.addEventListener("click",this.hide.bind(this)),this.tvBox.classList.remove("_hidden"),this.tvVideo.setAttribute("visible",!0),this.tvVideo.dataset.hasOwnProperty("autoplay")&&this.tvVideo.contentWindow.postMessage({visible:!0},"*"))}},{key:"hide",value:function(){this.tvBox.classList.add("_hidden"),this.tvVideo.parentNode.removeChild(this.tvVideo)}}])&&n(t.prototype,i),o&&n(t,o),e}()},function(e,t,i){"use strict";e.exports=function(e){Array.prototype.forEach.call(document.querySelectorAll(e.nodeSelector),(function(t){t.querySelector(e.filterSelector)&&Array.prototype.forEach.call(t.querySelectorAll("a"),(function(e){e.addEventListener("click",(function(){window.yaCounter27714477&&window.yaCounter27714477.reachGoal("vtbclick")}))}))}))}},function(e,t,i){"use strict";function n(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}var s=i(3);e.exports=function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),n(this,"getData",(function(e){var i=e.dataset.gameId,n=new XMLHttpRequest,s="/parts/coef/".concat(i);n.open("GET",s,!0),n.onload=function(){if(200===n.status){var s=JSON.parse(n.responseText),o=void 0!==s[i]?t.coefBlockTemplate(s[i]):t.coefMissingTemplate();e.parentNode.insertBefore(o,e),t.addYMetricaToCoefs(o)}},n.send()})),n(this,"addYMetricaToCoefs",(function(e){var t=e.querySelectorAll(".b-board__coef-item");Array.prototype.forEach.call(t,(function(e){return e.addEventListener("click",(function(){return window.yaCounter27714477&&window.yaCounter27714477.reachGoal(s.settings.is_mobile?"koef_mob":"koef_desc")}))}))})),n(this,"addYMetricaToBonusButton",(function(){var e=document.querySelector(".b-board__brand-btn");e&&e.addEventListener("click",(function(){return window.yaCounter27714477&&window.yaCounter27714477.reachGoal(s.settings.is_mobile?"bonus_mob":"bonus_desc")}))})),n(this,"coefMissingTemplate",(function(){var e=document.createElement("a"),t="https://www.olimp.bet/welcome_bonus/?utm_medium=refer&utm_source=lenta.ru&utm_campaign=refer_lenta.ru_rkolimp_coef_main&utm_content=coef_main&";return t+=s.settings.is_mobile?"utm_term=mob_land-wb":"utm_term=des_land-wb",e.classList.add("b-board__coef"),e.setAttribute("href",t),e.setAttribute("target","_blank"),e.innerHTML="<div class='b-board__coef-stub'>\n        <span class='b-board__coef-link'>\u0421\u043b\u0435\u0434\u0438 \u0437\u0430 \u043a\u043e\u044d\u0444\u0444\u0438\u0446\u0438\u0435\u043d\u0442\u0430\u043c\u0438</span>\n        <svg class='b-board__coef-icon' width='10' height='8' viewBox='0 0 10 7' fill='none' xmlns='http://www.w3.org/2000/svg'>\n          <path d='M5 6.5L10 3.5L5 0.44V3H0V4H5V6.5Z' fill='currentColor'/>\n        </svg>\n      </div>",e})),n(this,"coefBlockTemplate",(function(e){var t=document.createElement("a"),i="https://www.olimp.bet/welcome_bonus/?utm_medium=refer&utm_source=lenta.ru&utm_campaign=refer_lenta.ru_rkolimp_coef_main&utm_content=coef_main&";return i+=s.settings.is_mobile?"utm_term=mob_land-wb":"utm_term=des_land-wb",t.classList.add("b-board__coef"),t.setAttribute("href",i),t.setAttribute("target","_blank"),t.innerHTML="<div class='b-board__coef-item _win1'>\n        <span class='b-board__coef-key'>\u041f1</span>\n        <span class='b-board__coef-value'>".concat(e.f,"</span>\n      </div>\n      <div class='b-board__coef-item _draw'>\n        <span class='b-board__coef-key'>X</span>\n        <span class='b-board__coef-value'>").concat(e.d,"</span>\n      </div>\n      <div class='b-board__coef-item _win2'>\n        <span class='b-board__coef-key'>\u041f2</span>\n        <span class='b-board__coef-value'>").concat(e.s,"</span>\n      </div>"),t})),this.gameCards=document.querySelectorAll(".js-board-item-anchor"),this.utm=s.settings.is_mobile?"?utm_medium=refer&utm_source=lenta.ru&utm_campaign=refer_lenta.ru_rkolimp_coef_main&utm_content=coef_main&utm_term=mob_land-line":"?utm_medium=refer&utm_source=lenta.ru&utm_campaign=refer_lenta.ru_rkolimp_coef_main&utm_content=coef_main&utm_term=des_land-line",Array.prototype.forEach.call(this.gameCards,(function(e){return t.getData(e)})),this.addYMetricaToBonusButton()}},function(e,t,i){"use strict";function n(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var s=i(1);e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.speed=200,this.onAnnounceToggler=this.onAnnounceToggler.bind(this);for(var t=document.querySelectorAll(".js-announce__toggler"),i=0;i<t.length;i++)t[i].addEventListener("click",this.onAnnounceToggler)}var t,i,o;return t=e,(i=[{key:"onAnnounceToggler",value:function(){s(".announce").toggle(2*this.speed),s(".announce").find(".announce-toggler").toggleClass("gallery_description_hover")}}])&&n(t.prototype,i),o&&n(t,o),e}()},function(e,t,i){"use strict";var n=i(17),s=i(263);e.exports=n.extend({hash:"#action-fade",selectors:null,animate:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;s(this.selectors,e,t)}})},function(e,t,i){"use strict";var n=i(1);e.exports=function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,s=e.reduce((function(e,t){var i=n(t);return i.length&&e.push(i),e}),[]);s.forEach((function(e,i){e.each((function(e,s){var o=n(s);o.attr("data-fade-".concat(t?"in":"out"),!0),!0!==o.data("fadeCustom")&&o.css({transition:"".concat(.2,"s opacity ease-in"),transitionDelay:"".concat(.2*i,"s"),opacity:t?1:0})}))})),i&&setTimeout(i,1e3*(.2*s.length+.2))}},function(e,t,i){"use strict";var n=i(17),s=i(265);i(278),e.exports=n.extend({active:!0,layout:!1,name:"search:desktop",settings:{},initialize:function(e){this.settings=e||{},this.layout=new s({settings:this.settings}),this.active&&this.start()},start:function(){return this.trace("Start timeline"),this.active=!0,this.trigger("start"),this},finish:function(){return this.trace("Finish timeline"),this.active=!1,this.trigger("finish"),this}})},function(e,t,i){"use strict";var n=i(7),s=i(266),o=i(267),a=i(268),r=i(12),l=i(269),c=i(271),u=i(273),h=i(275);e.exports=n.LayoutView.extend({el:".js-search",events:{"click #js-search__settings":"searchFilterToggle","click .js-search__phrase-checkbox":"searchPhraseToggle","click .js-search__submit":"search","keypress .b-search__input-desktop":"keyPress"},regions:{searchFormRegion:".js-search__filter",contentSummaryRegion:".js-search__summary",contentResultsRegion:".js-search__list",clearPhraseRegion:".js-search__phrase",paginatorRegion:".js-search__paginator"},initialize:function(e){var t=this;this.filters=new o(e.settings),this.collection=new a,this.buffer=new s,this.buffer.init({collection:this.collection});var i=e.settings.rubrics.reduce((function(e,t){return e[t.id]=t.url,e}),{});new r.Input({el:this.$el.find(".b-search__input-desktop"),name:"query",model:this.buffer,debounce:1e4}),this.searchFormRegion.show(new l({buffer:this.buffer,model:this.filters})),this.contentSummaryRegion.show(new c({model:this.buffer})),this.contentResultsRegion.show(new h({collection:this.collection,filters:this.filters,urls:i})),this.paginatorRegion.show(new u({model:this.buffer.result,filter:this.buffer})),this.clearPhraseRegion.show(new r.Checkbox({name:"title_only",model:this.buffer,text:"\u0442\u043e\u0447\u043d\u0430\u044f \u0444\u0440\u0430\u0437\u0430 \u0432 \u0437\u0430\u0433\u043e\u043b\u043e\u0432\u043a\u0435",debounce:300})),this.buffer.result.on("search:request:start",(function(){t.$el.find(".b-search__loader").show()})),this.buffer.result.on("search:request:stop",(function(){t.$el.find(".b-search__loader").hide()}))},searchFilterToggle:function(e){e.preventDefault(),this.$el.find(".b-search__filter").toggle()},keyPress:function(e){13===e.keyCode&&(this.search(),e.preventDefault())},search:function(){this.buffer.set({query:this.$el.find(".b-search__input-desktop").val(),from:0,size:10,domain:1,"modified,format":"yyyy-MM-dd"})},searchPhraseToggle:function(e){switch(e.currentTarget.checked){case!0:this.buffer.set("title_only",1);break;case!1:this.buffer.set("title_only",0)}}})},function(e,t,i){"use strict";var n=i(11),s=i(0),o=s.Model.extend({urlRoot:"/search/v2/process"}),a=["action-fade"];e.exports=s.Model.extend({defaults:{from:0,size:10,sort:2,title_only:0,domain:1,"modified,format":"yyyy-MM-dd"},init:function(e){var t=this;!function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(){},n=t.parseUrl();n&&t.set(n,{silent:e}),i(n)}(!0,(function(){t.result=new o,t.resultsCollecton=e.collection||new s.Collection,t.changeUrl()})),this.on("change",this.changeUrl),window.history.pushState&&!window.onpopstate&&(window.onpopstate=function(e){t.set(e.state)})},changeUrl:function(){var e=function(e){var t=n.omit(e,["query"]),i=[];return Object.keys(t).forEach((function(e){t[e]&&i.push([e,t[e]].join("="))})),"#"+i.join("|")},t=this.toJSON();return window.history.pushState&&document.location.hash?window.history.pushState(t,null,"/search?query="+t.query+e(t)):document.location.replace("/search?query="+t.query+e(t)),this.load()},parseUrl:function(){var e={},t=document.location.hash.slice(1).split("|"),i=function(e){return decodeURIComponent((e+"").replace(/\+/g,"%20"))};document.location.hash&&(e=t.map((function(e){return e.split("=")})).reduce((function(e,t){return e[t[0]]=i(t[1]),e}),{}));var s=n.omit(e,a);return s.query=i(document.location.search.split("=")[1]),s},formatter:function(){var e={};return(e=this.toJSON()).title_only=e.title_only?1:0,e},load:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"reset",i=this.formatter();i&&i.query&&(this.result.trigger("search:request:start",this),this.result.fetch({data:i}).success((function(i){e.result.trigger("search:request:stop",e),"add"===t?e.resultsCollecton.add(i.matches):e.resultsCollecton.reset(i.matches)})))}})},function(e,t,i){"use strict";var n=i(0);e.exports=n.Model.extend({initialize:function(e){this.set("topics_types",e.topics_types),this.set("rubrics",e.rubrics.reduce((function(e,t){return e[t.id]=t.title,e}),{})||{})}})},function(e,t,i){"use strict";var n=i(0);e.exports=n.Collection.extend({})},function(e,t,i){"use strict";var n=i(0),s=i(7),o=i(12);e.exports=s.LayoutView.extend({idAttribute:"search-options",className:"b-search-options",regions:{typesRegion:".b-search-options__types",blocksRegion:".b-search-options__blocks",dateFromRegion:".b-search-options__dates-from",dateToRegion:".b-search-options__dates-to"},template:i(270),initialize:function(e){this.model=e.model||new n.Model,this.buffer=e.buffer||new n.Model},onRender:function(){this.typesRegion.show(new o.Select({placeholder:"\u0412\u0441\u0435 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b",name:"type",model:this.buffer,options:this.model.get("topics_types"),idAttribute:"topic-types",debounce:100})),this.blocksRegion.show(new o.Select({placeholder:"\u0412\u0441\u0435 \u0440\u0443\u0431\u0440\u0438\u043a\u0438",name:"bloc",model:this.buffer,options:this.model.get("rubrics"),idAttribute:"topic-blocks",debounce:100})),this.dateFromRegion.show(new o.Date({name:"modified,from",model:this.buffer,input:{debounce:2e3,attributes:{placeholder:"\u0433\u0433\u0433\u0433-\u043c\u043c-\u0434\u0434"}},calendar:{format:"YYYY-MM-DD",maxDate:new Date,minDate:new Date("January 01, 2006")}})),this.dateToRegion.show(new o.Date({name:"modified,to",model:this.buffer,input:{debounce:2e3,attributes:{placeholder:"\u0433\u0433\u0433\u0433-\u043c\u043c-\u0434\u0434"}},calendar:{format:"YYYY-MM-DD",maxDate:new Date,minDate:new Date("January 01, 2006")}}))}})},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="b-search-options__types"></div>\n<div class="b-search-options__blocks"></div>\n<div class="b-search-options__dates"><span class="group">\u0421\n    <div class="b-search-options__dates-from"></div></span><span class="group">\u041f\u043e\n    <div class="b-search-options__dates-to"></div></span></div>'}},function(e,t,i){"use strict";var n=i(1),s=i(0),o=i(7);e.exports=o.ItemView.extend({className:"b-search__result-summary",template:i(272),events:{"click .b-search__result-summary-controls a":"sort"},templateHelpers:function(){var e=this;return{query:this.model.get("query"),total:this.model.result.get("total_found"),arrowDirection:function(){return 3===e.model.get("sort")?"up":"down"},sortClass:function(t){var i="";return"relevant"===t&&1===e.model.get("sort")&&(i="active"),"date"===t&&e.model.get("sort")>=2&&(i="active"),i},count:function(){return e.plural(e.model.result.get("total_found"),"\u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u044f \u0441\u043e\u0432\u043f\u0430\u0434\u0435\u043d\u0438\u0439")}}},initialize:function(e){this.model=e.model||new s.Model,this.model.result.on("change",this.render,this)},sort:function(e){var t=this;switch(n(e.currentTarget).hasClass("active")||n(e.currentTarget).addClass("b-search__result-summary-controls--underscored"),n(e.currentTarget).attr("data-sort")){case"relevant":n(e.currentTarget),t.model.set("sort",1);break;default:n(e.currentTarget),t.model.get("sort")>1&&2===t.model.get("sort")?t.model.set("sort",3):t.model.set("sort",2)}},plural:function(e,t){var i=t.split(" ");return[e,e%10===1&&e%100!==11?i[0]:e%10>=2&&e%10<=4&&(e%100<10||e%100>=20)?i[1]:i[2]].join(" ")}})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a,r){r>0?i=i+'\n<div class="b-search__result-summary-header">\n  <h3>\u041f\u043e \u0437\u0430\u043f\u0440\u043e\u0441\u0443 <strong>\xab'+n.escape(null==(t=o)?"":t)+"\xbb </strong>\u043d\u0430\u0439\u0434\u0435\u043d\u043e "+n.escape(null==(t=s())?"":t)+'</h3>\n</div>\n<div class="b-search__result-summary-controls"><span>\u0421\u043e\u0440\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c: <a'+n.attr("class",n.classes([a("relevant"),"b-search__control-relevation"],[!0,!1]),!1,!0)+' href="javascript:;" data-sort="relevant">\u043f\u043e \u0440\u0435\u043b\u0435\u0432\u0430\u043d\u0442\u043d\u043e\u0441\u0442\u0438</a><a'+n.attr("class",n.classes([a("date"),"b-search__control-date"],[!0,!1]),!1,!0)+' href="javascript:;"'+n.attr("data-arrow",e(),!0,!0)+">\u043f\u043e \u0434\u0430\u0442\u0435</a></span></div>":i+="<span>\u041f\u043e\u0438\u0441\u043a \u043d\u0435 \u0434\u0430\u043b \u0440\u0435\u0437\u0443\u043b\u044c\u0442\u0430\u0442\u043e\u0432</span>"}.call(this,"arrowDirection"in s?s.arrowDirection:"undefined"!==typeof arrowDirection?arrowDirection:void 0,"count"in s?s.count:"undefined"!==typeof count?count:void 0,"query"in s?s.query:"undefined"!==typeof query?query:void 0,"sortClass"in s?s.sortClass:"undefined"!==typeof sortClass?sortClass:void 0,"total"in s?s.total:"undefined"!==typeof total?total:void 0),i}},function(e,t,i){"use strict";var n=i(1),s=i(7);e.exports=s.LayoutView.extend({className:"b-paginator__container",template:i(274),events:{"click .js-search__paginator-prev":"prev","click .js-search__paginator-next":"next"},initialize:function(e){var t=this;this.model=e.model,this.filter=e.filter;var i=function(){t.check("prev")?t.$el.find(".js-search__paginator-prev").removeClass("b-paginator__prev--disabled"):t.$el.find(".js-search__paginator-prev").addClass("b-paginator__prev--disabled"),t.check("next")?t.$el.find(".js-search__paginator-next").removeClass("b-paginator__next--disabled"):t.$el.find(".js-search__paginator-next").addClass("b-paginator__next--disabled")};this.model.on("request",(function(){n("html, body").animate({scrollTop:"0px"}),i()})),this.model.on("change",(function(e){e.get("total_found")<=t.filter.get("size")?t.$el.hide():t.$el.show(),i()}),this)},check:function(e){var t=!1,i=parseInt(this.model.get("total_found")/this.filter.get("size"),10);return"prev"===e&&this.filter.get("from")>1&&(t=!0),"next"===e&&this.filter.get("from")<i*this.filter.get("size")&&(t=!0),t},prev:function(){return!!this.check("prev")&&this.filter.set("from",parseInt(this.filter.get("from"),10)-parseInt(this.filter.get("size"),10))},next:function(){return!!this.check("next")&&this.filter.set("from",parseInt(this.filter.get("from"),10)+parseInt(this.filter.get("size"),10))}})},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="b-paginator__prev b-paginator__prev--disabled js-search__paginator-prev">\u2190 \u041e\u0431\u0440\u0430\u0442\u043d\u043e</div>\n<div class="b-paginator__next js-search__paginator-next">\u0414\u0430\u043b\u044c\u0448\u0435 \u2192</div>'}},function(e,t,i){"use strict";var n=i(0),s=i(7),o=i(276);e.exports=s.CollectionView.extend({className:"b-search__result-list",childView:o,childViewOptions:{},initialize:function(e){this.collection=e.collection||n.Collection,this.childViewOptions.filters=e.filters||n.Model,this.childViewOptions.urls=e.urls||{}}})},function(e,t,i){"use strict";var n=i(0),s=i(7);e.exports=s.ItemView.extend({className:"b-search__result-item",templateHelpers:function(){var e=this;return{type:function(){return e.filters.get("topics_types")[e.model.get("type")]},rubric:function(){return!!e.filters.get("rubrics")[e.model.get("bloc")]&&e.filters.get("rubrics")[e.model.get("bloc")]},link:function(){return e.urls[e.model.get("bloc")]},date:function(){var t=new Date(1e3*e.model.get("modified")),i="\u044f\u043d\u0432\u0430\u0440\u044f \u0444\u0435\u0432\u0440\u0430\u043b\u044f \u043c\u0430\u0440\u0442\u0430 \u0430\u043f\u0440\u0435\u043b\u044f \u043c\u0430\u044f \u0438\u044e\u043d\u044f \u0438\u044e\u043b\u044f \u0430\u0432\u0433\u0443\u0441\u0442\u0430 \u0441\u0435\u043d\u0442\u044f\u0431\u0440\u044f \u043e\u043a\u0442\u044f\u0431\u0440\u044f \u043d\u043e\u044f\u0431\u0440\u044f \u0434\u0435\u043a\u0430\u0431\u0440\u044f".split(" ");return[t.getDate(),i[t.getMonth()],t.getFullYear()].join(" ")}}},template:i(277),initialize:function(e){this.urls=e.urls||{},this.filters=e.filters||new n.Model}})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a,r,l,c){i=i+'\n<div class="b-search__result-item-header"><span class="source">'+n.escape(null==(t="\u041f\u0440\u0435\u0441\u0441-\u0440\u0435\u043b\u0438\u0437"!==l()?l()+":":l())?"":t)+"</span>",s()?i=i+"<a"+n.attr("href",s(),!0,!0)+' target="_blank">'+n.escape(null==(t=o())?"":t)+"</a>":"\u041f\u0440\u0435\u0441\u0441-\u0440\u0435\u043b\u0438\u0437"!==l()&&(i+="<span><b>\u0410\u0440\u0445\u0438\u0432\u043d\u0430\u044f \u0440\u0443\u0431\u0440\u0438\u043a\u0430</b></span>"),i=i+'<span class="date">'+n.escape(null==(t=e())?"":t)+'</span>\n</div>\n<div class="b-search__result-item-title"><a'+n.attr("href",c,!0,!0)+' target="_blank">'+n.escape(null==(t=r)?"":t)+'</a></div>\n<div class="b-search__result-item-snippet">'+(null==(t=a)?"":t)+'</div>\n<div class="b-search__result-item-url"><a'+n.attr("href",c,!0,!0)+' target="_blank">'+n.escape(null==(t=c)?"":t)+"</a></div>"}.call(this,"date"in s?s.date:"undefined"!==typeof date?date:void 0,"link"in s?s.link:"undefined"!==typeof link?link:void 0,"rubric"in s?s.rubric:"undefined"!==typeof rubric?rubric:void 0,"snippet"in s?s.snippet:"undefined"!==typeof snippet?snippet:void 0,"title"in s?s.title:"undefined"!==typeof title?title:void 0,"type"in s?s.type:"undefined"!==typeof type?type:void 0,"url"in s?s.url:"undefined"!==typeof url?url:void 0),i}},function(e,t,i){},function(e,t,i){"use strict";var n=i(280),s=i(17),o=i(297),a=i(325);i(328),e.exports=s.extend({active:!1,type:"",cdnDomain:"",fayeUrl:"",totalPagesCount:0,itemsPerPage:0,currentPage:0,commentsData:[],authorsData:[],timelineData:[],allowedBoxTypes:[],faye:null,wall:null,status:null,initialize:function(){this.faye=new n.Client(this.fayeUrl),this.wall=new o({module:this}),this.status=new a({module:this}),this.active&&this.start()},getBaseUrl:function(){return document.location.pathname.replace(/\/page\d+/,"").replace(/\/$/,"")},getSubscribeChannel:function(e){return"".concat(this.getBaseUrl(),"/").concat(e)},isSingleAuthor:function(){return this.authorsData&&1===this.authorsData.length},isBoxAllowed:function(e){return _.contains(this.allowedBoxTypes,e)},getCloudUrl:function(e){return e?this.cdnDomain?"//".concat(this.cdnDomain).concat(e):e:""},start:function(){return this.trace("Start timeline"),this.active=!0,this.trigger("start"),this},finish:function(){return this.trace("Finish timeline"),this.active=!1,this.trigger("finish"),this}})},,,,,,,,,,,,,,,,,,function(e,t,i){"use strict";var n=i(11),s=i(0),o=i(298),a=i(299),r=i(312),l=i(319),c=i(322);e.exports=s.Model.extend({module:null,initialize:function(e){this.module=e.module,this.view=new o({model:this}),this.comments=new r(this.module.commentsData,{model:a,module:this.module}),this.notification=new l({module:this.module}),this.pagination=new c({module:this.module}),this.listenTo(this.module,"start",n.bind(this.subscribe,this)),this.listenTo(this.module,"finish",n.bind(this.unsubscribe,this))},subscribe:function(){return this.module.faye.subscribe(this.getSubscribeChannel(),n.bind(this.receiveComment,this))},unsubscribe:function(){return this.module.faye.unsubscribe(this.getSubscribeChannel())},getSubscribeChannel:function(){return this.module.getSubscribeChannel("paragraphs")},receiveComment:function(e){var t,i;this.module.trace("Receive comment #".concat(e.id,".")),0===this.pagination.get("currentPage")?(t=this.comments.get(e.id))?t.set(e):(e.is_new=!0,this.comments.add(e)):this.module.trigger("newest"),i=Math.ceil((e.total_count||1)/this.module.itemsPerPage),this.pagination.get("pagesCount")!==i&&this.pagination.set({pagesCount:i})}})},function(e,t,i){"use strict";var n=i(7);e.exports=n.ItemView.extend({el:".js-timeline:first",template:!1})},function(e,t,i){"use strict";var n=i(11),s=i(300),o=i(0),a=i(304);e.exports=o.Model.extend({initialize:function(){this.refresh(),this.on("change",this.refresh)},refresh:function(){this.collection.module.trace("Refresh comment model #".concat(this.id,".")),this.refreshBox(),this.refreshContentType(),this.refreshPosition(),this.refreshLabel(),this.refreshAuthor(),this.trigger("refresh"),this.collection.refresh()},refreshBox:function(){if(!this.get("is_deleted")&&this.get("box")){var e=this.get("box"),t="undefined"!==typeof e.type&&e.type?s(e.type.split("::")[1]):"default";this.collection.module.isBoxAllowed(t)&&(this.box=new a(n.extend({},e,{module:this.module,comment:this,type:t})))}},refreshContentType:function(){var e,t=this.get("markdown_body");if(t)switch(!0){case-1!==t.indexOf('class="fb-'):e="facebook";break;case-1!==t.indexOf('class="instagram-media"'):e="instagram";break;default:e="defaults"}else e="defaults";this.set({contentType:e},{silent:!0})},refreshPosition:function(){var e=1e3*this.get("position")+parseFloat((Math.log(this.id)/Math.log(10)).toFixed(4));this.set({id_position:e},{silent:!0})},refreshLabel:function(){var e=this.get("label");/^(\d+|\d+\+\d+)$/.test(e)&&this.set({label:"".concat(e,"'")},{silent:!0})},refreshAuthor:function(){var e=this.get("author_id"),t=n.find(this.collection.module.authorsData,(function(t){return t.id===e}));t&&this.set({author:t,box_author:t.box_author},{silent:!0})}})},,,,,function(e,t,i){"use strict";var n=i(0),s={external_video:i(305),gallery:i(98),gif_gallery:i(307),quote:i(308),snippet:i(309),social:i(90),text:i(310),video:i(311)};e.exports=n.Model.extend({comment:null,module:null,initialize:function(e){this.comment=e.comment,this.module=e.module,"undefined"===typeof s[this.get("type")]&&this.module.error("Can't find view model for box with type ".concat(this.get("type"),"."));var t=s[this.get("type")];this.view=new t({model:this})}})},function(e,t,i){"use strict";var n=i(90),s=i(92);e.exports=n.extend({template:s})},function(e,t,i){i(2);e.exports=function(e){return""}},function(e,t,i){"use strict";var n=i(98),s=i(93);e.exports=n.extend({template:s,serializeData:function(){var e=this,t=this.model.toJSON();return t.componentsData=[],_.each(t.components,(function(i){i.gif.full_url=e.model.comment.collection.module.getCloudUrl(i.gif.rel_url),t.componentsData.push({preview_url:i.gif.full_url,alt:i.alt,caption:i.caption,credits:i.credits})})),t}})},function(e,t,i){"use strict";var n=i(23),s=i(94);e.exports=n.extend({template:s})},function(e,t,i){"use strict";var n=i(23),s=i(95);e.exports=n.extend({template:s})},function(e,t,i){"use strict";var n=i(23),s=i(96);e.exports=n.extend({template:s})},function(e,t,i){"use strict";var n=i(23),s=i(97);e.exports=n.extend({template:s})},function(e,t,i){"use strict";var n=i(0),s=i(313);e.exports=n.Collection.extend({module:null,initialize:function(e,t){this.module=t.module,this.view=new s({collection:this}),this.on("add delete",this.refresh)},comparator:function(e,t){var i=parseFloat(e.get("id_position")),n=parseFloat(t.get("id_position"));switch(!0){case i<n:return 1;case i>n:return-1;default:return 0}},refresh:function(){this.module.trace("Refresh comments collection model.");var e=this.length-this.module.itemsPerPage;e>0&&this.remove(this.last(e)),this.sort(),this.trigger("refresh")}})},function(e,t,i){"use strict";var n=i(7),s=i(314);e.exports=n.CollectionView.extend({el:".js-timeline-comments:first",childView:s,initialize:function(){this.render()},onRender:function(){this.collection.module.trace("Render comments collection view.")}})},function(e,t,i){"use strict";var n=i(11),s=i(7),o=i(315),a={defaults:i(316),facebook:i(317),instagram:i(318)};e.exports=s.ItemView.extend({tagName:"li",className:"b-timeline-comment",template:o,modelEvents:{refresh:"render refresh"},initialize:function(e){var t=$("#comment_".concat(e.model.id));t.length&&this.setElement(t)},onRender:function(){if(this.model.collection.module.trace("Refresh comment view #".concat(this.model.id,".")),this.isVisible()){if(this.model.box&&(this.model.box.view.render(),this.$el.append(this.model.box.view.$el),"chronicle"===this.model.collection.module.type))switch(this.model.box.get("type")){case"text":this.$el.addClass("b-timeline-comment_".concat("left"===this.model.box.get("align")?"left":"right"));break;case"gallery":case"video":this.$el.addClass("b-timeline-comment_wide")}}else this.$el.addClass("b-timeline-comment_hidden")},refresh:function(){this.$el.attr("id","comment_".concat(this.model.id)),this.$el.toggleClass("b-timeline-comment_extra",!!this.model.get("is_extra")),this.$el.toggleClass("b-timeline-comment_new",!!this.model.get("is_new")),this.$el.toggleClass("b-timeline-comment_hidden",!!this.model.get("is_deleted")),this.model.get("is_new")&&this.model.set({is_new:!1},{silent:!0})},isVisible:function(){return!this.model.get("is_deleted")&&(!this.model.get("box_id")||this.model.box)},compileContent:function(e){var t=this.model.get("contentType");return"undefined"===typeof a[t]&&this.model.collection.module.error('Unable to get template for content with type "'.concat(t,'".')),a[t](e)},serializeData:function(){var e=this.model.toJSON();return e.content=this.compileContent(e),e.isSingleAuthor=this.model.collection.module.isSingleAuthor(),e},onBeforeDestroy:function(){return this.boxView&&this.boxView.destroy(),this},delete:function(e){e?this.$el.fadeOut(e,n.bind(this.remove,this)):this.remove()}})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a,r,l){i+="\n\x3c!-- comment author picture element--\x3e",!a&&s&&(i+='\n<div class="b-timeline-comment__userpic border_#{author.id}">',s.versions&&s.versions.online&&(i=i+'<img class="attribute"'+n.attr("src",s.versions.online.full_url,!0,!0)+">"),i+="\n</div>"),i+="\n\x3c!-- comment title element--\x3e",(r||e||l&&l.length>0)&&(i+='\n<div class="b-timeline-comment__info">',r&&(i=i+'\n  <div class="label">'+n.escape(null==(t=r)?"":t)+"</div>"),e&&(i=i+'\n  <div class="author">'+n.escape(null==(t=e.name)?"":t)+"</div>"),l&&l.length>0&&function(){var e=l;if("number"==typeof e.length)for(var t=0,n=e.length;t<n;t++){2==e[t].id&&(i+='<span class="b-online-player__event">\n    <svg class="b-online-player__event__icon b-online-player__event__icon--chat">\n      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_goal"></use>\n    </svg></span>')}else{n=0;for(var t in e){n++,2==e[t].id&&(i+='<span class="b-online-player__event">\n    <svg class="b-online-player__event__icon b-online-player__event__icon--chat">\n      <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_goal"></use>\n    </svg></span>')}}}.call(this),i+="\n</div>"),i=i+"\n\x3c!-- comment content element--\x3e"+(null==(t=o)?"":t)}.call(this,"author"in s?s.author:"undefined"!==typeof author?author:void 0,"box_author"in s?s.box_author:"undefined"!==typeof box_author?box_author:void 0,"content"in s?s.content:"undefined"!==typeof content?content:void 0,"isSingleAuthor"in s?s.isSingleAuthor:"undefined"!==typeof isSingleAuthor?isSingleAuthor:void 0,"label"in s?s.label:"undefined"!==typeof label?label:void 0,"online_attrs"in s?s.online_attrs:"undefined"!==typeof online_attrs?online_attrs:void 0),i}},function(e,t,i){i(2);e.exports=function(e){var t,i="",n=e||{};return function(e){e&&(i=i+'\n<div class="b-timeline-comment__text">'+(null==(t=e)?"":t)+"</div>")}.call(this,"markdown_body"in n?n.markdown_body:"undefined"!==typeof markdown_body?markdown_body:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s){if(s){i+="\n\x3c!-- generate unique iframe id--\x3e";var o="das87df6340fy2fc9v7543"+e;i+="\n\x3c!-- prepare comment content - encode quotes, remove new lines, encode script tags--\x3e";var a=s.replace(/"/g,'\\"').replace(/\n/g,"").replace("<\/script>",'</scr" + "ipt>').replace("<script",'<scr" + "ipt');i=i+'\n\x3c!-- render iframe node--\x3e\n<iframe class="b-timeline-comment__iframe"'+n.attr("id",o,!0,!0)+' height="1px"></iframe>\n<script type="text/javascript">\n  // encapsulate iframe scripts\n  (function() {\n    // fetch iframe dom object\n    var iframe = document.getElementById(\''+n.escape(null==(t=o)?"":t)+"');\n    var iframeDocument = iframe.contentWindow.document;\n  \n    // generate iframe message callback\n    window."+n.escape(null==(t=o)?"":t)+' = function(width, height) {\n      iframe.width = width;\n      iframe.height = height;\n    };\n  \n    // generate iframe document message event listener\n    var handler =\n      "window.addEventListener(\'message\', function (event) {" +\n        "if(event.origin === \'https://staticxx.facebook.com\' && event.data.indexOf(\'type=resize\') >= 0) { " +\n          "var width = parseInt(/width=([^&]+)/.exec(event.data)[1]); " +\n          "var height = parseInt(/height=([^&]+)/.exec(event.data)[1]); " +\n          "window.parent.'+n.escape(null==(t=o)?"":t)+'(width, height); " +\n        "}" +\n      "}, false);";\n  \n    // write content in iframe\n    iframeDocument.open();\n    iframeDocument.write(\n      "<html style=\'padding: 0; margin: 0;\'>"\n        + "<head><scr" + "ipt type=\'text/javascript\'>window.initialize = function() {" + handler + "};</scr" + "ipt></head>"\n        + "<body onload=\'window.initialize();\' style=\'padding: 0; margin: 0;\'>'+(null==(t=a)?"":t)+'</body>"\n      + "</html>");\n    iframeDocument.close();\n  })();\n<\/script>'}}.call(this,"id"in s?s.id:"undefined"!==typeof id?id:void 0,"markdown_body"in s?s.markdown_body:"undefined"!==typeof markdown_body?markdown_body:void 0),i}},function(e,t,i){i(2);e.exports=function(e){var t,i="",n=e||{};return function(e){e&&(i=i+'\n<div class="b-timeline-comment__text">'+(null==(t=e)?"":t)+"</div>\n<script type=\"text/javascript\">\n  // parse instagram widgets\n  if (typeof window.instgrm != 'undefined') {\n    window.instgrm.Embeds.process();\n  }\n<\/script>")}.call(this,"markdown_body"in n?n.markdown_body:"undefined"!==typeof markdown_body?markdown_body:void 0),i}},function(e,t,i){"use strict";var n=i(11),s=i(0),o=i(320);e.exports=s.Model.extend({module:null,defaults:{content:null},initialize:function(e){this.module=e.module,this.view=new o({model:this}),this.listenTo(this.module,"newest",n.bind(this.onNewComments,this)),this.listenTo(this.module,"finish",n.bind(this.onTimelineFinish,this))},onNewComments:function(){this.set("content","\u041f\u043e\u044f\u0432\u0438\u043b\u0438\u0441\u044c <a href='".concat(this.module.getBaseUrl(),"/'>\u043d\u043e\u0432\u044b\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0438</a>"))},onTimelineFinish:function(){this.set("content","".concat("online"===this.module.type?"\u041e\u043d\u043b\u0430\u0439\u043d \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d.":"\u0425\u0440\u043e\u043d\u0438\u043a\u0430 \u0437\u0430\u043a\u043e\u043d\u0447\u0435\u043d\u0430."," \u0421\u043f\u0430\u0441\u0438\u0431\u043e, \u0447\u0442\u043e \u0431\u044b\u043b\u0438 \u0441 \u043d\u0430\u043c\u0438!"))}})},function(e,t,i){"use strict";var n=i(7),s=i(321);e.exports=n.ItemView.extend({tagName:"li",template:s,className:"b-timeline-comment b-timeline-comment_notify",modelEvents:{change:"render"},onRender:function(){this.model.module.wall.comments.view.$el.prepend(this.$el)}})},function(e,t,i){i(2);e.exports=function(e){var t,i="",n=e||{};return function(e){i=i+'\n<div class="b-timeline-comment__text">'+(null==(t=e)?"":t)+"</div>"}.call(this,"content"in n?n.content:"undefined"!==typeof content?content:void 0),i}},function(e,t,i){"use strict";var n=i(0),s=i(323);e.exports=n.Model.extend({module:null,defaults:{pagesLimit:5,pagesAverage:2,currentPage:null,pagesCount:null,isPaginationVisible:!1},initialize:function(e){this.module=e.module,this.set({currentPage:this.module.currentPage,pagesCount:this.module.totalPagesCount,active:this.module.active},{silent:!0}),this.view=new s({model:this}),this.refresh(),this.on("change",this.refresh)},refresh:function(){var e=this.toJSON(),t=(e.currentPage>0?e.currentPage:e.pagesCount)-e.pagesAverage;e.pagesCount-t<e.pagesLimit&&(t=e.pagesCount-e.pagesLimit+1),t<1&&(t=1);var i=t+e.pagesLimit-1;i>e.pagesCount&&(i=e.pagesCount),this.set({firstPage:t,lastPage:i},{silent:!0}),this.trigger("refresh")}})},function(e,t,i){"use strict";var n=i(9),s=i(7),o=i(324);e.exports=s.ItemView.extend({el:".js-pagination:first",template:o,modelEvents:{refresh:"render"},initialize:function(){this.render()},getNewestPageUrl:function(){return"".concat(this.model.module.getBaseUrl(),"/")},getCustomPageUrl:function(e){return"".concat(this.model.module.getBaseUrl(),"/page").concat(e,"/")},serializeData:function(){var e=this.model.toJSON();return e.resolveNewestPageUrl=n.bind(this.getNewestPageUrl,this),e.resolveCustomPageUrl=n.bind(this.getCustomPageUrl,this),e}})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a,r,l,c){if(!e&&a>1){i+='<span class="b-pagination__item title">\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b:</span>',o>1&&(i=i+'<a class="b-pagination__item arrow" data="{&quot;page&quot;:1}"'+n.attr("href",l(1),!0,!0)+">&larr;</a>");for(var u=o;u<=a;)i=i+"<a"+(n.attr("class",n.classes(["b-pagination__item","page",s==u?"current":""],[!1,!1,!0]),!1,!0)+n.attr("data",{page:u},!0,!0)+n.attr("href",l(u),!0,!0))+">"+n.escape(null==(t=u)?"":t)+"</a>",u++;a<r&&(i=i+'<a class="b-pagination__item arrow"'+n.attr("data",{page:r},!0,!0)+n.attr("href",l(r),!0,!0)+">&rarr;</a>")}else if(a>1){i+='<span class="b-pagination__item title">\u0421\u0442\u0440\u0430\u043d\u0438\u0446\u044b:</span>',o>1&&(i=i+'<a class="b-pagination__item arrow" data="{&quot;page&quot;:0}"'+n.attr("href",c(),!0,!0)+">&larr;</a>");for(u=a;u>=o;)i=i+"<a"+(n.attr("class",n.classes(["b-pagination__item","page",s==u?"current":""],[!1,!1,!0]),!1,!0)+n.attr("data",{page:u},!0,!0)+n.attr("href",u==a?c():l(u),!0,!0))+">"+n.escape(null==(t=u)?"":t)+"</a>",u--;a<r&&(i=i+'<a class="b-pagination__item arrow"'+n.attr("data",{page:r},!0,!0)+n.attr("href",l(r),!0,!0)+">&rarr;</a>")}}.call(this,"active"in s?s.active:"undefined"!==typeof active?active:void 0,"currentPage"in s?s.currentPage:"undefined"!==typeof currentPage?currentPage:void 0,"firstPage"in s?s.firstPage:"undefined"!==typeof firstPage?firstPage:void 0,"lastPage"in s?s.lastPage:"undefined"!==typeof lastPage?lastPage:void 0,"pagesCount"in s?s.pagesCount:"undefined"!==typeof pagesCount?pagesCount:void 0,"resolveCustomPageUrl"in s?s.resolveCustomPageUrl:"undefined"!==typeof resolveCustomPageUrl?resolveCustomPageUrl:void 0,"resolveNewestPageUrl"in s?s.resolveNewestPageUrl:"undefined"!==typeof resolveNewestPageUrl?resolveNewestPageUrl:void 0),i}},function(e,t,i){"use strict";var n=i(11),s=i(0),o=i(326);e.exports=s.Model.extend({module:null,initialize:function(e){this.module=e.module,this.view=new o({model:this}),this.listenTo(this.module,"start",n.bind(this.subscribe,this)),this.listenTo(this.module,"finish",n.bind(this.unsubscribe,this))},subscribe:function(){this.module.faye.subscribe(this.getSubscribeChannel(),n.bind(this.onSubscribeTick,this))},unsubscribe:function(){this.module.faye.unsubscribe(this.getSubscribeChannel())},getSubscribeChannel:function(){return this.module.getSubscribeChannel("online_info")},onSubscribeTick:function(e){this.set(e),e.is_forward_sort&&this.module.finish()}})},function(e,t,i){"use strict";var n=i(7),s=i(327),o=i(38);e.exports=n.ItemView.extend({el:".js-timeline-status:first",template:s,modelEvents:{change:"render"},onRender:function(){this.$el.find(".js-inline-gallery").each((function(e,t){return o({el:$(t)})}))}})},function(e,t,i){var n=i(2);e.exports=function(e){var t,s="",o={},a=e||{};return function(a,r){var l=[];a&&(a.gallery&&"Box::Gallery"==a.gallery.type&&(s+='\n<div class="b-online-stat__gallery">\n  \x3c!-- use scope for gallery template--\x3e',o.gallery=t=function(n){this&&this.block,this&&this.attributes;s+=null==(t=i(53).call(this,e))?"":t},l.push("  "),o.gallery(a.gallery),l.pop(),s+="\n</div>"),a.sections&&function(){var e=a.sections;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){(r=e[i]).body&&(s+='\n<div class="b-online-stat__block">',r.title&&(s=s+'\n  <div class="b-online-stat__block__title">'+n.escape(null==(t=r.title)?"":t)+"</div>"),s=s+'\n  <div class="b-online-stat__block__body">'+n.escape(null==(t=r.body)?"":t)+"</div>\n</div>")}else{o=0;for(var i in e){var r;o++,(r=e[i]).body&&(s+='\n<div class="b-online-stat__block">',r.title&&(s=s+'\n  <div class="b-online-stat__block__title">'+n.escape(null==(t=r.title)?"":t)+"</div>"),s=s+'\n  <div class="b-online-stat__block__body">'+n.escape(null==(t=r.body)?"":t)+"</div>\n</div>")}}}.call(this),r&&(s=s+'\n<div class="b-online-stat__status">'+n.escape(null==(t=r)?"":t)+"</div>"),a.team1&&a.team2&&(s=s+'\n<div class="b-online-stat__wrap">\n  <h4 class="b-online-stat__title">\n    <div class="team">'+n.escape(null==(t=a.team1)?"":t)+'</div>\n    <div class="team">'+n.escape(null==(t=a.team2)?"":t)+"</div>\n  </h4>",a.count&&a.count.team1&&a.count.team2&&(s=s+'\n  <div class="b-online-stat__count">\n    <div class="team">'+n.escape(null==(t=a.count.team1)?"":t)+'</div>\n    <div class="team-separator">:</div>\n    <div class="team">'+n.escape(null==(t=a.count.team2)?"":t)+"</div>\n  </div>"),a.sections&&function(){var e=a.sections;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var r=e[i];s+='\n  <div class="b-online-stat__section">',r.title&&(s=s+'\n    <h5 class="b-online-stat__section__title">'+n.escape(null==(t=r.title)?"":t)+"</h5>",function(){var e=r;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];0==i.indexOf("team")&&(s+='\n    <div class="team">',a.members&&(s+='\n      <ul class="b-online-players">',function(){var e=a.members;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}else{o=0;for(var i in e){o++;r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}}}.call(this),s+="\n      </ul>"),s+="\n    </div>")}else{o=0;for(var i in e){o++;a=e[i];0==i.indexOf("team")&&(s+='\n    <div class="team">',a.members&&(s+='\n      <ul class="b-online-players">',function(){var e=a.members;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}else{o=0;for(var i in e){o++;r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}}}.call(this),s+="\n      </ul>"),s+="\n    </div>")}}}.call(this)),s+="\n  </div>"}else{o=0;for(var i in e){o++;r=e[i];s+='\n  <div class="b-online-stat__section">',r.title&&(s=s+'\n    <h5 class="b-online-stat__section__title">'+n.escape(null==(t=r.title)?"":t)+"</h5>",function(){var e=r;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];0==i.indexOf("team")&&(s+='\n    <div class="team">',a.members&&(s+='\n      <ul class="b-online-players">',function(){var e=a.members;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}else{o=0;for(var i in e){o++;r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}}}.call(this),s+="\n      </ul>"),s+="\n    </div>")}else{o=0;for(var i in e){o++;a=e[i];0==i.indexOf("team")&&(s+='\n    <div class="team">',a.members&&(s+='\n      <ul class="b-online-players">',function(){var e=a.members;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}else{o=0;for(var i in e){o++;r=e[i];s=s+'\n        <li class="b-online-player"><span class="b-online-player__number">'+n.escape(null==(t=r.number)?"":t)+'</span><span class="b-online-player__name">'+n.escape(null==(t=r.name)?"":t)+"</span>",r.events&&function(){var e=r.events;if("number"==typeof e.length)for(var i=0,o=e.length;i<o;i++){var a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}else{o=0;for(var i in e){o++;a=e[i];s=s+'<span class="b-online-player__event">\n            <svg class="b-online-player__event__icon">\n              <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#ui-event_#{event.type}"></use>\n            </svg>'+n.escape(null==(t=a.time)?"":t)+n.escape(null==(t=a.time&&a.time.match(/^(\d+|\d+\+\d+)$/)?"'":null)?"":t)+"</span>"}}}.call(this),s+="\n        </li>"}}}.call(this),s+="\n      </ul>"),s+="\n    </div>")}}}.call(this)),s+="\n  </div>"}}}.call(this),s+="\n</div>"))}.call(this,"body"in a?a.body:"undefined"!==typeof body?body:void 0,"status"in a?a.status:"undefined"!==typeof status?status:void 0),s}},function(e,t,i){},function(e,t,i){"use strict";var n={desktop:{constructor:i(330),Popup:i(344)},mobile:{constructor:i(348),Popup:function(){}}};e.exports=function(e){var t=n[e.type],i=t?new t.constructor(e):{};return i.callPopup=function(e){return new n[e].Popup},i}},function(e,t,i){"use strict";var n=i(17),s={signin:i(99),signup:i(100),reset:i(101),forgotten:i(331),settings:i(332),notifications:i(102),activate:i(343)};e.exports=n.extend({name:"auth:desktop",initialize:function(e){new s[e.view](e)}})},function(e,t,i){"use strict";var n=i(0),s=i(12),o=i(3),a=i(4).parseQueryString;e.exports=n.View.extend({el:"#b-auth__forgotten-password-form",model:new n.Model,events:{submit:"onSubmit"},initialize:function(e){this.$messageForRamblerMail=$(document).find(".js-message-rambler-mail"),this.classNameVisible=this.$messageForRamblerMail.data("class-visible"),this.settings=e.settings||{},this.model.set(this.getPreloadMail()),this.email=new s.Input({el:this.$el.find('input[name="email"]'),name:"email",model:this.model,preferView:!1,livelabel:!0,validate:!0,rules:{required:!0,notrambler:!0,email:!0}}),this.submit=new s.Button({el:this.$el.find(".b-button"),events:{click:_.bind(this.onSubmit,this)}})},wait:function(){this._waiting||(this._waiting=!0,this.submit.wait())},listen:function(){this.submit.listen(),this._waiting=!1},onSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.wait();var i=this.model.get("email");if(!this.email.isValid())return this.email.resultValidate.errors.notrambler?this.$messageForRamblerMail.addClass(this.classNameVisible):this.$messageForRamblerMail.removeClass(this.classNameVisible),void this.listen();o.theid.run("password","recovery",i).then((function(){t.listen(),document.location.pathname="/auth/check_email_recovery"})).catch((function(e){t.listen(),e.responseJSON&&t.model.trigger("validation:message",e.responseJSON.errors)}))},getPreloadMail:function(){var e=a();return{email:e?e.email:null}}})},function(e,t,i){"use strict";var n=i(9),s=i(1),o=i(16),a=i(0),r=i(12),l=i(3);e.exports=a.View.extend({maxDate:new Date,minDate:new Date("January 01, 1920"),el:"#js-auth__settings",result:"#js-auth__settings-result",birthdayFormat:"DD.MM.YYYY",events:{submit:"onSubmit"},initialize:function(){var e=this;this.model=l.user.settings,this.$result=s(this.result),this.firstName=new r.Input({el:this.$el.find('input[name="first_name"]'),debounce:0,name:"first_name",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{maxlength:32,notspecials:!0}}),this.lastName=new r.Input({el:this.$el.find('input[name="last_name"]'),debounce:0,name:"last_name",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{maxlength:32,notspecials:!0}}),this.gender=new r.Select({el:this.$el.find('[name="gender"]'),name:"gender",model:this.model,preferView:!0,livelabel:!0,validate:!0,emptyClass:"b-input_empty"}),this.birthday=new r.Input({el:this.$el.find('[name="birthday"]'),debounce:0,name:"birthday",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{range:{from:new Date("January 01, 1920"),to:new Date,format:"DD.MM.YYYY"}}}),this.calendar=new r.Date.Calendar({model:this.model,name:"birthday",maxDate:this.maxDate,minDate:this.minDate,format:this.birthdayFormat,showCloseBtn:!0,yearRange:this.maxDate.getFullYear()-this.minDate.getFullYear()}),this.calendar.$el.addClass("b-auth__calendar"),this.calendar.render(),this.$el.after(this.calendar.$el),this.model.on("change:birthday",(function(){e.calendar.close()}),this),this.birthday.$el.on("click",(function(){e.$el.append(e.calendar.show().$el)})),this.calendar.$el.css(this.birthday.$el.offset()),this.button=new r.Button({el:this.$el.find('[type="submit"]'),events:{click:n.bind(this.onSubmit,this)}}),l.user.sync().then((function(){l.user.settings.sync().then(e.formattedBirthday.bind(e))})).catch((function(){window.location="/auth/signin/"}))},wait:function(){this.button.wait()},listen:function(){this.button.listen()},reset:function(){this.firstName.resetError(),this.lastName.resetError(),this.gender.resetError(),this.birthday.resetError()},onSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.validate()&&(this.wait(),this.model.save().then((function(){t.reset(),t.listen(),t.$result.text(t.$el.data("message-success")),t.$result.addClass("b-form__result_animate-show"),t.$result[0].addEventListener("transitionend",(function(e){e.stopImmediatePropagation(),t.$result.removeClass("b-form__result_animate-show"),t.$result.toggleClass("b-form__result_animate-hide")}))})).catch((function(e){t.reset(),t.listen(),e.responseJSON&&t.model.trigger("validation:message",e.responseJSON.errors)})))},formattedBirthday:function(e){var t=e.get("birthday");if(t){t=+t?new Date(1e3*t):t;var i=o(t).format(this.birthdayFormat);e.set("birthday",i)}},validate:function(){var e=this.firstName.isValid(),t=this.lastName.isValid(),i=this.birthday.isValid();return e&&t&&i}})},function(e,t,i){"use strict";var n=i(0),s=i(334);e.exports=n.Collection.extend({model:s})},function(e,t,i){"use strict";var n=i(0);e.exports=n.Model.extend({defaults:{active:!1,tag:null,value:null,label:null}})},function(e,t,i){"use strict";var n=i(0),s=i(3),o={desktop:i(336),mobile:i(337)};e.exports=n.View.extend({events:{"click .js-trigger":"onTrigger"},className:"b-notifications__item",initialize:function(e){this.template=o[e.type],this.pushwoosh=s.pushwoosh,this.render()},render:function(){this.$el.html(this.template(this.model.toJSON())),this.onRender()},onRender:function(){this.$trigger=this.$el.find(".js-trigger")},onTrigger:function(){var e=this;this.model.set("active",!this.model.get("active")),this.pushwoosh.triggerTag(this.model.toJSON()).then((function(){e.$trigger.toggleClass("b-trigger_active")})).catch((function(){e.model.set("active",!e.model.get("active"))}))}})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s){i=i+"\n<div"+n.attr("class",n.classes(["b-trigger","js-trigger",e?"b-trigger_active":""],[!1,!1,!0]),!1,!0)+'>\n  <div class="b-trigger__background">\n    <div class="b-trigger__label b-trigger__label_left">\u0434\u0430</div>\n    <div class="b-trigger__swipe"></div>\n    <div class="b-trigger__label b-trigger__label_right">\u043d\u0435\u0442</div>\n  </div>\n</div>\n<div class="b-trigger-message">'+n.escape(null==(t=s)?"":t)+"</div>"}.call(this,"active"in s?s.active:"undefined"!==typeof active?active:void 0,"label"in s?s.label:"undefined"!==typeof label?label:void 0),i}},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s){i=i+'\n<div class="b-trigger-message">'+n.escape(null==(t=s)?"":t)+"</div>\n<div"+n.attr("class",n.classes(["b-trigger","js-trigger",e?"b-trigger_active":""],[!1,!1,!0]),!1,!0)+'>\n  <div class="b-trigger__background">\n    <div class="b-trigger__label b-trigger__label_left">\u0434\u0430</div>\n    <div class="b-trigger__swipe"></div>\n    <div class="b-trigger__label b-trigger__label_right">\u043d\u0435\u0442</div>\n  </div>\n</div>'}.call(this,"active"in s?s.active:"undefined"!==typeof active?active:void 0,"label"in s?s.label:"undefined"!==typeof label?label:void 0),i}},function(e,t,i){i(2);e.exports=function(e){var t="",i=e||{};return function(e){t+='\n<div class="b-notifications">',"desktop"===e&&(t+='\n  <h1 class="b-notifications__header">\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</h1>'),t+='\n  <section class="js-container-lenta-breaking-news"></section>\n  <p class="b-notifications__sub-header">\u0421\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0437\u043d\u0430\u0447\u0438\u043c\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445 \u0432 \u0440\u0443\u0431\u0440\u0438\u043a\u0430\u0445</p>\n  <section class="js-container-lenta-sections-important"></section>\n</div>'}.call(this,"type"in i?i.type:"undefined"!==typeof type?type:void 0),t}},function(e,t,i){i(2);e.exports=function(e){var t="",i=e||{};return function(e){t+='\n<div class="b-notifications">',"desktop"===e&&(t+='\n  <h1 class="b-notifications__header">\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</h1>'),t+='\n  <div class="b-notifications_blocked">',"desktop"===e&&(t+='\n    <div class="b-notifications__logo">\n      <svg class="b-notifications__letter">\n        <use xlink:href="#ui-red-letter"></use>\n      </svg>\n    </div>'),t+='\n    <div class="b-notifications__message">\n      <div>\u0412 \u044d\u0442\u043e\u043c \u0431\u0440\u0430\u0443\u0437\u0435\u0440\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b.</div>\n      <div>\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0441\u0430\u043c\u044b\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445,<a href="/articles/2017/04/04/unblockpush/">&nbsp;\u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f.</a></div>\n    </div>\n  </div>\n</div>'}.call(this,"type"in i?i.type:"undefined"!==typeof type?type:void 0),t}},function(e,t,i){i(2);e.exports=function(e){var t="",i=e||{};return function(e){t+='\n<div class="b-notifications">',"desktop"===e&&(t+='\n  <h1 class="b-notifications__header">\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</h1>'),t+='\n  <div class="b-notifications_blocked">',"desktop"===e&&(t+='\n    <div class="b-notifications__logo">\n      <svg class="b-notifications__letter">\n        <use xlink:href="#ui-red-letter"></use>\n      </svg>\n    </div>'),t+='\n    <div class="b-notifications__message">\n      <div>\u0421\u0435\u0439\u0447\u0430\u0441 \u0432\u0441\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e\u0442\u043a\u043b\u044e\u0447\u0435\u043d\u044b.</div>\n      <div>\u0427\u0442\u043e\u0431\u044b \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f \u043e \u0441\u0430\u043c\u044b\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445, \u0432\u043a\u043b\u044e\u0447\u0438\u0442\u0435 \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f.</div>\n    </div>\n    <div class="b-notifications-button-enable js-enable">\u0412\u043a\u043b\u044e\u0447\u0438\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</div>\n  </div>\n</div>'}.call(this,"type"in i?i.type:"undefined"!==typeof type?type:void 0),t}},function(e,t,i){"use strict";var n=i(0);e.exports=n.Model.extend({defaults:{type:"desktop",isDefault:!1,isGranted:!1,isDenied:!1},initialize:function(){this.set("permission",Notification.permission),this.onChangePermission(),this.on("change:permission",this.onChangePermission)},onChangePermission:function(){var e=this.get("permission");e="is".concat(e.charAt(0).toUpperCase()).concat(e.slice(1)),this.set({isDefault:!1,isGranted:!1,isDenied:!1}),this.set(e,!0)}})},function(e,t,i){"use strict";e.exports=[{tag:"LentaBreakingNews",value:"breaking_news",label:"\u0425\u043e\u0442\u0438\u0442\u0435 \u043f\u043e\u043b\u0443\u0447\u0430\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f \u043e \u0441\u0430\u043c\u044b\u0445 \u0432\u0430\u0436\u043d\u044b\u0445 \u043d\u043e\u0432\u043e\u0441\u0442\u044f\u0445?",order:0},{tag:"LentaSectionsImportant",value:"russia_breaking",label:"\u0420\u043e\u0441\u0441\u0438\u044f",order:1},{tag:"LentaSectionsImportant",value:"world_breaking",label:"\u041c\u0438\u0440",order:4},{tag:"LentaSectionsImportant",value:"ussr_breaking",label:"\u0411\u044b\u0432\u0448\u0438\u0439 \u0421\u0421\u0421\u0420",order:7},{tag:"LentaSectionsImportant",value:"economics_breaking",label:"\u0424\u0438\u043d\u0430\u043d\u0441\u044b",order:10},{tag:"LentaSectionsImportant",value:"business_breaking",label:"\u0411\u0438\u0437\u043d\u0435\u0441",order:13},{tag:"LentaSectionsImportant",value:"forces_breaking",label:"\u0421\u0438\u043b\u043e\u0432\u044b\u0435 \u0441\u0442\u0440\u0443\u043a\u0442\u0443\u0440\u044b",order:2},{tag:"LentaSectionsImportant",value:"science_breaking",label:"\u041d\u0430\u0443\u043a\u0430 \u0438 \u0442\u0435\u0445\u043d\u0438\u043a\u0430",order:5},{tag:"LentaSectionsImportant",value:"sport_breaking",label:"\u0421\u043f\u043e\u0440\u0442",order:8},{tag:"LentaSectionsImportant",value:"culture_breaking",label:"\u041a\u0443\u043b\u044c\u0442\u0443\u0440\u0430",order:11},{tag:"LentaSectionsImportant",value:"media_breaking",label:"\u0418\u043d\u0442\u0435\u0440\u043d\u0435\u0442 \u0438 \u0421\u041c\u0418",order:3},{tag:"LentaSectionsImportant",value:"style_breaking",label:"\u0426\u0435\u043d\u043d\u043e\u0441\u0442\u0438",order:6},{tag:"LentaSectionsImportant",value:"travel_breaking",label:"\u041f\u0443\u0442\u0435\u0448\u0435\u0441\u0442\u0432\u0438\u044f",order:9},{tag:"LentaSectionsImportant",value:"life_breaking",label:"\u0418\u0437 \u0436\u0438\u0437\u043d\u0438",order:12}]},function(e,t,i){"use strict";var n=i(0),s=i(24),o=i(3);e.exports=n.View.extend({el:"#js-auth__activate",initialize:function(e){o.theid.run("user","activate",e.request_uuid,e.request_code),this.form=new s({el:this.$el.find("#js-auth__signin-form")}),this.form.model.set("email",e.request_email),this.listenTo(this.form,"submit",this.onSubmit)},onSubmit:function(e){var t=this;o.theid.run("user","signin",e).then((function(){t.form.trigger("submit:success"),document.location.pathname="/my/dashboard/"})).catch((function(e){t.form.trigger("submit:error",e)}))}})},function(e,t,i){"use strict";var n=i(0),s=i(1),o={signin:{View:i(99),template:i(345)},signup:{View:i(100),template:i(346)}};e.exports=n.View.extend({template:i(347),events:{"click .js-auth-choose":"onChooseType","click .js-auth-container-close":"onDestroy"},initialize:function(){this.$globalElems=s("html, body"),this.$body=s("body"),this.type="signin",this.render()},render:function(){this.$el.html(this.template()),this.onRender()},onRender:function(){this.$auth=this.$el.find(".js-auth-container"),this.renderForm(),this.disableScroll()},renderForm:function(){this.currentType=o[this.type],this.$auth.html(this.currentType.template()),this.$el.appendTo(this.$body),this.onRenderForm()},onRenderForm:function(){this.form=new this.currentType.View({page:"notifications"})},onChooseType:function(e){e.preventDefault();var t=s(e.target);this.type=t.data("type"),this.renderForm()},disableScroll:function(){this.$globalElems.css("overflow","hidden")},enableScroll:function(){this.$globalElems.css("overflow","")},onDestroy:function(){this.enableScroll(),this.remove()}})},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="b-popup__auth-header">\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0438\u043b\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\u043c\u0438</div>\n<ul class="b-auth__content-header">\n  <li class="b-auth__content-header-item"><a class="js-auth-choose" data-type="signup">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f</a></li>\n  <li class="b-auth__content-header-item b-auth__content-header-item--active"><a class="js-auth-choose" data-type="signin">\u0412\u0445\u043e\u0434</a></li>\n</ul>\n<div class="b-auth__content b-auth__content-centered">\n  <div class="b-auth__content-section">\n    <h1 class="b-auth__content-section-header">\u0427\u0435\u0440\u0435\u0437 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0442\u0438</h1>\n  </div>\n  <div class="b-auth__content-section">\n    <h1 class="b-auth__content-section-header">\u0421 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u044d\u043b. \u043f\u043e\u0447\u0442\u044b</h1>\n  </div>\n</div>\n<div class="b-auth__content" id="js-auth__signin">\n  <div class="b-auth__content-section">\n    <ul class="b-auth__content-section__list" id="b-auth__oauth">\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="facebook">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-fb">\n            <use xlink:href="#ui-social-fb"></use>\n          </svg>\n        </div>Facebook\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="twitter">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-tw">\n            <use xlink:href="#ui-social-tw"></use>\n          </svg>\n        </div>Twitter\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="vkontakte">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-vk">\n            <use xlink:href="#ui-social-vk"></use>\n          </svg>\n        </div>\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="livejournal">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-lj">\n            <use xlink:href="#ui-social-lj"></use>\n          </svg>\n        </div>LiveJournal\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="google">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-gp">\n            <use xlink:href="#ui-social-gp"></use>\n          </svg>\n        </div>Google\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="odnoklassniki">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-ok">\n            <use xlink:href="#ui-social-ok"></use>\n          </svg>\n        </div>\u041e\u0434\u043d\u043e\u043a\u043b\u0430\u0441\u0441\u043d\u0438\u043a\u0438\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="mailru">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-ml">\n            <use xlink:href="#ui-social-ml"></use>\n          </svg>\n        </div>Mail.ru\n      </li>\n    </ul>\n  </div>\n  <div class="b-auth__content-section__separator"></div>\n  <form class="b-auth__content-section" id="js-auth__signin-form" name="signin">\n    <div class="b-input__container">\n      <input class="b-input" name="email" placeholder="\u042d\u043b. \u043f\u043e\u0447\u0442\u0430" type="text">\n    </div>\n    <div class="b-input__container">\n      <input class="b-input" name="password" placeholder="\u041f\u0430\u0440\u043e\u043b\u044c" type="password">\n    </div>\n    <div class="b-input__container b-input__container_captcha js-captcha">\n      <input class="b-input" name="captcha" placeholder="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u0434 \u0441 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0438" type="text">\n    </div>\n    <button class="b-button b-button--red" type="submit">\u0412\u043e\u0439\u0442\u0438</button><a class="b-auth__link b-auth__link--red js-bind-mail" href="/auth/forgotten_password/">\u0412\u043e\u0441\u0441\u0442\u0430\u043d\u043e\u0432\u0438\u0442\u044c \u043f\u0430\u0440\u043e\u043b\u044c</a>\n    <div class="b-auth__footer b-auth__footer_separated">\u0415\u0449\u0451 \u043d\u0435\u0442 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430 \u0432 \xab\u041c\u043e\u0435\u0439 \u041b\u0435\u043d\u0442\u0435\xbb?<a class="js-auth-choose" data-type="signup">\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f</a></div>\n  </form>\n</div>\n<div class="b-auth__terms">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u044f\u0441\u044c \u0438\u043b\u0438 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u044f \u0432\u0445\u043e\u0434 \u0447\u0435\u0440\u0435\u0437 \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b, \u0432\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0441\u0432\u043e\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u0438\u0435 \u0441&nbsp;<a href="http://help.rambler.ru/legal/id/" target="_blank">\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f</a></div>'}},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="b-popup__auth-header">\u0412\u043e\u0439\u0434\u0438\u0442\u0435 \u0438\u043b\u0438 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u0439\u0442\u0435\u0441\u044c, \u0447\u0442\u043e\u0431\u044b \u0443\u043f\u0440\u0430\u0432\u043b\u044f\u0442\u044c \u0443\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f\u043c\u0438</div>\n<ul class="b-auth__content-header">\n  <li class="b-auth__content-header-item b-auth__content-header-item--active"><a class="js-auth-choose" data-type="signup">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f</a></li>\n  <li class="b-auth__content-header-item"><a class="js-auth-choose" data-type="signin">\u0412\u0445\u043e\u0434</a></li>\n</ul>\n<div class="b-auth__content b-auth__content-centered">\n  <div class="b-auth__content-section">\n    <h1 class="b-auth__content-section-header">\u0427\u0435\u0440\u0435\u0437 \u0441\u043e\u0446\u0438\u0430\u043b\u044c\u043d\u044b\u0435 \u0441\u0435\u0442\u0438</h1>\n  </div>\n  <div class="b-auth__content-section">\n    <h1 class="b-auth__content-section-header">\u0421 \u043f\u043e\u043c\u043e\u0449\u044c\u044e \u044d\u043b. \u043f\u043e\u0447\u0442\u044b</h1>\n  </div>\n</div>\n<div class="b-auth__content" id="js-auth__signup">\n  <div class="b-auth__content-section">\n    <ul class="b-auth__content-section__list" id="b-auth__oauth">\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="facebook">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-fb">\n            <use xlink:href="#ui-social-fb"></use>\n          </svg>\n        </div>Facebook\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="twitter">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-tw">\n            <use xlink:href="#ui-social-tw"></use>\n          </svg>\n        </div>Twitter\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="vkontakte">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-vk">\n            <use xlink:href="#ui-social-vk"></use>\n          </svg>\n        </div>\u0412\u041a\u043e\u043d\u0442\u0430\u043a\u0442\u0435\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="livejournal">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-lj">\n            <use xlink:href="#ui-social-lj"></use>\n          </svg>\n        </div>LiveJournal\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="google">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-gp">\n            <use xlink:href="#ui-social-gp"></use>\n          </svg>\n        </div>Google\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="odnoklassniki">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-ok">\n            <use xlink:href="#ui-social-ok"></use>\n          </svg>\n        </div>\u041e\u0434\u043d\u043e\u043a\u043b\u0430\u0441\u0441\u043d\u0438\u043a\u0438\n      </li>\n      <li class="b-auth__content-section__list-item js-oauth-provider" data-provider="mailru">\n        <div class="b-auth__brand">\n          <svg class="b-auth__brand-icon b-auth__brand-icon-ml">\n            <use xlink:href="#ui-social-ml"></use>\n          </svg>\n        </div>Mail.ru\n      </li>\n    </ul>\n  </div>\n  <div class="b-auth__content-section__separator"></div>\n  <form class="b-auth__content-section" id="js-auth__signup-form" name="signup">\n    <div class="b-input__container">\n      <input class="b-input" name="email" placeholder="\u042d\u043b. \u043f\u043e\u0447\u0442\u0430" type="text">\n    </div>\n    <div class="b-input__container">\n      <input class="b-input" name="password" placeholder="\u041f\u0430\u0440\u043e\u043b\u044c" type="password">\n    </div>\n    <button class="b-button b-button--red" type="submit">\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f</button>\n    <div class="b-auth__footer">\u0423\u0436\u0435 \u0435\u0441\u0442\u044c \u0430\u043a\u043a\u0430\u0443\u043d\u0442?<a class="js-auth-choose" data-type="signin">\u0412\u043e\u0439\u0442\u0438</a></div>\n    <div class="b-auth__footer b-auth__footer_separated b-auth__footer--rambler-mail js-message-rambler-mail" data-class-visible="b-auth__footer--rambler-mail__visible">\u0412\u044b \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b \u0432 Rambler&Co<br />\u0441 \u044d\u0442\u043e\u0439 \u043f\u043e\u0447\u0442\u043e\u0439.<a class="js-auth-choose" data-type="signin">\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c</a>.</div>\n  </form>\n</div>\n<div class="b-auth__terms">\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u0443\u044f\u0441\u044c \u0438\u043b\u0438 \u043e\u0441\u0443\u0449\u0435\u0441\u0442\u0432\u043b\u044f\u044f \u0432\u0445\u043e\u0434 \u0447\u0435\u0440\u0435\u0437 \u0441\u0442\u043e\u0440\u043e\u043d\u043d\u0438\u0435 \u0440\u0435\u0441\u0443\u0440\u0441\u044b, \u0432\u044b \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0430\u0435\u0442\u0435 \u0441\u0432\u043e\u0435 \u0441\u043e\u0433\u043b\u0430\u0441\u0438\u0435 \u0441&nbsp;<a href="http://help.rambler.ru/legal/id/" target="_blank">\u043f\u0440\u0430\u0432\u0438\u043b\u0430\u043c\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u043d\u0438\u044f</a></div>'}},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="b-popup__form-wrapper">\n  <div class="b-popup__auth b-auth">\n    <div class="b-popup__auth-container b-auth__container js-auth-container"></div>\n    <div class="b-popup__auth-container-close js-auth-container-close">\n      <svg class="b-popup__auth-container-close-cross">\n        <use xlink:href="#ui-cross"></use>\n      </svg>\n    </div>\n  </div>\n</div>'}},function(e,t,i){"use strict";var n=i(17),s={signin:i(349),signup:i(350),reset:i(101),forgotten:i(351),settings:i(352),activate:i(353),notifications:i(102)};e.exports=n.extend({name:"auth:mobile",initialize:function(e){new s[e.view](e)}})},function(e,t,i){"use strict";var n=i(0),s=i(1),o=i(24),a=i(3),r=i(4).parseQueryString;e.exports=n.View.extend({el:"#js-auth__signin-form",initialize:function(){var e=this;this.queryString=r(),this.page=this.queryString&&this.queryString.page||"dashboard",a.user.check().then((function(){return e.goToDashboard()})),this.form=new o({type:"signin",el:this.$el}),this.$linktoBack=s(".js-auth-return"),this.form.email.cancelValidationRule("notrambler"),this.listenTo(this.form,"submit",this.onSubmit),this.form.checkPreloadMail()&&(this.form.model.set(this.form.getPreloadData()),this.form.password.$el.focus()),this.setReturnLink()},onSubmit:function(e){var t=this;if(this.form.validate()){var i=this.queryString&&this.queryString.uri;a.theid.run("user","signin",e).then((function(){t.form.trigger("submit:success"),i?a.user.sync().then((function(){return a.theid.run("favourites","exists",a.user.getRsidx(),i)})).then((function(e){return!e&&a.theid.run("favourites","create",a.user.getRsidx(),i)})).then((function(){return t.goToDashboard()})).catch((function(){return t.goToDashboard()})):t.goToDashboard()})).catch((function(e){t.form.trigger("submit:error",e)}))}else this.form.listen()},goToDashboard:function(){document.location.pathname="/my/".concat(this.page,"/")},setReturnLink:function(){this.queryString&&this.queryString.from&&this.$linktoBack.length&&(this.$linktoBack.attr("href",this.queryString.from),this.$linktoBack.find(".js-auth-return-content").text("\u041d\u0430\u0437\u0430\u0434"))}})},function(e,t,i){"use strict";var n=i(0),s=i(24),o=i(3);e.exports=n.View.extend({el:"#js-auth__signup-form",initialize:function(){o.user.check().then((function(){window.location="/my/dashboard/"})),this.form=new s({type:"signup",el:this.$el}),this.listenTo(this.form,"submit",this.onSubmit),this.form.checkPreloadMail()&&(this.form.model.set(this.form.getPreloadData()),this.form.password.$el.focus())},onSubmit:function(e){var t=this;if(!this.form.validate())return this.form.email.resultValidate&&this.form.email.resultValidate.errors.notrambler&&this.form.showMessageForInputPass(),void this.form.listen();e.first_name=e.first_name||" ",e.last_name=e.last_name||" ",o.theid.run("user","signup",e).then((function(){t.form.trigger("submit:success"),document.location.pathname="/auth/check_email"})).catch((function(e){t.form.trigger("submit:error",e)}))}})},function(e,t,i){"use strict";var n=i(0),s=i(12),o=i(3),a=i(4).parseQueryString;e.exports=n.View.extend({el:"#b-auth__forgotten-password-form",model:new n.Model,events:{submit:"onSubmit"},initialize:function(e){this.$body=$("body"),this.settings=e.settings||{},this.model.set(this.getPreloadMail()),this.model.urlRoot="/id/passwords",this.tooltip=o.tooltip,this.email=new s.Input({el:this.$el.find('input[name="email"]'),name:"email",model:this.model,preferView:!1,livelabel:!0,validate:!0,rules:{required:!0,notrambler:!0,email:!0}}),this.submit=new s.Button({el:this.$el.find(".b-button"),events:{click:_.bind(this.onSubmit,this)}})},wait:function(){this._waiting||(this._waiting=!0,this.submit.wait())},listen:function(){this.submit.listen(),this._waiting=!1},onSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.wait();var i=this.model.get("email");if(!this.email.isValid())return this.email.resultValidate.errors.notrambler&&(this.$body.append(this.tooltip.renderWithData({type:"forgotten"}).$el),this.tooltip.show()),void this.listen();o.theid.run("password","recovery",i).then((function(){t.listen(),document.location.pathname="/auth/check_email_recovery"})).catch((function(e){t.listen(),e.responseJSON&&t.model.trigger("validation:message",e.responseJSON.errors)}))},getPreloadMail:function(){var e=a();return{email:e?e.email:null}}})},function(e,t,i){"use strict";var n=i(9),s=i(16),o=i(0),a=i(12),r=i(3);e.exports=o.View.extend({el:"#js-auth__settings",result:"#js-auth__settings-result",birthdayFormat:"DD.MM.YYYY",events:{submit:"onSubmit"},initialize:function(){var e=this;this.model=r.user.settings,this.$result=$(this.result),this.firstName=new a.Input({el:this.$el.find('input[name="first_name"]'),name:"first_name",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{maxlength:32,notspecials:!0}}),this.lastName=new a.Input({el:this.$el.find('input[name="last_name"]'),name:"last_name",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{maxlength:32,notspecials:!0}}),this.gender=new a.Select({el:this.$el.find('[name="gender"]'),name:"gender",model:this.model,preferView:!0,livelabel:!0,validate:!0}),this.birthday=new a.DateNative({el:this.$el.find('[name="birthday"]'),name:"birthday",model:this.model,preferView:!0,livelabel:!0,validate:!0,rules:{range:{from:new Date("January 01, 1920"),to:new Date,format:"DD.MM.YYYY"}}}),this.button=new a.Button({el:this.$el.find('[type="submit"]'),events:{click:n.bind(this.onSubmit,this)}}),r.user.sync().then((function(){r.user.settings.sync().then(e.formattedBirthday.bind(e))})).catch((function(){window.location="/auth/signin/"}))},wait:function(){this.button.wait()},listen:function(){this.button.listen()},reset:function(){this.firstName.resetError(),this.lastName.resetError(),this.gender.resetError(),this.birthday.resetError()},onSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.validate()&&(this.wait(),this.model.save().then((function(){t.reset(),t.listen(),t.$result.text(t.$el.data("message-success")),t.$result.addClass("b-form__result_animate-show"),t.$result[0].addEventListener("transitionend",(function(e){e.stopImmediatePropagation(),t.$result.removeClass("b-form__result_animate-show"),t.$result.toggleClass("b-form__result_animate-hide")}))})).catch((function(e){t.reset(),t.listen(),e.responseJSON&&t.model.trigger("validation:message",e.responseJSON.errors)})))},formattedBirthday:function(e){var t=e.get("birthday");if(t){t=+t?new Date(1e3*t):t;var i=s(t).format(this.birthdayFormat);e.set("birthday",i)}},validate:function(){var e=this.firstName.isValid(),t=this.lastName.isValid(),i=this.birthday.isValid();return e&&t&&i}})},function(e,t,i){"use strict";var n=i(0),s=i(24),o=i(3);e.exports=n.View.extend({el:"#js-auth__activate",initialize:function(e){o.theid.run("user","activate",e.request_uuid,e.request_code),this.form=new s({el:this.$el.find("#js-auth__signin-form")}),this.form.model.set("email",e.request_email),this.listenTo(this.form,"submit",this.onSubmit)},onSubmit:function(e){var t=this;o.theid.run("user","signin",e).then((function(){t.form.trigger("submit:success"),document.location.pathname="/my/dashboard/"})).catch((function(e){t.form.trigger("submit:error",e)}))}})},function(e,t,i){"use strict";var n=i(1),s=i(0),o=i(17),a=i(355),r=i(356),l=i(357),c=i(3);e.exports=o.extend({name:"regwall:desktop",favouriteIdentityKey:"uri",initialize:function(){var e=this;this.favourites=new s.Collection,"#logout"===document.location.hash&&c.user.clear(),this.registerNotifications(),c.user.sync().then((function(){e.renderUserPanel(),e.renderFavourites()})).catch((function(){e.renderUserPanel(),e.renderFavourites()}))},registerNotifications:function(){c.theid.on("500",(function(){c.notification.set("error","\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u043f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u043f\u043e\u0437\u0436\u0435.")}))},renderUserPanel:function(){new l({el:"#js-sidebar__menu-auth"}).render()},renderFavourites:function(){var e=this;this.$favourites=n(".js-favorite"),this.$favourites.each((function(t,i){var s=n(i).data(e.favouriteIdentityKey),o=e.favourites.findWhere({uri:s});o||(o=new a({uri:s}),e.favourites.add(o),c.user.isLoggedIn()?c.theid.run("favourites","exists",c.user.getRsidx(),s).then((function(t){o.set("exists",t),e.renderFavouritesByModel(o)})):e.renderFavouritesByModel(o))}))},renderFavouritesByModel:function(e){var t="[data-".concat(this.favouriteIdentityKey,'="').concat(e.get("uri"),'"]');this.$favourites.filter(t).each((function(t,i){new r({el:i,model:e,isTeachHint:"#teach"===document.location.hash&&0===t}).render()}))}})},function(e,t,i){"use strict";var n=i(0),s=i(3);e.exports=n.Model.extend({defaults:{uri:null,exists:!1},initialize:function(){this.on("change:exists",this.onExistsChange)},saveAs:function(e){return e?this.saveAsActive():this.saveAsUnactive()},saveAsActive:function(){var e=this;return s.user.check().then((function(t){return s.theid.run("favourites","create",t,e.attributes.uri).then((function(){e.set("exists",!0)}))}))},saveAsUnactive:function(){var e=this;return s.user.check().then((function(t){return s.theid.run("favourites","delete",t,e.attributes.uri).then((function(){e.set("exists",!1)}))}))},onExistsChange:function(e,t){this.trigger(t?"activate":"deactivate")},isActive:function(){return this.get("exists")}})},function(e,t,i){"use strict";var n=i(9),s=i(0),o=i(3);e.exports=s.View.extend({events:{"click .js-favorite__button":"onClick"},data:{classActive:"active",classLoaded:"active",classLogged:"active"},initialize:function(e){var t=this;this.options=e,this.tooltip=o.tooltip,this.data=n.extend(this.data,this.$el.data()),this.listenTo(o.user,"change",this.render),this.listenTo(this.model,"activate",this.renderAsActive),this.listenTo(this.model,"deactivate",this.renderAsUnactive),!this.model.get("exists")&&e.isTeachHint&&(this.$el.append(this.tooltip.renderWithData({type:"teach"}).$el),setTimeout((function(){t.tooltip.show(!0)}),1e3))},render:function(){this.model.get("exists")?this.renderAsActive():this.renderAsUnactive();var e=[];e.push(this.data.classLoaded),o.user.isLoggedIn()&&e.push(this.data.classLogged),this.model.isActive()&&e.push(this.data.classActive),this.$el.addClass(e.join(" "))},onClick:function(e){e.preventDefault(),e.stopPropagation(),o.user.isLoggedIn()?this.onClickUser():this.onClickGuest()},onClickUser:function(){var e=this;this.model.saveAs(!this.model.isActive()).catch((function(t){n.has(t,["responseJSON","errors","rsidx"])&&(o.user.clear(),e.model.set("exists",!1),e.onClickGuest())}))},onClickGuest:function(){this.$el.append(this.tooltip.renderWithData({type:"auth",uri:this.model.get("uri")}).$el),this.tooltip.show(!0)},renderAsActive:function(){this.$el.addClass(this.data.classActive),this.$el.find("span").text("\u0414\u043e\u0431\u0430\u0432\u043b\u0435\u043d\u043e"),this.tooltip&&this.tooltip.hide()},renderAsUnactive:function(){this.$el.removeClass(this.data.classActive),this.$el.find("span").text("\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0432 \xab\u041c\u043e\u044e \u041b\u0435\u043d\u0442\u0443\xbb")}})},function(e,t,i){"use strict";var n=i(9),s=i(0),o=i(3),a=i(4).getDevice(),r=a.isChrome,l=a.isSafari,c=a.isFirefox,u=a.isIos,h=i(358),d=i(359);e.exports=s.View.extend({events:{"click .js-auth__signout":"onSignoutClick","click .js-auth__logout":"onSignoutClick"},activeControllersList:["auth","my","users"],initialize:function(){this.listenTo(o.user,"change",this.render)},render:function(){return o.user.isLoggedIn()?this.renderAsActive():this.renderAsDefault(),this._initialRendered||(this._initialRendered=!0,setTimeout(this.renderAsLoaded.bind(this),0)),this.onRender(),this},onRender:function(){(r||l||c)&&!u||$(".js-notifications-panel").hide()},isActive:function(){var e=document.location.pathname.replace(/^\/|\/$/g,"").split("/");return n.includes(this.activeControllersList,e[0])},getClassLoaded:function(){return this.$el.data("class-loaded")},getClassLogged:function(){return this.$el.data("class-logged")},getClassActive:function(){return this.$el.data("class-active")},renderAsLoaded:function(){return this.$el.addClass(this.getClassLoaded()),this},renderAsDefault:function(){return this.undelegateEvents(),this.$el.html(h()),this.$el.removeClass(this.getClassLogged()),this.$el.toggleClass(this.getClassActive(),this.isActive()),this},renderAsActive:function(){return this.undelegateEvents(),this.$el.html(d()),this.$el.addClass(this.getClassLogged()),this.$el.toggleClass(this.getClassActive(),this.isActive()),this.delegateEvents(),this},onSignoutClick:function(e){e.preventDefault(),e.stopPropagation(),o.theid.run("user","signout",o.user.getRsidx()).then((function(){o.user.clear()}))}})},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='<a class="b-sidebar-menu__auth-link" href="/auth/signin/">\n  <div class="b-sidebar-menu__auth-label"><b>\u0412\u043e\u0439\u0442\u0438</b> \u0432 \u041c\u043e\u044e \u041b\u0435\u043d\u0442\u0443</div></a>'}},function(e,t,i){var n=i(2);e.exports=function(e){var t="",i=e||{};return function(e){t=t+'\n<div class="b-sidebar-menu__auth-anchor" id="b-sidebar-menu-auth__anchor">\n  <svg class="svg-icons__ui-menu b-sidebar-menu__auth-anchor-icon">\n    <use xlink:href="#ui-arrow-default_up"></use>\n  </svg>\n  <div class="b-sidebar-menu__popup b-sidebar-menu__auth-popup">\n    <ul class="b-sidebar-menu__popup-list">\n      <li class="b-sidebar-menu__popup-item"><a class="b-sidebar-menu__popup-link" href="/my/dashboard">\n          <div class="b-sidebar-menu__popup-icon-container">\n            <svg class="svg-icons__ui-shevron-topic b-sidebar-menu__popup-icon b-sidebar-menu__popup-icon-chevron">\n              <use xlink:href="#ui-chevron_smooth_stroke"></use>\n            </svg>\n          </div><span class="b-sidebar-menu__popup-label">\u041c\u043e\u0438 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b</span></a></li>\n      <li class="b-sidebar-menu__popup-item"><a class="b-sidebar-menu__popup-link" href="/my/settings">\n          <div class="b-sidebar-menu__popup-icon-container">\n            <svg class="svg-icons__ui-gear b-sidebar-menu__popup-icon b-sidebar-menu__popup-icon-gear">\n              <use xlink:href="#ui-gear"></use>\n            </svg>\n          </div><span class="b-sidebar-menu__popup-label">\u041d\u0430\u0441\u0442\u0440\u043e\u0439\u043a\u0438 \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430</span></a></li>\n      <li class="b-sidebar-menu__popup-item js-notifications-panel"><a class="b-sidebar-menu__popup-link" href="/my/notifications">\n          <div class="b-sidebar-menu__popup-icon-container">\n            <svg class="svg-icons__ui-gear b-sidebar-menu__popup-icon b-sidebar-menu__popup-icon-gear">\n              <use xlink:href="#ui-notice"></use>\n            </svg>\n          </div><span class="b-sidebar-menu__popup-label">\u0423\u0432\u0435\u0434\u043e\u043c\u043b\u0435\u043d\u0438\u044f</span></a></li>\n      <li class="b-sidebar-menu__popup-item b-sidebar-menu__popup-item_separated"><a class="b-sidebar-menu__popup-link"'+n.attr("href","https://id.rambler.ru/logout?rname=id&back="+e.location.origin,!0,!0)+'>\n          <div class="b-sidebar-menu__popup-icon-container">\n            <svg class="svg-icons__ui-exit b-sidebar-menu__popup-icon b-sidebar-menu__popup-icon-exit">\n              <use xlink:href="#ui-exit"></use>\n            </svg>\n          </div><span class="b-sidebar-menu__popup-label">\u0412\u044b\u0445\u043e\u0434</span></a></li>\n    </ul>\n  </div>\n</div><a class="b-sidebar-menu__auth-link" href="/my/dashboard">\n  <div class="b-sidebar-menu__auth-label"><b>\u041c\u043e\u044f \u041b\u0435\u043d\u0442\u0430</b></div></a>'}.call(this,"document"in i?i.document:"undefined"!==typeof document?document:void 0),t}},function(e,t,i){"use strict";var n=i(17),s=i(3);i(361);var o={dashboard:i(362),activate:i(380)};e.exports=n.extend({name:"dashboard:desktop",initialize:function(e){s.theid.on("423",(function(){s.notification.setByCode("rate")})),new o[e.view](e)}})},function(e,t,i){},function(e,t,i){"use strict";var n=i(12),s=i(363),o=i(7),a=i(366),r=i(368),l=i(3),c=i(376),u=i(379),h=o.LayoutView.extend({template:u,regions:{itemsRegion:"#js-user__dashboard-items",headerRegion:"#js-user__dashboard-header",readmoreRegion:"#js-user__dashboard-readmore"},initialize:function(e){this.el=e.el||null,this.collection=new s(null,{fixtures:c}),this.collection.on("load update",this.render,this),this.collection.load(),l.user.sync().catch((function(){window.location="/auth/signin/"}))},onRender:function(){this.regionManager.emptyRegions(),this.renderRegionHeader(),this.renderRegionItems(),this.collection.isMore()&&this.renderRegionReadmore()},renderRegionHeader:function(){this.headerRegion.show(new a)},renderRegionItems:function(){this.itemsRegion.show(new r({collection:this.collection}))},renderRegionReadmore:function(){var e=this;this.readmoreRegion.show(new n.Button({className:"b-button b-button--gray",text:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c \u0435\u0449\u0435",events:{click:function(){e.collection.meta.set("offset",e.collection.meta.get("offset")+e.collection.meta.get("limit")),e.collection.load()}}}))}});e.exports=function(){return new h({el:document.getElementById("js-user__dashboard")})}},function(e,t,i){"use strict";var n=i(9),s=i(0),o=i(364),a=i(365),r=i(3);e.exports=s.Collection.extend({model:o,fixtures:null,initialize:function(e,t){if(this.meta=new a,this.on("add remove",n.bind(this.onCollectionChange,this)),t.fixtures){var i=this.model;this.fixtures=n.map(t.fixtures,(function(e){return new i(e)})),this.length||this.loadFixtures()}},parse:function(e){return this.meta.set(e.meta||{}),e.favourites},isItems:function(){return!!this.length},isTopics:function(){return!!this.where({as:"topic"}).length},isMore:function(){return this.meta.get("offset")+this.meta.get("limit")<this.meta.get("total")},load:function(){var e=this;r.user.check().then((function(t){r.theid.run("favourites","collection",t,e.meta.get("offset"),e.meta.get("limit")).then((function(t){e.add(t),e.trigger("load")}))}))},removeFixtures:function(){this.remove(this.fixtures,{silent:!0}),this.trigger("remove:fixtures")},loadFixtures:function(){this.add(this.fixtures,{silent:!0}),this.trigger("add:fixtures")},onCollectionChange:function(){this.isTopics()?this.removeFixtures():this.loadFixtures()}})},function(e,t,i){"use strict";var n=i(0);e.exports=n.Model.extend({defaults:{as:"topic"}})},function(e,t,i){"use strict";var n=i(0);e.exports=n.Model.extend({defaults:{offset:0,limit:36,total:0},offset:function(e){var t=this.get("total")+e;this.set("total",t>0?t:0)}})},function(e,t,i){"use strict";var n=i(7),s=i(12),o=i(3),a=i(367);e.exports=n.ItemView.extend({template:a,initialize:function(){o.user.profile.sync().then((function(){o.user.profile.enableServerSync()}))},onRender:function(){this.checkbox?this.checkbox.setElement(this.$el.find("#remove_old")):this.checkbox=new s.Checkbox({el:this.$el.find("#remove_old").get(0),model:o.user.profile,name:"clear_favourites",debounce:300})},onDestroy:function(){this.checkbox.remove(),this.checkbox=null}})},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="b-user__dashboard-subheader">\n  <label>\n    <input id="remove_old" name="remove_old" type="checkbox">\u0423\u0434\u0430\u043b\u044f\u0442\u044c \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u044b \u0441\u0442\u0430\u0440\u0448\u0435 7 \u0434\u043d\u0435\u0439\n  </label>\n</div>'}},function(e,t,i){"use strict";var n=i(7),s=i(369),o=i(371),a=i(373),r=i(375);e.exports=n.CompositeView.extend({template:r,views:{sample:s,topic:o,teach:a},collectionEvents:{"add:fixtures remove:fixtures":"render"},className:"b-user__dashboard-items",getChildView:function(e){var t=e.get("as");return this.views[t]?this.views[t]:n.CompositeView.prototype.getChildView.apply(this,arguments)},onShow:function(){var e=this.$el.find(".b-user__dashboard-column").data("height",0);this.children.each((function(t){var i=e.first(),n=t.model.get("column")-1;if(n>=0&&n<e.length)i=e.eq(n);else for(var s=e.length-1;s>=0;s--){var o=e.eq(s);o.data("height")-11<i.data("height")&&(i=o)}i.append(t.$el),i.data("height",i.data("height")+t.$el.height())}))}})},function(e,t,i){"use strict";var n=i(54),s=i(370);e.exports=n.extend({template:s,className:"b-user__dashboard-item b-user__dashboard-item_article b-user__dashboard-item_sample"})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a){i=i+'<a class="b-user__dashboard-item__preview"'+n.attr("href",a,!0,!0)+'><img class="b-user__dashboard-item__picture"'+n.attr("src",o,!0,!0)+' width="100%"></a>\n<div class="b-user__dashboard-item__title">\n  <h3><a'+n.attr("href",a,!0,!0)+">"+(null==(t=s)?"":t)+'</a></h3>\n</div>\n<div class="b-user__dashboard-item__headline">'+(null==(t=e)?"":t)+"</div>"}.call(this,"rightcol"in s?s.rightcol:"undefined"!==typeof rightcol?rightcol:void 0,"title"in s?s.title:"undefined"!==typeof title?title:void 0,"title_image_url"in s?s.title_image_url:"undefined"!==typeof title_image_url?title_image_url:void 0,"uri"in s?s.uri:"undefined"!==typeof uri?uri:void 0),i}},function(e,t,i){"use strict";var n=i(16),s=i(54),o=i(3),a=i(372);e.exports=s.extend({template:a,events:{"click .js-dashboard__topic-remove":"onRemoveClick"},attributes:function(){return{"data-partslug":this.model.get("part_slug")}},className:function(){var e="news"!==this.model.get("type"),t="lg"===this.model.get("type"),i=["b-user__dashboard-item"];return e&&!t&&i.push("b-user__dashboard-item_article"),!e&&!t&&i.push("b-user__dashboard-item_news"),t&&i.push("b-user__dashboard-item_lj"),i.join(" ")},templateHelpers:function(){var e=this;return{time:function(){return n(1e3*+e.model.get("modified")).format("HH:mm")},date:function(){var t=n(1e3*+e.model.get("modified"));return t.isSame(new Date,"day")?"\u0421\u0435\u0433\u043e\u0434\u043d\u044f":t.format("D MMMM YYYY")}}},onRemoveClick:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.remove(),this.model.collection.meta.offset(-1),this.model.collection.remove(this.model),o.user.check().then((function(e){o.theid.run("favourites","delete",e,t.model.get("uri"))}))}})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s,o,a,r,l,c,u,h){var d="news"!=u,m="lg"==u;i+='<span class="b-user__dashboard-item__remove js-dashboard__topic-remove">\n  <svg>\n    <use xlink:href="#ui-chevron_cross_stroke"></use>\n  </svg>\n  <svg>\n    <use xlink:href="#ui-chevron_cross"></use>\n  </svg></span>\n<div class="b-user__dashboard-item__info">',i=d&&!m?a&&a.title?i+'<a class="b-user__dashboard-item__rubric"'+n.attr("href",a.path,!0,!0)+">"+(null==(t=a.title)?"":t)+'</a><span class="b-user__dashboard-item__date">'+(null==(t="&nbsp;&mdash;&nbsp;"+e())?"":t)+"</span>":i+'<span class="b-user__dashboard-item__date">'+(null==(t=e())?"":t)+"</span>":i+'<span class="b-user__dashboard-item__time">'+(null==(t=r())?"":t)+'</span><span class="b-user__dashboard-item__date">'+(null==(t="&nbsp;"+e())?"":t)+"</span>",i+="\n</div>",d&&!m&&(i=-1!=="photo online audio video theme".indexOf(s)?i+'<a class="b-user__dashboard-item__preview b-badge"'+n.attr("href",h,!0,!0)+'><img class="b-user__dashboard-item__picture"'+n.attr("src",c,!0,!0)+' width="100%">\n  <svg class="b-badge__icon">\n    <use xlink:href="#ui-badge-#{part_slug}"></use>\n  </svg></a>':i+'<a class="b-user__dashboard-item__preview"'+n.attr("href",h,!0,!0)+'><img class="b-user__dashboard-item__picture"'+n.attr("src",c,!0,!0)+' width="100%"></a>'),i=i+'\n<div class="b-user__dashboard-item__title">\n  <h3><a'+n.attr("href",h,!0,!0)+">"+n.escape(null==(t=l)?"":t)+"</a></h3>\n</div>",d&&!m&&o&&(i=i+'\n<div class="b-user__dashboard-item__headline">'+(null==(t=o)?"":t)+"</div>")}.call(this,"date"in s?s.date:"undefined"!==typeof date?date:void 0,"part_slug"in s?s.part_slug:"undefined"!==typeof part_slug?part_slug:void 0,"rightcol"in s?s.rightcol:"undefined"!==typeof rightcol?rightcol:void 0,"rubric"in s?s.rubric:"undefined"!==typeof rubric?rubric:void 0,"time"in s?s.time:"undefined"!==typeof time?time:void 0,"title"in s?s.title:"undefined"!==typeof title?title:void 0,"title_image_url"in s?s.title_image_url:"undefined"!==typeof title_image_url?title_image_url:void 0,"type"in s?s.type:"undefined"!==typeof type?type:void 0,"uri"in s?s.uri:"undefined"!==typeof uri?uri:void 0),i}},function(e,t,i){"use strict";var n=i(54),s=i(374);e.exports=n.extend({template:s,className:"b-user__dashboard-item b-user__dashboard-item_article b-user__dashboard-item_teach"})},function(e,t,i){var n=i(2);e.exports=function(e){var t,i="",s=e||{};return function(e,s){i=i+'<a class="b-user__dashboard-item__preview"'+n.attr("href",s,!0,!0)+'>\n  <div class="b-user__dashboard-item__preview-content">\n    <svg class="b-user__dashboard-item__icon">\n      <use xlink:href="#ui-chevron_add"></use>\n    </svg>\n    <div class="b-user__dashboard-item__title">\n      <h3>'+(null==(t=e)?"":t)+"</h3>\n    </div>\n  </div></a>"}.call(this,"title"in s?s.title:"undefined"!==typeof title?title:void 0,"uri"in s?s.uri:"undefined"!==typeof uri?uri:void 0),i}},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div class="b-user__dashboard-column"></div>\n<div class="b-user__dashboard-column"></div>\n<div class="b-user__dashboard-column"></div>'}},function(e,t,i){"use strict";e.exports=[{as:"sample",column:1,uri:"/articles/2016/09/01/mylenta1/",title:"\u0427\u0442\u043e \u043f\u0440\u043e\u0438\u0441\u0445\u043e\u0434\u0438\u0442?",rightcol:"\u0417\u0430\u0447\u0435\u043c \u043c\u044b \u043f\u0440\u0435\u0434\u043b\u0430\u0433\u0430\u0435\u043c \u0432\u0430\u043c \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f",title_image_url:i(377)},{as:"sample",column:2,uri:"/articles/2016/09/01/mylenta2/",title:"FAQ",rightcol:"\u041a\u0430\u043a \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u044c\u0441\u044f \xab\u041c\u043e\u0435\u0439 \u041b\u0435\u043d\u0442\u043e\u0439\xbb",title_image_url:i(378)},{as:"teach",column:3,uri:"/articles/2016/10/03/edharris/#teach",title:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0435\u0440\u0432\u044b\u0439<br/>\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0432 \xab\u041c\u043e\u044e \u041b\u0435\u043d\u0442\u0443\xbb",title_image_url:"\u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043d\u043e\u0432\u044b\u0439 \u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b \u0432 \xab\u041c\u043e\u044e \u041b\u0435\u043d\u0442\u0443\xbb"}]},function(e,t,i){e.exports=i.p+"javascripts/core/modules/dashboard/images/sample-bookmark.92435c45.png"},function(e,t,i){e.exports=i.p+"javascripts/core/modules/dashboard/images/sample-man.0ca89dd4.png"},function(e,t,i){i(2);e.exports=function(e){var t="";return t+='\n<div id="js-user__dashboard-header"></div>\n<div id="js-user__dashboard-items"></div>\n<div class="b-user__dashboard-readmore" id="js-user__dashboard-readmore"></div>'}},function(e,t,i){"use strict";var n=i(1);e.exports=function(){var e=document.getElementById("uuid").value,t=document.getElementById("code").value;n.ajax("/id/users/activate/".concat(e,"/").concat(t))}}],[[153,0,1]]]);